---
name: alfred:1-spec
description: EARS ëª…ì„¸ ì‘ì„± + ë¸Œëœì¹˜/PR ìƒì„±
argument-hint: "ì œëª©1 ì œëª©2 ... | SPEC-ID ìˆ˜ì •ë‚´ìš©"
tools: Read, Write, Edit, MultiEdit, Grep, Glob, TodoWrite, Bash
---

# ğŸ—ï¸ MoAI-ADK 1ë‹¨ê³„: EARS ëª…ì„¸ ì‘ì„± + ë¸Œëœì¹˜/PR ìƒì„±

**ìš°ì„ ìˆœìœ„:** ì»¤ë§¨ë“œ ì§€ì¹¨ì€ ì—ì´ì „íŠ¸ ì§€ì¹¨ë³´ë‹¤ **ìƒìœ„**ì´ë‹¤.

## ğŸ¯ ì»¤ë§¨ë“œ ëª©ì 

í”„ë¡œì íŠ¸ ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ EARS êµ¬ë¬¸ì˜ ëª…ì„¸ì„œë¥¼ ì‘ì„±í•˜ê³ , Personal/Team ëª¨ë“œì— ë”°ë¼ Git ë¸Œëœì¹˜ ë° PRì„ ìƒì„±í•©ë‹ˆë‹¤.

**SPEC ìë™ ì œì•ˆ/ìƒì„± ëŒ€ìƒ**: $ARGUMENTS

## ğŸ“‹ ì‹¤í–‰ íë¦„

1. **í”„ë¡œì íŠ¸ ë¶„ì„**: product/structure/tech.md ì‹¬ì¸µ ë¶„ì„
2. **SPEC í›„ë³´ ë°œêµ´**: ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ê²°ì •
3. **ì‚¬ìš©ì í™•ì¸**: ì‘ì„± ê³„íš ê²€í†  ë° ìŠ¹ì¸
4. **SPEC ì‘ì„±**: EARS êµ¬ì¡°ì˜ ëª…ì„¸ì„œ ìƒì„± (spec.md, plan.md, acceptance.md)
5. **Git ì‘ì—…**: git-managerë¥¼ í†µí•œ ë¸Œëœì¹˜/PR ìƒì„±

## ğŸ”— ì—°ê´€ ì—ì´ì „íŠ¸

- **Primary**: spec-builder (ğŸ—ï¸ ì„¤ê³„ì) - SPEC ë¬¸ì„œ ì‘ì„± ì „ë‹´
- **Secondary**: git-manager (ğŸŒ¿ ì •ì›ì‚¬) - Git ë¸Œëœì¹˜/PR ìƒì„± ì „ë‹´

## ğŸ’¡ ì‚¬ìš© ì˜ˆì‹œ

```bash
/alfred:1-spec                      # í”„ë¡œì íŠ¸ ë¬¸ì„œ ê¸°ë°˜ ìë™ ì œì•ˆ
/alfred:1-spec "JWT ì¸ì¦ ì‹œìŠ¤í…œ"       # ë‹¨ì¼ SPEC ìˆ˜ë™ ìƒì„±
/alfred:1-spec SPEC-001 "ë³´ì•ˆ ë³´ê°•"   # ê¸°ì¡´ SPEC ë³´ì™„
```

## ğŸ” STEP 1: SPEC ë¶„ì„ ë° êµ¬í˜„ ê³„íš ìˆ˜ë¦½

í”„ë¡œì íŠ¸ ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ SPEC í›„ë³´ë¥¼ ì œì•ˆí•˜ê³  êµ¬í˜„ ì „ëµì„ ìˆ˜ë¦½í•œ í›„ ì‚¬ìš©ì í™•ì¸ì„ ë°›ìŠµë‹ˆë‹¤.

### SPEC ë¶„ì„ ì§„í–‰

1. **í”„ë¡œì íŠ¸ ë¬¸ì„œ ë¶„ì„**
   - product/structure/tech.md ì‹¬ì¸µ ë¶„ì„
   - ê¸°ì¡´ SPEC ëª©ë¡ ë° ìš°ì„ ìˆœìœ„ ê²€í† 
   - êµ¬í˜„ ê°€ëŠ¥ì„± ë° ë³µì¡ë„ í‰ê°€

2. **SPEC í›„ë³´ ë°œêµ´**
   - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ì¶”ì¶œ
   - ê¸°ìˆ ì  ì œì•½ì‚¬í•­ ë°˜ì˜
   - ìš°ì„ ìˆœìœ„ë³„ SPEC í›„ë³´ ë¦¬ìŠ¤íŠ¸ ìƒì„±

3. **êµ¬í˜„ ê³„íš ë³´ê³ **
   - ë‹¨ê³„ë³„ SPEC ì‘ì„± ê³„íš ì œì‹œ
   - ì˜ˆìƒ ì‘ì—… ë²”ìœ„ ë° ì˜ì¡´ì„± ë¶„ì„
   - EARS êµ¬ì¡° ë° Acceptance Criteria ì„¤ê³„

### ì‚¬ìš©ì í™•ì¸ ë‹¨ê³„

êµ¬í˜„ ê³„íš ê²€í†  í›„ ë‹¤ìŒ ì¤‘ ì„ íƒí•˜ì„¸ìš”:
- **"ì§„í–‰"** ë˜ëŠ” **"ì‹œì‘"**: ê³„íšëŒ€ë¡œ SPEC ì‘ì„± ì‹œì‘
- **"ìˆ˜ì • [ë‚´ìš©]"**: ê³„íš ìˆ˜ì • ìš”ì²­
- **"ì¤‘ë‹¨"**: SPEC ì‘ì„± ì¤‘ë‹¨

---

## ğŸš€ STEP 2: SPEC ë¬¸ì„œ ì‘ì„± ì‹¤í–‰ (ì‚¬ìš©ì ìŠ¹ì¸ í›„)

ì‚¬ìš©ì ìŠ¹ì¸ í›„ spec-builder ì—ì´ì „íŠ¸ê°€ **EARS ë°©ì‹ì˜ êµ¬ì¡°í™”ëœ ëª…ì„¸ì„œ ì‘ì„±**ê³¼ **ëª¨ë“œë³„ ë¸Œëœì¹˜/PR ìƒì„±**ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

## ê¸°ëŠ¥

- **ULTRATHINK**: `.moai/project/{product,structure,tech}.md`ë¥¼ ë¶„ì„í•´ êµ¬í˜„ í›„ë³´ë¥¼ ì œì•ˆí•˜ê³  ì‚¬ìš©ì ìŠ¹ì¸ í›„ SPECì„ ìƒì„±í•©ë‹ˆë‹¤.
- **Personal ëª¨ë“œ**: `.moai/specs/SPEC-{ID}/` ë””ë ‰í„°ë¦¬ì™€ í…œí”Œë¦¿ ë¬¸ì„œë¥¼ ë§Œë“­ë‹ˆë‹¤ (**ë””ë ‰í† ë¦¬ëª… í˜•ì‹ í•„ìˆ˜**: `SPEC-` ì ‘ë‘ì–´ + TAG ID).
- **Team ëª¨ë“œ**: GitHub Issue(ë˜ëŠ” Discussion)ë¥¼ ìƒì„±í•˜ê³  ë¸Œëœì¹˜ í…œí”Œë¦¿ê³¼ ì—°ê²°í•©ë‹ˆë‹¤.

## ì‚¬ìš©ë²•

```bash
/alfred:1-spec                      # í”„ë¡œì íŠ¸ ë¬¸ì„œ ê¸°ë°˜ ìë™ ì œì•ˆ (ê¶Œì¥)
/alfred:1-spec "JWT ì¸ì¦ ì‹œìŠ¤í…œ"       # ë‹¨ì¼ SPEC ìˆ˜ë™ ìƒì„±
/alfred:1-spec SPEC-001 "ë³´ì•ˆ ë³´ê°•"   # ê¸°ì¡´ SPEC ë³´ì™„
```

ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ Q&A ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ 3~5ê±´ì„ ì œì•ˆí•˜ë©°, ìŠ¹ì¸í•œ í•­ëª©ë§Œ ì‹¤ì œ SPECìœ¼ë¡œ í™•ì •ë©ë‹ˆë‹¤.

## ëª¨ë“œë³„ ì²˜ë¦¬ ìš”ì•½

| ëª¨ë“œ     | ì‚°ì¶œë¬¼                                                               | ë¸Œëœì¹˜ ì „ëµ                                     | ì¶”ê°€ ì‘ì—…                                       |
| -------- | -------------------------------------------------------------------- | ----------------------------------------------- | ----------------------------------------------- |
| Personal | `.moai/specs/SPEC-XXX/spec.md`, `plan.md`, `acceptance.md` ë“± í…œí”Œë¦¿ | `main` ë˜ëŠ” `develop`ì—ì„œ ë¶„ê¸° (ì„¤ì • ê¸°ì¤€)      | git-manager ì—ì´ì „íŠ¸ê°€ ìë™ìœ¼ë¡œ ì²´í¬í¬ì¸íŠ¸ ìƒì„± |
| Team     | GitHub Issue(`[SPEC-XXX] ì œëª©`), Draft PR(ì˜µì…˜)                      | **í•­ìƒ `develop`ì—ì„œ ë¶„ê¸°** (GitFlow í‘œì¤€)      | `gh` CLI ë¡œê·¸ì¸ ìœ ì§€, Draft PR â†’ develop ìƒì„±   |

## ì…ë ¥ ì˜µì…˜

- **ìë™ ì œì•ˆ**: `/alfred:1-spec` â†’ í”„ë¡œì íŠ¸ ë¬¸ì„œ í•µì‹¬ bulletì„ ê¸°ë°˜ìœ¼ë¡œ í›„ë³´ ë¦¬ìŠ¤íŠ¸ ì‘ì„±
- **ìˆ˜ë™ ìƒì„±**: ì œëª©ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬ â†’ 1ê±´ë§Œ ìƒì„±, Acceptance í…œí”Œë¦¿ì€ íšŒì‹  í›„ ë³´ì™„
- **ë³´ì™„ ëª¨ë“œ**: `SPEC-ID "ë©”ëª¨"` í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ â†’ ê¸°ì¡´ SPEC ë¬¸ì„œ/Issueë¥¼ ì—…ë°ì´íŠ¸

## ğŸ“‹ STEP 1 ì‹¤í–‰ ê°€ì´ë“œ: SPEC ë¶„ì„ ë° ê³„íš ìˆ˜ë¦½

### 1. í”„ë¡œì íŠ¸ ë¬¸ì„œ ë¶„ì„

ë‹¤ìŒì„ ìš°ì„ ì ìœ¼ë¡œ ì‹¤í–‰í•˜ì—¬ SPEC í›„ë³´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤:

```bash
# í”„ë¡œì íŠ¸ ë¬¸ì„œ ê¸°ë°˜ SPEC ë¶„ì„
@agent-spec-builder "$ARGUMENTS ë¶„ì„ ë° SPEC ê³„íš ìˆ˜ë¦½"
```

#### ë¶„ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **ìš”êµ¬ì‚¬í•­ ì¶”ì¶œ**: product.mdì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ íŒŒì•…
- [ ] **ì•„í‚¤í…ì²˜ ì œì•½**: structure.mdì˜ ì‹œìŠ¤í…œ ì„¤ê³„ ì œì•½ì‚¬í•­ í™•ì¸
- [ ] **ê¸°ìˆ ì  ì œì•½**: tech.mdì˜ ê¸°ìˆ  ìŠ¤íƒ ë° í’ˆì§ˆ ì •ì±…
- [ ] **ê¸°ì¡´ SPEC**: í˜„ì¬ SPEC ëª©ë¡ ë° ìš°ì„ ìˆœìœ„ ê²€í† 

### 2. SPEC í›„ë³´ ë°œêµ´ ì „ëµ

#### ìš°ì„ ìˆœìœ„ ê²°ì • ê¸°ì¤€

| ìš°ì„ ìˆœìœ„ | ê¸°ì¤€ | SPEC í›„ë³´ ìœ í˜• |
|---------|------|----------------|
| **ë†’ìŒ** | í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ | ì‚¬ìš©ì í•µì‹¬ ê¸°ëŠ¥, API ì„¤ê³„ |
| **ì¤‘ê°„** | ì‹œìŠ¤í…œ ì•ˆì •ì„± | ì¸ì¦/ë³´ì•ˆ, ë°ì´í„° ê´€ë¦¬ |
| **ë‚®ìŒ** | ê°œì„  ë° í™•ì¥ | UI/UX ê°œì„ , ì„±ëŠ¥ ìµœì í™” |

#### SPEC íƒ€ì…ë³„ ì ‘ê·¼ë²•

- **API/ë°±ì—”ë“œ**: ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„, ë°ì´í„° ëª¨ë¸, ì¸ì¦
- **í”„ë¡ íŠ¸ì—”ë“œ**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤, ìƒíƒœ ê´€ë¦¬, ë¼ìš°íŒ…
- **ì¸í”„ë¼**: ë°°í¬, ëª¨ë‹ˆí„°ë§, ë³´ì•ˆ ì •ì±…
- **í’ˆì§ˆ**: í…ŒìŠ¤íŠ¸ ì „ëµ, ì„±ëŠ¥ ê¸°ì¤€, ë¬¸ì„œí™”

### 3. SPEC ì‘ì„± ê³„íš ë³´ê³ ì„œ ìƒì„±

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ê³„íšì„ ì œì‹œí•©ë‹ˆë‹¤:

```
## SPEC ì‘ì„± ê³„íš ë³´ê³ ì„œ: [TARGET]

### ğŸ“Š ë¶„ì„ ê²°ê³¼
- **ë°œêµ´ëœ SPEC í›„ë³´**: [ê°œìˆ˜ ë° ì¹´í…Œê³ ë¦¬]
- **ìš°ì„ ìˆœìœ„ ë†’ìŒ**: [í•µì‹¬ SPEC ëª©ë¡]
- **ì˜ˆìƒ ì‘ì—…ì‹œê°„**: [ì‹œê°„ ì‚°ì •]

### ğŸ¯ ì‘ì„± ì „ëµ
- **ì„ íƒëœ SPEC**: [ì‘ì„±í•  SPEC ID ë° ì œëª©]
- **EARS êµ¬ì¡°**: [Event-Action-Response-State ì„¤ê³„]
- **Acceptance Criteria**: [Given-When-Then ì‹œë‚˜ë¦¬ì˜¤]

### ğŸš¨ ì£¼ì˜ì‚¬í•­
- **ê¸°ìˆ ì  ì œì•½**: [ê³ ë ¤í•´ì•¼ í•  ì œì•½ì‚¬í•­]
- **ì˜ì¡´ì„±**: [ë‹¤ë¥¸ SPECê³¼ì˜ ì—°ê´€ì„±]
- **ë¸Œëœì¹˜ ì „ëµ**: [Personal/Team ëª¨ë“œë³„ ì²˜ë¦¬]

### âœ… ì˜ˆìƒ ì‚°ì¶œë¬¼
- **spec.md**: [EARS êµ¬ì¡°ì˜ í•µì‹¬ ëª…ì„¸]
- **plan.md**: [êµ¬í˜„ ê³„íšì„œ]
- **acceptance.md**: [ì¸ìˆ˜ ê¸°ì¤€]
- **ë¸Œëœì¹˜/PR**: [ëª¨ë“œë³„ Git ì‘ì—…]

---
**ìŠ¹ì¸ ìš”ì²­**: ìœ„ ê³„íšìœ¼ë¡œ SPEC ì‘ì„±ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
("ì§„í–‰", "ìˆ˜ì • [ë‚´ìš©]", "ì¤‘ë‹¨" ì¤‘ ì„ íƒ)
```

---

## ğŸš€ STEP 2 ì‹¤í–‰ ê°€ì´ë“œ: SPEC ì‘ì„± (ìŠ¹ì¸ í›„)

ì‚¬ìš©ìê°€ **"ì§„í–‰"** ë˜ëŠ” **"ì‹œì‘"**ì„ ì„ íƒí•œ ê²½ìš°ì—ë§Œ ë‹¤ìŒì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
# SPEC ë¬¸ì„œ ì‘ì„± ì‹œì‘
@agent-spec-builder "$ARGUMENTS SPEC ë¬¸ì„œ ì‘ì„± ì‹œì‘ (ì‚¬ìš©ì ìŠ¹ì¸ ì™„ë£Œ)"
```

### EARS ëª…ì„¸ ì‘ì„± ê°€ì´ë“œ

1. **Event**: ì‹œìŠ¤í…œì— ë°œìƒí•˜ëŠ” íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸ ì •ì˜
2. **Action**: ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‹œìŠ¤í…œì˜ í–‰ë™ ëª…ì„¸
3. **Response**: í–‰ë™ì˜ ê²°ê³¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ì‘ë‹µ ì •ì˜
4. **State**: ì‹œìŠ¤í…œ ìƒíƒœ ë³€í™” ë° ë¶€ì‘ìš© ëª…ì‹œ

### ğŸ“„ SPEC ë¬¸ì„œ í…œí”Œë¦¿

#### YAML Front Matter ìŠ¤í‚¤ë§ˆ

**spec.md íŒŒì¼ ìƒë‹¨ì— ë°˜ë“œì‹œ í¬í•¨**í•´ì•¼ í•˜ëŠ” ë©”íƒ€ë°ì´í„°:

> **ì°¸ì¡°**: `.moai/memory/spec-metadata.md` - í•„ìˆ˜/ì„ íƒ í•„ë“œ 16ê°œ ì •ì˜ ë¬¸ì„œ

```yaml
---
# í•„ìˆ˜ í•„ë“œ (7ê°œ)
id: AUTH-001                    # SPEC ê³ ìœ  ID (<ë„ë©”ì¸>-<3ìë¦¬>, ì˜êµ¬ ë¶ˆë³€)
version: 0.1.0                  # Semantic Version (v0.1.0 = INITIAL)
status: draft                   # draft|active|completed|deprecated
created: 2025-09-15            # ìƒì„±ì¼ (YYYY-MM-DD)
updated: 2025-10-01            # ìµœì¢… ìˆ˜ì •ì¼ (YYYY-MM-DD)
author: @Goos                   # ì‘ì„±ì (GitHub ID, ë‹¨ìˆ˜í˜•)
priority: high                  # low|medium|high|critical

# ì„ íƒ í•„ë“œ - ë¶„ë¥˜/ë©”íƒ€
category: security              # feature|bugfix|refactor|security|docs|perf
labels:                         # ë¶„ë¥˜ íƒœê·¸ (ê²€ìƒ‰ìš©)
  - authentication
  - jwt

# ì„ íƒ í•„ë“œ - ê´€ê³„ (ì˜ì¡´ì„± ê·¸ë˜í”„)
depends_on:                     # ì˜ì¡´í•˜ëŠ” SPEC (ì„ íƒ)
  - USER-001
blocks:                         # ì°¨ë‹¨í•˜ëŠ” SPEC (ì„ íƒ)
  - AUTH-002
related_specs:                  # ê´€ë ¨ SPEC (ì„ íƒ)
  - TOKEN-002
related_issue: "https://github.com/modu-ai/moai-adk/issues/123"

# ì„ íƒ í•„ë“œ - ë²”ìœ„ (ì˜í–¥ ë¶„ì„)
scope:
  packages:                     # ì˜í–¥ë°›ëŠ” íŒ¨í‚¤ì§€
    - src/core/auth
  files:                        # í•µì‹¬ íŒŒì¼ (ì„ íƒ)
    - auth-service.ts
    - jwt-manager.ts
---
```

**í•„ë“œ ì„¤ëª…**:
- **id**: TAG IDì™€ ë™ì¼ (`<ë„ë©”ì¸>-<3ìë¦¬>`) - ìƒì„± í›„ ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€
  - **ë””ë ‰í† ë¦¬ëª… ê·œì¹™**: `.moai/specs/SPEC-{ID}/` (ì˜ˆ: `SPEC-AUTH-001/`)
  - **ID ì¤‘ë³µ í™•ì¸**: `rg "@SPEC:{ID}" -n .moai/specs/` ë¡œ ê¸°ì¡´ TAG ê²€ìƒ‰ í•„ìˆ˜
  - **ë³µí•© ë„ë©”ì¸**: í•˜ì´í”ˆìœ¼ë¡œ ì—°ê²° ê°€ëŠ¥ (ì˜ˆ: `UPDATE-REFACTOR-001`)
- **version**: Semantic Version ì²´ê³„ (v0.1.0 = INITIAL, v0.2.0~ = êµ¬í˜„ ì™„ë£Œ, v1.0.0 = ì•ˆì •í™”)
- **status**: `draft` (ì‘ì„± ì¤‘) | `active` (êµ¬í˜„ ì§„í–‰) | `completed` (ì™„ë£Œ) | `deprecated` (ì‚¬ìš© ì¤‘ì§€)
- **created/updated**: YYYY-MM-DD í˜•ì‹
- **author**: ë‹¨ìˆ˜í˜•, GitHub ID ì•ì— @ ì ‘ë‘ì‚¬ í•„ìˆ˜ (ì˜ˆ: `@Goos`)
- **priority**: `critical` (ì¦‰ì‹œ) | `high` (ë†’ìŒ) | `medium` (ì¤‘ê°„) | `low` (ë‚®ìŒ)
- **category**: ë³€ê²½ ìœ í˜• (feature|bugfix|refactor|security|docs|perf)
- **labels**: ê²€ìƒ‰/í•„í„°ë§ìš© íƒœê·¸ ë°°ì—´
- **depends_on/blocks/related_specs**: SPEC ê°„ ì˜ì¡´ì„± ê·¸ë˜í”„
- **related_issue**: GitHub Issue ì „ì²´ URL
- **scope.packages/files**: ì˜í–¥ë°›ëŠ” íŒ¨í‚¤ì§€/íŒŒì¼ ëª©ë¡

**ìƒì„¸ ê·œì¹™**: `.moai/memory/spec-metadata.md` ì°¸ì¡°

#### HISTORY ì„¹ì…˜ (í•„ìˆ˜)

**YAML Front Matter ì§í›„**ì— ë°˜ë“œì‹œ HISTORY ì„¹ì…˜ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

```markdown
# @SPEC:AUTH-001: JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ

## HISTORY

### v0.1.0 (2025-09-15)
- **INITIAL**: JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ ëª…ì„¸ ìµœì´ˆ ì‘ì„±
- **AUTHOR**: @Goos
- **SCOPE**: í† í° ë°œê¸‰, ê²€ì¦, ê°±ì‹  ë¡œì§
- **CONTEXT**: ì‚¬ìš©ì ì¸ì¦ ê°•í™” ìš”êµ¬ì‚¬í•­ ë°˜ì˜

### v0.2.0 (2025-09-20)
- **ADDED**: ì†Œì…œ ë¡œê·¸ì¸ ìš”êµ¬ì‚¬í•­ ì¶”ê°€
- **AUTHOR**: @Goos
- **REVIEW**: @security-team (ìŠ¹ì¸)
- **CHANGES**:
  - OAuth2 í†µí•© ìš”êµ¬ì‚¬í•­
  - Google/GitHub ë¡œê·¸ì¸ ì§€ì›

### v0.3.0 (2025-10-01)
- **CHANGED**: í† í° ë§Œë£Œ ì‹œê°„ 15ë¶„ â†’ 30ë¶„ìœ¼ë¡œ ë³€ê²½
- **ADDED**: ë¦¬í”„ë ˆì‹œ í† í° ìë™ ê°±ì‹  ìš”êµ¬ì‚¬í•­ ì¶”ê°€
- **AUTHOR**: @Goos
- **REVIEW**: @security-team (ìŠ¹ì¸)
```

**HISTORY ì‘ì„± ê·œì¹™**:
- **ë²„ì „ ì²´ê³„**: `v0.1.0` = INITIAL (ëª¨ë“  SPEC ì‹œì‘ ë²„ì „), `v0.2.0~v0.9.0` = êµ¬í˜„ ì™„ë£Œ/ê¸°ëŠ¥ ì¶”ê°€, `v1.0.0` = ì •ì‹ ì•ˆì •í™”
- **ë²„ì „ ìˆœì„œ**: ìµœì‹  ë²„ì „ì´ ìœ„ë¡œ (ì—­ìˆœ)
- **ë³€ê²½ íƒ€ì…** (ëŒ€ë¬¸ì):
  - `INITIAL` - ìµœì´ˆ ì‘ì„± (í•­ìƒ v0.1.0)
  - `ADDED` - ìƒˆ ìš”êµ¬ì‚¬í•­ ì¶”ê°€
  - `CHANGED` - ê¸°ì¡´ ìš”êµ¬ì‚¬í•­ ìˆ˜ì •
  - `BREAKING` - í•˜ìœ„ í˜¸í™˜ì„± ê¹¨ëŠ” ë³€ê²½ (Major ë²„ì „ ì¦ê°€)
  - `DEPRECATED` - íê¸° ì˜ˆì • í‘œì‹œ
  - `REMOVED` - ìš”êµ¬ì‚¬í•­ ì œê±°
  - `FIXED` - ëª…ì„¸ ì˜¤ë¥˜ ìˆ˜ì • (Patch ë²„ì „ ì¦ê°€)
- **í•„ìˆ˜ í•­ëª©**: ë²„ì „, ë‚ ì§œ, AUTHOR, ë³€ê²½ ë‚´ìš©
- **ì„ íƒ í•­ëª©**: REVIEW (ê²€í† ì), SCOPE (ë²”ìœ„), CONTEXT (ë°°ê²½), MIGRATION (ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ)

#### SPEC ë¬¸ì„œ ì „ì²´ êµ¬ì¡°

```markdown
---
id: AUTH-001
version: 1.0.0
status: draft
created: 2025-09-15
updated: 2025-09-15
author: @username
---

# @SPEC:AUTH-001: [SPEC ì œëª©]

## HISTORY
[ë²„ì „ë³„ ë³€ê²½ ì´ë ¥ - ìœ„ ì˜ˆì‹œ ì°¸ì¡°]

## Environment (í™˜ê²½)
[ì‹œìŠ¤í…œ í™˜ê²½ ë° ì „ì œ ì¡°ê±´]

## Assumptions (ê°€ì •)
[ì„¤ê³„ ê°€ì • ì‚¬í•­]

## Requirements (ìš”êµ¬ì‚¬í•­)
### Ubiquitous (í•„ìˆ˜ ê¸°ëŠ¥)
- ì‹œìŠ¤í…œì€ [ê¸°ëŠ¥]ì„ ì œê³µí•´ì•¼ í•œë‹¤

### Event-driven (ì´ë²¤íŠ¸ ê¸°ë°˜)
- WHEN [ì¡°ê±´]ì´ë©´, ì‹œìŠ¤í…œì€ [ë™ì‘]í•´ì•¼ í•œë‹¤

### State-driven (ìƒíƒœ ê¸°ë°˜)
- WHILE [ìƒíƒœ]ì¼ ë•Œ, ì‹œìŠ¤í…œì€ [ë™ì‘]í•´ì•¼ í•œë‹¤

### Optional (ì„ íƒ ê¸°ëŠ¥)
- WHERE [ì¡°ê±´]ì´ë©´, ì‹œìŠ¤í…œì€ [ë™ì‘]í•  ìˆ˜ ìˆë‹¤

### Constraints (ì œì•½ì‚¬í•­)
- IF [ì¡°ê±´]ì´ë©´, ì‹œìŠ¤í…œì€ [ì œì•½]í•´ì•¼ í•œë‹¤

## Traceability (@TAG)
- **SPEC**: @SPEC:AUTH-001
- **TEST**: tests/auth/test_service.py
- **CODE**: src/auth/service.py
- **DOC**: docs/api/authentication.md
```

### ì—ì´ì „íŠ¸ í˜‘ì—… êµ¬ì¡°

- **1ë‹¨ê³„**: `spec-builder` ì—ì´ì „íŠ¸ê°€ í”„ë¡œì íŠ¸ ë¬¸ì„œ ë¶„ì„ ë° SPEC ë¬¸ì„œ ì‘ì„±ì„ ì „ë‹´í•©ë‹ˆë‹¤.
- **2ë‹¨ê³„**: `git-manager` ì—ì´ì „íŠ¸ê°€ ë¸Œëœì¹˜ ìƒì„±, GitHub Issue/PR ìƒì„±ì„ ì „ë‹´í•©ë‹ˆë‹¤.
- **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: spec-builderëŠ” SPEC ì‘ì„±ë§Œ, git-managerëŠ” Git/GitHub ì‘ì—…ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- **ìˆœì°¨ ì‹¤í–‰**: spec-builder â†’ git-manager ìˆœì„œë¡œ ì‹¤í–‰í•˜ì—¬ ëª…í™•í•œ ì˜ì¡´ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
- **ì—ì´ì „íŠ¸ ê°„ í˜¸ì¶œ ê¸ˆì§€**: ê° ì—ì´ì „íŠ¸ëŠ” ë‹¤ë¥¸ ì—ì´ì „íŠ¸ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šê³ , ì»¤ë§¨ë“œ ë ˆë²¨ì—ì„œë§Œ ìˆœì°¨ ì‹¤í–‰í•©ë‹ˆë‹¤.

## ğŸš€ ìµœì í™”ëœ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ìˆœì„œ

### Phase 1: ë³‘ë ¬ í”„ë¡œì íŠ¸ ë¶„ì„ (ì„±ëŠ¥ ìµœì í™”)

**ë™ì‹œì— ìˆ˜í–‰**:

```
Task 1 (haiku): í”„ë¡œì íŠ¸ êµ¬ì¡° ìŠ¤ìº”
â”œâ”€â”€ ì–¸ì–´/í”„ë ˆì„ì›Œí¬ ê°ì§€
â”œâ”€â”€ ê¸°ì¡´ SPEC ëª©ë¡ ìˆ˜ì§‘
â””â”€â”€ ìš°ì„ ìˆœìœ„ ë°±ë¡œê·¸ ì´ˆì•ˆ

Task 2 (sonnet): ì‹¬í™” ë¬¸ì„œ ë¶„ì„
â”œâ”€â”€ product.md ìš”êµ¬ì‚¬í•­ ì¶”ì¶œ
â”œâ”€â”€ structure.md ì•„í‚¤í…ì²˜ ë¶„ì„
â””â”€â”€ tech.md ê¸°ìˆ ì  ì œì•½ì‚¬í•­
```

**ì„±ëŠ¥ í–¥ìƒ**: ê¸°ë³¸ ìŠ¤ìº”ê³¼ ì‹¬í™” ë¶„ì„ì„ ë³‘ë ¬ ì²˜ë¦¬í•˜ì—¬ ëŒ€ê¸° ì‹œê°„ ìµœì†Œí™”

### Phase 2: SPEC ë¬¸ì„œ í†µí•© ì‘ì„±

`spec-builder` ì—ì´ì „íŠ¸(sonnet)ê°€ ë³‘ë ¬ ë¶„ì„ ê²°ê³¼ë¥¼ í†µí•©í•˜ì—¬:

- í”„ë¡œì íŠ¸ ë¬¸ì„œ ê¸°ë°˜ ê¸°ëŠ¥ í›„ë³´ ì œì•ˆ
- ì‚¬ìš©ì ìŠ¹ì¸ í›„ SPEC ë¬¸ì„œ ì‘ì„± (MultiEdit í™œìš©)
- 3ê°œ íŒŒì¼ ë™ì‹œ ìƒì„± (spec.md, plan.md, acceptance.md)

### Phase 3: Git ì‘ì—… ì²˜ë¦¬

`git-manager` ì—ì´ì „íŠ¸(haiku)ê°€ ìµœì¢… ì²˜ë¦¬:

- **ë¸Œëœì¹˜ ìƒì„±**: ëª¨ë“œë³„ ì „ëµ ì ìš©
  - **Personal ëª¨ë“œ**: `main` ë˜ëŠ” `develop`ì—ì„œ ë¶„ê¸° (í”„ë¡œì íŠ¸ ì„¤ì • ê¸°ì¤€)
  - **Team ëª¨ë“œ**: **í•­ìƒ `develop`ì—ì„œ ë¶„ê¸°** (GitFlow í‘œì¤€)
  - ë¸Œëœì¹˜ëª…: `feature/SPEC-{ID}` í˜•ì‹
- **GitHub Issue ìƒì„±**: Team ëª¨ë“œì—ì„œ SPEC Issue ìƒì„±
- **Draft PR ìƒì„±**: Team ëª¨ë“œì—ì„œ `feature/SPEC-{ID}` â†’ `develop` PR ìƒì„±
- **ì´ˆê¸° ì»¤ë°‹**: SPEC ë¬¸ì„œ ì»¤ë°‹ ë° íƒœê·¸ ìƒì„±

**ì¤‘ìš”**: ê° ì—ì´ì „íŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ì—ì´ì „íŠ¸ ê°„ ì§ì ‘ í˜¸ì¶œì€ ê¸ˆì§€ë©ë‹ˆë‹¤.

## ì—ì´ì „íŠ¸ ì—­í•  ë¶„ë¦¬

### spec-builder ì „ë‹´ ì˜ì—­

- í”„ë¡œì íŠ¸ ë¬¸ì„œ ë¶„ì„ ë° SPEC í›„ë³´ ë°œêµ´
- EARS êµ¬ì¡°ì˜ ëª…ì„¸ì„œ ì‘ì„±
- Acceptance Criteria ì‘ì„± (Given-When-Then)
- SPEC ë¬¸ì„œ í’ˆì§ˆ ê²€ì¦
- @TAG ì‹œìŠ¤í…œ ì ìš©

### git-manager ì „ë‹´ ì˜ì—­

- ëª¨ë“  Git ë¸Œëœì¹˜ ìƒì„± ë° ê´€ë¦¬
- **ëª¨ë“œë³„ ë¸Œëœì¹˜ ì „ëµ ì ìš©**
  - Personal: `main` ë˜ëŠ” `develop`ì—ì„œ ë¶„ê¸°
  - Team: **í•­ìƒ `develop`ì—ì„œ ë¶„ê¸°** (GitFlow)
- GitHub Issue/PR ìƒì„±
  - Team ëª¨ë“œ: Draft PR ìƒì„± (`feature/SPEC-{ID}` â†’ `develop`)
- ì´ˆê¸° ì»¤ë°‹ ë° íƒœê·¸ ìƒì„±
- ì›ê²© ë™ê¸°í™” ì²˜ë¦¬

## 2ë‹¨ê³„ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ìˆœì„œ

### Phase 1: ë¶„ì„ ë° ê³„íš ë‹¨ê³„

**SPEC ë¶„ì„ê¸°**ê°€ ë‹¤ìŒì„ ìˆ˜í–‰:

1. **í”„ë¡œì íŠ¸ ë¬¸ì„œ ë¡œë”©**: product/structure/tech.md ì‹¬ì¸µ ë¶„ì„
2. **SPEC í›„ë³´ ë°œêµ´**: ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ê²°ì •
3. **êµ¬í˜„ ì „ëµ ìˆ˜ë¦½**: EARS êµ¬ì¡° ë° Acceptance ì„¤ê³„
4. **ì‘ì„± ê³„íš ìƒì„±**: ë‹¨ê³„ë³„ SPEC ì‘ì„± ì ‘ê·¼ ë°©ì‹ ì œì‹œ
5. **ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸°**: ê³„íš ê²€í†  ë° í”¼ë“œë°± ìˆ˜ì§‘

### Phase 2: SPEC ì‘ì„± ë‹¨ê³„ (ìŠ¹ì¸ í›„)

`spec-builder` ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©ì ìŠ¹ì¸ í›„ **ì—°ì†ì ìœ¼ë¡œ** ìˆ˜í–‰:

1. **EARS ëª…ì„¸ ì‘ì„±**: Event-Action-Response-State êµ¬ì¡°í™”
2. **Acceptance Criteria**: Given-When-Then ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±
3. **ë¬¸ì„œ í’ˆì§ˆ ê²€ì¦**: TRUST ì›ì¹™ ë° @TAG ì ìš©
4. **í…œí”Œë¦¿ ìƒì„±**: spec.md, plan.md, acceptance.md ë™ì‹œ ìƒì„±

### Phase 3: Git ì‘ì—… (git-manager)

`git-manager` ì—ì´ì „íŠ¸ê°€ SPEC ì™„ë£Œ í›„ **í•œ ë²ˆì—** ìˆ˜í–‰:

1. **ë¸Œëœì¹˜ ìƒì„±**: ëª¨ë“œë³„ ë¸Œëœì¹˜ ì „ëµ ì ìš©
2. **GitHub Issue**: Team ëª¨ë“œì—ì„œ SPEC Issue ìƒì„±
3. **ì´ˆê¸° ì»¤ë°‹**: SPEC ë¬¸ì„œ ì»¤ë°‹ ë° íƒœê·¸ ìƒì„±
4. **ì›ê²© ë™ê¸°í™”**: ëª¨ë“œë³„ ë™ê¸°í™” ì „ëµ ì ìš©

## ì‘ì„± íŒ

- product/structure/tech ë¬¸ì„œì— ì—†ëŠ” ì •ë³´ëŠ” ìƒˆë¡œ ì§ˆë¬¸í•´ ë³´ì™„í•©ë‹ˆë‹¤.
- Acceptance CriteriaëŠ” Given/When/Then 3ë‹¨ìœ¼ë¡œ ìµœì†Œ 2ê°œ ì´ìƒ ì‘ì„±í•˜ë„ë¡ ìœ ë„í•©ë‹ˆë‹¤.
- TRUST ì›ì¹™ ì¤‘ Readable(ì½ê¸° ì‰¬ì›€) ê¸°ì¤€ ì™„í™”ë¡œ ì¸í•´ ëª¨ë“ˆ ìˆ˜ê°€ ê¶Œì¥ì¹˜(ê¸°ë³¸ 5)ë¥¼ ì´ˆê³¼í•˜ëŠ” ê²½ìš°, ê·¼ê±°ë¥¼ SPEC `context` ì„¹ì…˜ì— í•¨ê»˜ ê¸°ë¡í•˜ì„¸ìš”.

## âš ï¸ ë””ë ‰í† ë¦¬ ìƒì„± ì£¼ì˜ì‚¬í•­

**í•„ìˆ˜ ê·œì¹™**:
1. **ë””ë ‰í† ë¦¬ëª… í˜•ì‹**: `.moai/specs/SPEC-{ID}/` (ì˜ˆ: `SPEC-AUTH-001/`, `SPEC-UPDATE-REFACTOR-001/`)
   - âŒ ì˜ëª»ëœ ì˜ˆ: `AUTH-001/`, `SPEC-001-auth-system/`, `SPEC-AUTH-001-jwt/`
   - âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: `SPEC-AUTH-001/`, `SPEC-REFACTOR-001/`, `SPEC-UPDATE-REFACTOR-001/`

2. **ID ì¤‘ë³µ í™•ì¸**: SPEC ìƒì„± ì „ ë°˜ë“œì‹œ ì‹¤í–‰
   ```bash
   rg "@SPEC:{ID}" -n .moai/specs/  # ê¸°ì¡´ TAG ID ê²€ìƒ‰
   ```

3. **ë³µí•© ë„ë©”ì¸**: í•˜ì´í”ˆìœ¼ë¡œ ì—°ê²° ê°€ëŠ¥í•˜ë‚˜ 3ê°œ ì´ìƒ ì—°ê²° ì‹œ ê²½ê³  ê¶Œì¥
   - âœ… í—ˆìš©: `UPDATE-REFACTOR-001` (2ê°œ ë„ë©”ì¸)
   - âš ï¸ ì£¼ì˜: `UPDATE-REFACTOR-FIX-001` (3ê°œ ë„ë©”ì¸, ë‹¨ìˆœí™” ê¶Œì¥)

---

## ğŸ§  Context Management (ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬)

> ë³¸ ì»¤ë§¨ë“œëŠ” **ì»¨í…ìŠ¤íŠ¸ ì—”ì§€ë‹ˆì–´ë§** ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤.
> **ì»¨í…ìŠ¤íŠ¸ ì˜ˆì‚°/í† í° ì˜ˆì‚°ì€ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤**.

### JIT Retrieval (í•„ìš” ì‹œ ë¡œë”©)

**ìš°ì„  ë¡œë“œ** (SPEC ì‘ì„± ì‹œì‘ ì‹œ):
- `.moai/project/product.md` - ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ ë° ì‚¬ìš©ì ìŠ¤í† ë¦¬

**í•„ìš” ì‹œ ë¡œë“œ** (SPEC í›„ë³´ ë°œêµ´ ì‹œ):
- `.moai/project/structure.md` - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ëª¨ë“ˆ ì„¤ê³„
- `.moai/project/tech.md` - ê¸°ìˆ  ìŠ¤íƒ ë° í’ˆì§ˆ ê²Œì´íŠ¸

**ì§€ì—° ë¡œë“œ** (ê¸°ì¡´ SPEC í™•ì¸ í•„ìš” ì‹œ):
- `.moai/specs/` - ê¸°ì¡´ SPEC ëª©ë¡ ë° ì˜ì¡´ì„± ë¶„ì„

### Compaction ê¶Œì¥ ì‹œì 

**íŠ¸ë¦¬ê±° ì¡°ê±´**:
- SPEC ì‘ì„± ì™„ë£Œ í›„ ë‹¤ìŒ ë‹¨ê³„(2-build) ì§„í–‰ ì „
- í† í° ì‚¬ìš©ëŸ‰ > 70% (140,000 / 200,000)

**ê¶Œì¥ ë©”ì‹œì§€**:
```markdown
**ê¶Œì¥ì‚¬í•­**: SPEC ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¨ê³„(`/alfred:2-build`) ì§„í–‰ ì „ `/clear` ë˜ëŠ” `/new` ëª…ë ¹ìœ¼ë¡œ ìƒˆë¡œìš´ ëŒ€í™” ì„¸ì…˜ì„ ì‹œì‘í•˜ë©´ ë” ë‚˜ì€ ì„±ëŠ¥ê³¼ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

---

## ë‹¤ìŒ ë‹¨ê³„

**ê¶Œì¥ì‚¬í•­**: ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ì „ `/clear` ë˜ëŠ” `/new` ëª…ë ¹ìœ¼ë¡œ ìƒˆë¡œìš´ ëŒ€í™” ì„¸ì…˜ì„ ì‹œì‘í•˜ë©´ ë” ë‚˜ì€ ì„±ëŠ¥ê³¼ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `/alfred:2-build SPEC-XXX`ë¡œ TDD êµ¬í˜„ ì‹œì‘
- íŒ€ ëª¨ë“œ: Issue ìƒì„± í›„ git-manager ì—ì´ì „íŠ¸ê°€ ìë™ìœ¼ë¡œ ë¸Œëœì¹˜ ìƒì„±
