# Skill: moai-baas-foundation

## ë©”íƒ€ë°ì´í„°

```yaml
skill_id: moai-baas-foundation
skill_name: BaaS í”Œë«í¼ ê¸°ì´ˆ ë° ì˜ì‚¬ê²°ì •
version: 1.0.0
created_date: 2025-11-09
language: korean
triggers:
  - keywords: ["BaaS", "backend-as-a-service", "í”Œë«í¼ ì„ íƒ", "ì•„í‚¤í…ì²˜"]
  - contexts: ["/alfred:1-plan", "platform-selection", "architecture-decision"]
agents:
  - spec-builder
  - backend-expert
  - database-expert
  - devops-expert
  - security-expert
  - frontend-expert
freedom_level: high
word_count: 800
spec_reference: "@SPEC:BAAS-ECOSYSTEM-001"
```

---

## ğŸ“š ë‚´ìš©

### 1. BaaS (Backend-as-a-Service) ê°œë… (100 words)

**Backend-as-a-Service**ëŠ” ì„œë²„ ì¸í”„ë¼ ê´€ë¦¬ ì—†ì´ ë°±ì—”ë“œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•**:
- ì¸í”„ë¼ ê´€ë¦¬ ë¶ˆí•„ìš” (ì„œë²„ë¦¬ìŠ¤)
- ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥ (Auth, DB, Storage)
- ìë™ ìŠ¤ì¼€ì¼ë§
- ì¢…ëŸ‰ì œ ê³¼ê¸ˆ

**MoAI-ADKì—ì„œ ì§€ì›í•˜ëŠ” 5ê°œ í”Œë«í¼**:

| í”Œë«í¼ | ê°•ì  | ì•½ì  | ë¹„ìš© |
|-------|------|------|------|
| **Supabase** | PostgreSQL + Auth + RLS | ë‹¨ì¼ ê¸°ìˆ  ìŠ¤íƒ | ì € |
| **Vercel** | Edge Functions + ë°°í¬ | ëª¨ë‹ˆí„°ë§ ì œí•œ | ì¤‘ |
| **Neon** | DB branching + ìë™ìŠ¤ì¼€ì¼ | ë…ë¦½ì  DBë§Œ | ì¤‘ |
| **Clerk** | MFA + SSO + ë³´ì•ˆ | Authë§Œ ì œê³µ | ê³  |
| **Railway** | Full-stack í†µí•© | ì»¤ìŠ¤í„°ë§ˆì´ì§• ì œí•œ | ì € |

---

### 2. 4ê°€ì§€ ì•„í‚¤í…ì²˜ íŒ¨í„´ (400 words)

#### **Pattern A: Full Supabase (Supabase + Vercel)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client (Next.js/React)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vercel (Edge)  â”‚  â”‚ Supabase     â”‚
â”‚ - Deployment   â”‚  â”‚ - PostgreSQL â”‚
â”‚ - Edge Funcs   â”‚  â”‚ - Auth       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Storage    â”‚
                    â”‚ - Realtime   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëŒ€ìƒ**: MVP, ì‘ì€ íŒ€ (< 5ëª…), ë¹ ë¥¸ ê°œë°œ

**ì¥ì **:
- âœ… ìµœê³ ì˜ í†µí•©ì„± (PostgreSQL, Auth, Storage í•œ ê³³)
- âœ… ë¹ ë¥¸ ê°œë°œ ì†ë„ (ì„ ì–¸ì  API)
- âœ… RLSë¡œ ê°•ë ¥í•œ ë³´ì•ˆ
- âœ… ì €ë¹„ìš© ($0-100/ì›”)

**ë‹¨ì **:
- âŒ PostgreSQLì— ì¢…ì†ì 
- âŒ ê³ ê¸‰ ì¸ì¦ ê¸°ëŠ¥ ì œí•œ (MFAëŠ” ì œí•œì )
- âŒ ìŠ¤ì¼€ì¼ë§ ì‹œ ë¹„ìš© ê¸‰ì¦

**ì‚¬ìš© ì‹œê¸°**:
```
if (project_stage == "MVP") && (team_size <= 5) && (budget == "low"):
    return "Pattern A"
```

---

#### **Pattern B: Best-of-breed (Neon + Clerk + Vercel)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client (Next.js/React)                   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚                  â”‚              â”‚
    â–¼                  â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vercel  â”‚    â”‚ Clerk (Auth) â”‚  â”‚ Neon   â”‚
â”‚ Deploy  â”‚    â”‚ - OAuth/SSO  â”‚  â”‚ - DB   â”‚
â”‚ Edge    â”‚    â”‚ - MFA        â”‚  â”‚ - Pool â”‚
â”‚ Funcs   â”‚    â”‚ - Webhooks   â”‚  â”‚ - Branch
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëŒ€ìƒ**: Production ì‹œìŠ¤í…œ, í° íŒ€ (5-50ëª…), ì—”í„°í”„ë¼ì´ì¦ˆ

**ì¥ì **:
- âœ… ê° ë¶„ì•¼ ìµœê³ ì˜ ë„êµ¬ ì„ íƒ
- âœ… Clerkì˜ ê³ ê¸‰ ì¸ì¦ (MFA, SSO, Passwordless)
- âœ… Neonì˜ DB branching (ê°œë°œ/ìŠ¤í…Œì´ì§• ê²©ë¦¬)
- âœ… ë†’ì€ í™•ì¥ì„±

**ë‹¨ì **:
- âŒ í†µí•© ë³µì¡ë„ (3ê°œ í”Œë«í¼ ì—°ë™)
- âŒ ì¤‘ê°„~ë†’ì€ ë¹„ìš© ($100-500/ì›”)
- âŒ í•™ìŠµ ê³¡ì„  ì¦ê°€

**ì‚¬ìš© ì‹œê¸°**:
```
if (project_stage == "Production") && (team_size >= 5) && (requires_mfa):
    return "Pattern B"
```

---

#### **Pattern C: Railway All-in-one (Railway)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client (Next.js/React)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Railway         â”‚
    â”‚ - PostgreSQL    â”‚
    â”‚ - App Deploy    â”‚
    â”‚ - Environment   â”‚
    â”‚ - Monitoring    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëŒ€ìƒ**: Solo ê°œë°œì, ì €ì˜ˆì‚° ìŠ¤íƒ€íŠ¸ì—…, Monolith ì•„í‚¤í…ì²˜

**ì¥ì **:
- âœ… ìµœê³ ë¡œ ë‹¨ìˆœí•¨ (í•œ ëŒ€ì‹œë³´ë“œì—ì„œ ëª¨ë“  ê´€ë¦¬)
- âœ… ìµœì € ë¹„ìš© ($5-50/ì›”)
- âœ… ë¹ ë¥¸ ë°°í¬ (Git push)
- âœ… ëª¨ë‹ˆí„°ë§ ë‚´ì¥

**ë‹¨ì **:
- âŒ ê³ ê¸‰ ì¸ì¦ ë¯¸ì§€ì› (ê¸°ë³¸ sessionë§Œ)
- âŒ DB branching ì—†ìŒ
- âŒ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ í™•ì¥ ì–´ë ¤ì›€

**ì‚¬ìš© ì‹œê¸°**:
```
if (team_size == 1) && (budget == "very_low"):
    return "Pattern C"
```

---

#### **Pattern D: Hybrid (Supabase + Clerk + Railway + Vercel)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client (Next.js/React)                       â”‚
â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
  â”‚                â”‚              â”‚        â”‚
  â–¼                â–¼              â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚Vercel  â”‚  â”‚Supabase RLSâ”‚  â”‚ Clerk    â”‚ â”‚Rail â”‚
â”‚Deploy  â”‚  â”‚+ Realtime  â”‚  â”‚ Auth     â”‚ â”‚way  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
```

**ëŒ€ìƒ**: ë³µì¡í•œ ìš”êµ¬ì‚¬í•­, ìµœê³ ì˜ ìœ ì—°ì„± í•„ìš”

**ì¥ì **:
- âœ… ìµœê³ ì˜ ìœ ì—°ì„± (ê° ë¶€ë¶„ ìµœì í™”)
- âœ… ë†’ì€ ë³´ì•ˆ (Clerk MFA + Supabase RLS)
- âœ… ì‹¤ì‹œê°„ ê¸°ëŠ¥ (Supabase Realtime)

**ë‹¨ì **:
- âŒ ìµœê³ ì˜ ë³µì¡ë„ (4ê°œ í”Œë«í¼ ì—°ë™)
- âŒ ë†’ì€ ë¹„ìš© ($200-1000+/ì›”)
- âŒ ìš´ì˜ ì˜¤ë²„í—¤ë“œ ì¦ê°€

**ì‚¬ìš© ì‹œê¸°**:
```
if (complexity == "high") && (requires_all_features):
    return "Pattern D"
```

---

### 3. ì˜ì‚¬ê²°ì • í–‰ë ¬ (200 words)

**ì„ íƒ ê¸°ì¤€**:

```
Step 1: í”„ë¡œì íŠ¸ ë‹¨ê³„?
â”œâ”€ MVP â†’ Step 2
â”œâ”€ Growth â†’ Step 3
â””â”€ Scale â†’ Step 4

Step 2: íŒ€ ê·œëª¨?
â”œâ”€ Solo (1ëª…) â†’ Pattern C
â”œâ”€ Small (2-4ëª…) â†’ Pattern A
â””â”€ Medium (5-10ëª…) â†’ Pattern B

Step 3: ê³ ê¸‰ ì¸ì¦ í•„ìš”?
â”œâ”€ Yes (MFA/SSO) â†’ Pattern B
â”œâ”€ No â†’ Pattern A
â””â”€ Maybe â†’ Pattern D

Step 4: ë†’ì€ ë³´ì•ˆ í•„ìˆ˜?
â”œâ”€ Yes â†’ Pattern B or D
â”œâ”€ No â†’ Pattern A or C
â””â”€ Maximum â†’ Pattern D
```

**ìš°ì„ ìˆœìœ„**:
1. íŒ€ ê·œëª¨ (ê°€ì¥ ì¤‘ìš”)
2. ì˜ˆì‚° ì œì•½
3. ì¸ì¦ ë³µì¡ë„
4. ì‹¤ì‹œê°„ ìš”êµ¬ì‚¬í•­

---

### 4. Common Pain Pointsì™€ í•´ê²°ì±… (100 words)

**Pain Point 1: RLS (Row Level Security) ë””ë²„ê¹…**
- ë¬¸ì œ: PostgreSQL 500 ì—ëŸ¬ (ì •ë³´ ë¶€ì¡±)
- í•´ê²°: Supabase ëŒ€ì‹œë³´ë“œ â†’ Logs í™•ì¸, pgTAP í…ŒìŠ¤íŠ¸

**Pain Point 2: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì•ˆì „ì„±**
- ë¬¸ì œ: í”„ë¡œë•ì…˜ì—ì„œ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ìœ„í—˜
- í•´ê²°: Neon DB branchingìœ¼ë¡œ ê°œë°œ/í”„ë¡œë•ì…˜ ê²©ë¦¬

**Pain Point 3: ì¸ì¦ í†µí•© ë³µì¡ë„**
- ë¬¸ì œ: Supabase Authê°€ ë¶€ì¡±í•˜ë©´ Clerk í•„ìš”
- í•´ê²°: Pattern B (Best-of-breed) ì„ íƒ

**Pain Point 4: ì„±ëŠ¥ ìµœì í™”**
- ë¬¸ì œ: Vercel Edge vs. Serverless í˜¼ë™
- í•´ê²°: ì—£ì§€ëŠ” ì •ì  ì½˜í…ì¸ , ServerlessëŠ” DB ì¿¼ë¦¬

---

## ğŸ¯ ì‚¬ìš© ë°©ë²•

### Agentì—ì„œ í˜¸ì¶œ ë°©ë²•

```python
# backend-expert, spec-builder ë“±ì—ì„œ
Skill("moai-baas-foundation")

# ê²°ê³¼:
# - 4ê°€ì§€ íŒ¨í„´ ëª…í™•íˆ ì´í•´
# - ì˜ì‚¬ê²°ì • ê¸°ì¤€ ì œì‹œ
# - ì•„í‚¤í…ì²˜ ì¶”ì²œ ê·¼ê±° ë§ˆë ¨
```

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

**Scenario 1**: `/alfred:1-plan` ì‹¤í–‰ ì‹œ
```
User: /alfred:1-plan "Add backend"
â†“
spec-builder: moai-baas-foundation ë¡œë“œ
â†“
Platform ê°ì§€ í›„ 4ê°€ì§€ íŒ¨í„´ ì œì‹œ
â†“
User: Pattern A ì„ íƒ
```

**Scenario 2**: ì•„í‚¤í…ì²˜ ë¦¬ë·° í•„ìš”í•  ë•Œ
```
User: "í˜„ì¬ êµ¬ì¡°ê°€ ìµœì ì¸ê°€?"
â†“
backend-expert: moai-baas-foundation ë¡œë“œ
â†“
í˜„ì¬ êµ¬ì¡° ë¶„ì„ í›„ Pattern B ì œì•ˆ
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [SPEC-BAAS-ECOSYSTEM-001](../../specs/SPEC-BAAS-ECOSYSTEM-001/spec.md)
- [4ê°€ì§€ íŒ¨í„´ ìƒì„¸ ë¹„êµ](../../specs/SPEC-BAAS-ECOSYSTEM-001/acceptance.md)
- moai-baas-supabase-ext (RLS, Migrations)
- moai-baas-vercel-ext (Edge Functions, Deployment)

---

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] 5ê°œ í”Œë«í¼ ê°œìš”
- [x] 4ê°€ì§€ íŒ¨í„´ ì„¤ëª…
- [x] ì˜ì‚¬ê²°ì • í–‰ë ¬
- [x] Pain points í•´ê²°ì±…
- [x] 800 ë‹¨ì–´ ëª©í‘œ
