# `moai-adk` CLI 명령어

`src/moai_adk/__main__.py`는 Click 기반 CLI 엔트리포인트로, 다음 다섯 가지 서브 명령을 제공합니다. CLI는 Alfred 명령과 별개로 로컬 프로젝트 관리와 템플릿 동기화에 초점을 둡니다.

## 명령어 요약

| 명령어 | 설명 | 활용 시점 |
| ------ | ---- | -------- |
| `moai-adk init [경로]` | 새 프로젝트 생성 또는 기존 프로젝트에 MoAI-ADK 템플릿 주입 | Alfred를 처음 도입할 때 |
| `moai-adk doctor` | 환경 점검 (Python, uv, Git, 디렉터리 구조) | 설치 직후, 문제 발생 시 |
| `moai-adk status` | SPEC/TEST/CODE/DOC 태그 요약, 체크포인트, 템플릿 버전 조회 | 작업 전 상태 파악, 리뷰 전 확인 |
| `moai-adk backup` | `.moai/`, `.claude/`, CLAUDE.md 백업 생성 | 템플릿 업데이트 전, 대규모 변경 전 |
| `moai-adk update` | 패키지 & 템플릿 동기화 (가장 중요한 명령) | 새 버전 릴리스 이후, 정기 점검 |

## 실행 예시

```bash
# 현재 상태 점검
moai-adk status

# 템플릿 동기화 (백업 자동 생성)
moai-adk update

# 백업 파일은 .moai-backups/에 저장됩니다.
```

## 내부 동작

- CLI 실행 시 `pyfiglet` 로고와 버전 정보를 출력하여 환경을 빠르게 확인할 수 있습니다.
- 각 명령 구현은 `src/moai_adk/cli/commands/`에 있으며, Rich 콘솔로 컬러 출력이 구성되어 있습니다.
- 실패 시에도 에러 코드와 메시지를 명확히 출력하도록 예외 처리가 되어 있어, Alfred의 `/alfred:2-run`에서 Bash 도구로 호출해도 안전합니다.

## 릴리스 연동

`moai_adk/cli/commands/update.py`는 템플릿 버전을 비교해 Stage 1~3 업데이트를 수행하며, GitHub Actions 중 `moai-release-pipeline.yml`이 릴리스 감지 시 동일한 로직을 사용합니다. 프로젝트별로 템플릿을 수정했다면 릴리스 전에 `moai-adk update`를 반드시 실행해 충돌을 조정하세요.
