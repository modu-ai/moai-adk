# 문제 해결 가이드

MoAI-ADK 사용 중 발생할 수 있는 일반적인 문제와 해결 방법을 안내합니다.

## 설치 문제

### uv 설치 실패

**문제**: `uv` 패키지 매니저 설치가 실패하는 경우

**해결 방법**:
```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### 패키지 의존성 충돌

**문제**: 다른 패키지와의 의존성 충돌

**해결 방법**:
```bash
# 가상 환경을 새로 생성
uv venv --python 3.11
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# 의존성 재설치
uv pip install moai-adk
```

## 프로젝트 초기화 문제

### .claude 디렉토리 생성 실패

**문제**: `moai-adk init` 실행 시 .claude 디렉토리가 생성되지 않음

**해결 방법**:
1. 현재 디렉토리의 권한 확인
2. Git 저장소가 초기화되었는지 확인
3. 수동으로 다시 실행:
   ```bash
   moai-adk init --force
   ```

### MCP 서버 설정 실패

**문제**: MCP 서버 자동 설정이 실패하는 경우

**해결 방법**:
```bash
# 수동으로 MCP 서버 설치
npm install -g @context7/mcp-server
npm install -g @playwright/mcp-server

# .claude/mcp.json 수동 편집
```

## 워크플로우 실행 문제

### Alfred 응답 없음

**문제**: `/alfred:*` 명령어 실행 시 응답이 없는 경우

**해결 방법**:
1. `.moai/config.json` 설정 확인
2. Claude Desktop 재시작
3. 로그 확인:
   ```bash
   tail -f .moai/logs/alfred.log
   ```

### Agent 실행 오류

**문제**: Sub-agent 실행 중 오류 발생

**해결 방법**:
1. `.claude/agents/` 디렉토리 권한 확인
2. Skills 파일 무결성 검증:
   ```bash
   moai-adk validate
   ```
3. 에이전트 로그 확인:
   ```bash
   cat .moai/logs/agents/*.log
   ```

## TDD 워크플로우 문제

### 테스트 실패

**문제**: `pytest` 실행 시 테스트가 실패하는 경우

**해결 방법**:
```bash
# 테스트 환경 재설정
uv pip install -e ".[dev]"

# 상세 로그와 함께 테스트 실행
pytest -v --tb=long

# 특정 테스트만 실행
pytest tests/test_specific.py::test_function_name -v
```

### Coverage 보고서 생성 실패

**문제**: 테스트 커버리지 보고서가 생성되지 않음

**해결 방법**:
```bash
# pytest-cov 재설치
uv pip install pytest-cov

# 커버리지 리포트 재생성
pytest --cov=src --cov-report=html --cov-report=term
```

## 문서 동기화 문제

### doc-syncer 오류

**문제**: 문서 동기화 중 오류 발생

**해결 방법**:
1. `.moai/docs/` 디렉토리 권한 확인
2. 수동 동기화 실행:
   ```bash
   /alfred:3-sync manual
   ```
3. 문서 템플릿 재생성:
   ```bash
   moai-adk docs init
   ```

## Git 워크플로우 문제

### 브랜치 생성 실패

**문제**: Feature 브랜치 생성이 실패하는 경우

**해결 방법**:
```bash
# Git 상태 확인
git status

# 미커밋 변경사항 스태시
git stash

# 브랜치 수동 생성
git checkout -b feature/SPEC-XXX-description
```

### PR 생성 실패

**문제**: GitHub PR 생성이 실패하는 경우

**해결 방법**:
```bash
# gh CLI 인증 확인
gh auth status

# 재인증
gh auth login

# PR 수동 생성
gh pr create --base develop --head feature/SPEC-XXX
```

## 성능 문제

### Alfred 응답 느림

**문제**: Alfred 명령어 실행이 느린 경우

**해결 방법**:
1. Context budget 설정 확인 (.moai/config.json)
2. 불필요한 로그 파일 정리:
   ```bash
   rm -rf .moai/logs/*
   ```
3. Skills 캐시 재생성:
   ```bash
   moai-adk cache clear
   moai-adk cache build
   ```

### 메모리 부족

**문제**: 대형 프로젝트에서 메모리 부족 오류

**해결 방법**:
1. `.moai/config.json`에서 context_budget 조정
2. 불필요한 파일 제외 (.moaclignore 활용)
3. 점진적 분석 활성화:
   ```json
   {
     "performance": {
       "incremental_analysis": true,
       "max_file_size_mb": 10
     }
   }
   ```

## 로그 및 디버깅

### 디버그 모드 활성화

상세한 로그를 확인하려면:

```json
// .moai/config.json
{
  "logging": {
    "level": "DEBUG",
    "console": true,
    "file": true
  }
}
```

### 로그 파일 위치

- Alfred 로그: `.moai/logs/alfred.log`
- Agent 로그: `.moai/logs/agents/*.log`
- TDD 로그: `.moai/logs/tdd/*.log`
- Git 로그: `.moai/logs/git.log`

## 추가 지원

### 커뮤니티 지원

- GitHub Issues: [MoAI-ADK Issues](https://github.com/yourusername/MoAI-ADK/issues)
- Discussions: [MoAI-ADK Discussions](https://github.com/yourusername/MoAI-ADK/discussions)

### 버그 리포트

문제가 해결되지 않으면 다음 정보와 함께 이슈를 생성해주세요:

1. MoAI-ADK 버전: `moai-adk --version`
2. Python 버전: `python --version`
3. 운영 체제 정보
4. 오류 메시지 전문
5. 재현 단계
6. 로그 파일 (`moai-adk logs export`)

---

**참고**: 이 가이드는 지속적으로 업데이트됩니다. 새로운 문제와 해결 방법을 발견하면 기여해주세요!
