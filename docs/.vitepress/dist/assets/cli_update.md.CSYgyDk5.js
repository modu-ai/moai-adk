import{_ as s,C as i,c,o as t,a3 as e,b as l,w as d,a as n,G as r,a4 as p}from"./chunks/framework.L7k57l8l.js";const B=JSON.parse('{"title":"moai update","description":"","frontmatter":{},"headers":[],"relativePath":"cli/update.md","filePath":"cli/update.md"}'),h={name:"cli/update.md"};function u(b,a,m,k,C,g){const o=i("Mermaid");return t(),c("div",null,[a[1]||(a[1]=e('<h1 id="moai-update" tabindex="-1">moai update <a class="header-anchor" href="#moai-update" aria-label="Permalink to &quot;moai update&quot;">​</a></h1><h2 id="_1-서론-—-실패한-바이브-코딩-vs-에이전틱-코딩" tabindex="-1">1. 서론 — 실패한 바이브 코딩 vs 에이전틱 코딩 <a class="header-anchor" href="#_1-서론-—-실패한-바이브-코딩-vs-에이전틱-코딩" aria-label="Permalink to &quot;1. 서론 — 실패한 바이브 코딩 vs 에이전틱 코딩&quot;">​</a></h2><p>현장에서 가장 흔한 실패는 &quot;일단 vibing 하다가&quot; 운 좋게 맞추려는 방식입니다. 템플릿이 바뀌었는지, 백업을 남겼는지, 업데이트가 성공했는지에 대한 근거가 없기 때문에 한번 빗나가면 되돌리기 어렵습니다. 아래 표는 MoAI-ADK가 지향하는 에이전틱(Agentic) 코딩과 대비됩니다.</p><table tabindex="0"><thead><tr><th>구분</th><th>바이브 코딩</th><th>에이전틱 코딩</th></tr></thead><tbody><tr><td>의사결정</td><td>느낌/즉흥</td><td>근거 기반 / 로그 추적</td></tr><tr><td>실패 원인</td><td>무백업, 옵션 의미 미파악</td><td>체크리스트 기반 동작 실패 예방</td></tr><tr><td><code>moai update</code> 활용</td><td>거의 없음</td><td>업데이트 루틴을 통한 지속적 동기화</td></tr></tbody></table><p>MoAI-ADK는 “입력 → 처리 → 반환”이 명확한 도구를 제공해 팀이 에이전틱 코딩을 실천하도록 돕습니다. 실패하지 않는 흐름을 만들려면 (1) 지금 실행하려는 명령이 무엇을 하는지 이해하고, (2) 성공/실패를 즉시 관찰하며, (3) 되돌릴 수 있는 안전장치를 준비해야 합니다. <code>moai update</code> 문서는 이 세 가지를 기준으로 다시 쓴다.</p><hr><h2 id="_2-moai-update-개요" tabindex="-1">2. <code>moai update</code> 개요 <a class="header-anchor" href="#_2-moai-update-개요" aria-label="Permalink to &quot;2. `moai update` 개요&quot;">​</a></h2><ul><li><strong>목적</strong>: MoAI-ADK 패키지와 프로젝트 템플릿(<code>.moai/</code>, <code>.claude/</code>, <code>CLAUDE.md</code>)을 최신 버전으로 맞추는 자동화 스크립트.</li><li><strong>현재 구현</strong> (<code>src/cli/commands/update.ts</code>, <code>src/core/update/update-orchestrator.ts</code>): <ol><li>버전 확인 (<code>getCurrentVersion</code>, <code>checkLatestVersion</code>).</li><li>백업(기본) 혹은 백업 생략(<code>--no-backup</code>).</li><li><code>npm install moai-adk@latest</code> 실행 후 템플릿 파일 목록을 단순 복사(덮어쓰기).</li><li>핵심 파일 존재 여부를 짧게 검증하고 종료.</li></ol></li><li><strong>중요 제약</strong>: 충돌 병합(ConflictResolver), 마이그레이션 프레임워크, 세부 로깅은 아직 구현되지 않았습니다.</li></ul><hr><h2 id="_3-옵션-요약" tabindex="-1">3. 옵션 요약 <a class="header-anchor" href="#_3-옵션-요약" aria-label="Permalink to &quot;3. 옵션 요약&quot;">​</a></h2><table tabindex="0"><thead><tr><th>옵션</th><th>지원</th><th>동작</th><th>비고</th></tr></thead><tbody><tr><td><code>--check</code></td><td>O</td><td>최신 버전 여부만 확인, 파일 변경 없음</td><td>성공 시 종료 코드 0, 업데이트 필요 시 메시지 표시</td></tr><tr><td><code>--no-backup</code></td><td>O</td><td>백업 단계를 건너뛰고 바로 업데이트</td><td>위험 플래그, <code>UpdateConfiguration.force=true</code> 전달</td></tr><tr><td><code>--verbose</code>, <code>-v</code></td><td>△</td><td>로거의 verbose 모드만 켜짐</td><td>현재 구현에서는 추가 정보가 거의 없음</td></tr><tr><td><code>--package-only</code></td><td>X(미동작)</td><td>CLI에 정의돼 있지만 사용 안 함</td><td>향후 패키지만 갱신하는 기능 계획</td></tr><tr><td><code>--resources-only</code></td><td>X(미동작)</td><td>CLI에 정의돼 있지만 사용 안 함</td><td>향후 템플릿만 재설치 기능 계획</td></tr><tr><td><code>--project-path &lt;path&gt;</code></td><td>△</td><td>옵션 구조에 존재하지만 <code>run()</code>에서 전달되지 않음</td><td>현재 명령 실행 디렉터리만 업데이트됨</td></tr></tbody></table><blockquote><p><strong>로드맵</strong>: ConflictResolver, MigrationFramework, 실제 <code>--project-path</code> 지원은 문서 하단 “8. 로드맵 &amp; 제한 사항”에 정리했습니다.</p></blockquote><hr><h2 id="_4-업데이트-파이프라인-실제-구현" tabindex="-1">4. 업데이트 파이프라인 (실제 구현) <a class="header-anchor" href="#_4-업데이트-파이프라인-실제-구현" aria-label="Permalink to &quot;4. 업데이트 파이프라인 (실제 구현)&quot;">​</a></h2>',14)),(t(),l(p,null,{default:d(()=>[r(o,{id:"mermaid-222",class:"mermaid my-class",graph:"flowchart%20TD%0A%20%20%20%20A%5Bmoai%20update%20%EC%8B%A4%ED%96%89%5D%20--%3E%20B%7B--check%3F%7D%0A%20%20%20%20B%20--%3E%7C%EC%98%88%7C%20C%5B%EB%B2%84%EC%A0%84%20%EB%B9%84%EA%B5%90%20%ED%9B%84%20%EC%A2%85%EB%A3%8C%5D%0A%20%20%20%20B%20--%3E%7C%EC%95%84%EB%8B%88%EC%98%A4%7C%20D%7B--no-backup%3F%7D%0A%20%20%20%20D%20--%3E%7C%EC%98%88%7C%20E%5B%EB%B0%B1%EC%97%85%20%EC%83%9D%EB%9E%B5%5D%0A%20%20%20%20D%20--%3E%7C%EC%95%84%EB%8B%88%EC%98%A4%7C%20F%5B.moai-backup%2F%3Cts%3E%20%EC%83%9D%EC%84%B1%5D%0A%20%20%20%20E%20--%3E%20G%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%5B%ED%8C%A8%ED%82%A4%EC%A7%80%20%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%20(npm%20install%20moai-adk%40latest)%5D%20--%3E%20H%5B%ED%85%9C%ED%94%8C%EB%A6%BF%20%ED%8C%8C%EC%9D%BC%20%EB%8D%AE%EC%96%B4%EC%93%B0%EA%B8%B0%5D%0A%20%20%20%20H%20--%3E%20I%5B%ED%95%B5%EC%8B%AC%20%ED%8C%8C%EC%9D%BC%20%EC%A1%B4%EC%9E%AC%20%EA%B2%80%EC%A6%9D%5D%0A%20%20%20%20I%20--%3E%20J%5B%EA%B2%B0%EA%B3%BC%20%EB%A1%9C%EA%B7%B8%20%ED%9B%84%20%EC%A2%85%EB%A3%8C%5D%0A"})]),fallback:d(()=>[...a[0]||(a[0]=[n(" Loading... ",-1)])]),_:1})),a[2]||(a[2]=e(`<p>에이전틱 코딩 체크포인트:</p><ol><li><strong>상태 파악</strong> — <code>--check</code>로 먼저 버전 확인.</li><li><strong>안전망</strong> — 기본 백업 유지, 생략 시 Git 커밋 선행.</li><li><strong>검증</strong> — 실행 후 <code>moai status</code> 또는 테스트 스위트로 검증.</li></ol><hr><h2 id="_5-단계별-상세-동작" tabindex="-1">5. 단계별 상세 동작 <a class="header-anchor" href="#_5-단계별-상세-동작" aria-label="Permalink to &quot;5. 단계별 상세 동작&quot;">​</a></h2><h3 id="_5-1-버전-확인" tabindex="-1">5.1 버전 확인 <a class="header-anchor" href="#_5-1-버전-확인" aria-label="Permalink to &quot;5.1 버전 확인&quot;">​</a></h3><ul><li><code>getCurrentVersion()</code>으로 설치된 CLI 버전, <code>checkLatestVersion()</code>으로 npm 최신 버전 확인.</li><li>최신일 경우: <code>&quot;✅ 최신 버전을 사용 중입니다&quot;</code> 메시지 후 즉시 종료.</li><li>업데이트 필요: 최신 버전 정보 출력 후 다음 단계 진행.</li></ul><h3 id="_5-2-백업-처리" tabindex="-1">5.2 백업 처리 <a class="header-anchor" href="#_5-2-백업-처리" aria-label="Permalink to &quot;5.2 백업 처리&quot;">​</a></h3><ul><li>기본은 <code>.moai-backup/&lt;ISO 타임스탬프&gt;/</code> 폴더에 <code>.moai</code>, <code>.claude</code>, <code>CLAUDE.md</code>를 복제.</li><li><code>--no-backup</code> 플래그가 있으면 백업 건너뛰고 경고 메시지 출력.</li><li>백업 실패 시 에러 메시지 후 종료 (되돌릴 여지 확보).</li></ul><h3 id="_5-3-패키지-템플릿-업데이트" tabindex="-1">5.3 패키지 &amp; 템플릿 업데이트 <a class="header-anchor" href="#_5-3-패키지-템플릿-업데이트" aria-label="Permalink to &quot;5.3 패키지 &amp; 템플릿 업데이트&quot;">​</a></h3><ul><li><code>npm install moai-adk@latest</code> 시도. 지역 <code>package.json</code> 없으면 글로벌 설치로 fallback.</li><li>템플릿 복사 대상: <code>.claude/commands/alfred</code>, <code>.claude/agents/alfred</code>, <code>.claude/hooks/alfred</code>, <code>.moai/memory/development-guide.md</code>, <code>.moai/project/{product,structure,tech}.md</code>, <code>CLAUDE.md</code>.</li><li>충돌 검사 없이 기존 파일을 덮어씌움.</li></ul><h3 id="_5-4-검증-및-로그" tabindex="-1">5.4 검증 및 로그 <a class="header-anchor" href="#_5-4-검증-및-로그" aria-label="Permalink to &quot;5.4 검증 및 로그&quot;">​</a></h3><ul><li><code>.moai/memory/development-guide.md</code>, <code>CLAUDE.md</code>, <code>.claude</code> 하위 디렉터리 존재 여부만 확인.</li><li>성공 시: <ul><li><code>✅ 설치 완료</code> 같은 로그와 함께 백업 경로(있다면) 표시.</li></ul></li><li>실패 시: <ul><li><code>❌ 업데이트 실패: &lt;에러&gt;</code> 출력, 백업 사용 안내 없음 → 사용자가 직접 <code>moai restore</code> 수행 필요.</li></ul></li></ul><hr><h2 id="_6-옵션별-사용-시나리오" tabindex="-1">6. 옵션별 사용 시나리오 <a class="header-anchor" href="#_6-옵션별-사용-시나리오" aria-label="Permalink to &quot;6. 옵션별 사용 시나리오&quot;">​</a></h2><h3 id="_6-1-기본-업데이트-백업-포함" tabindex="-1">6.1 기본 업데이트 (백업 포함) <a class="header-anchor" href="#_6-1-기본-업데이트-백업-포함" aria-label="Permalink to &quot;6.1 기본 업데이트 (백업 포함)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><p>예상 출력:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>🔍 MoAI-ADK 업데이트 확인 중...</span></span>
<span class="line"><span>📦 현재 버전: v0.0.1</span></span>
<span class="line"><span>⚡ 최신 버전: v0.0.2</span></span>
<span class="line"><span>💾 백업 생성 중...</span></span>
<span class="line"><span>   → &lt;프로젝트&gt;/.moai-backup/2025-03-15-14-30-00</span></span>
<span class="line"><span>📦 패키지 업데이트 중...</span></span>
<span class="line"><span>   ✅ 패키지 업데이트 완료</span></span>
<span class="line"><span>📄 템플릿 파일 복사 중...</span></span>
<span class="line"><span>   ✅ 8개 파일 복사 완료</span></span>
<span class="line"><span>🔍 검증 중...</span></span>
<span class="line"><span>   ✅ 검증 완료</span></span>
<span class="line"><span>✨ 업데이트 완료!</span></span></code></pre></div><h3 id="_6-2-사전-점검-check" tabindex="-1">6.2 사전 점검 (<code>--check</code>) <a class="header-anchor" href="#_6-2-사전-점검-check" aria-label="Permalink to &quot;6.2 사전 점검 (\`--check\`)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --check</span></span></code></pre></div><p>예상 출력:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>🔍 MoAI-ADK 업데이트 확인 중...</span></span>
<span class="line"><span>📦 현재 버전: v0.0.1</span></span>
<span class="line"><span>⚡ 최신 버전: v0.0.2</span></span>
<span class="line"><span>✅ 업데이트 가능 (파일 변경 없음)</span></span></code></pre></div><h3 id="_6-3-백업-생략-no-backup" tabindex="-1">6.3 백업 생략 (<code>--no-backup</code>) <a class="header-anchor" href="#_6-3-백업-생략-no-backup" aria-label="Permalink to &quot;6.3 백업 생략 (\`--no-backup\`)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Git에 변경 사항을 커밋한 뒤 사용하는 것을 강력히 권장합니다.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-backup</span></span></code></pre></div><p>출력의 첫 줄에 <code>⚠️ Backup disabled - proceeding without safety net</code> 경고가 등장하고 그 외 흐름은 기본과 동일합니다.</p><h3 id="_6-4-verbose-로깅-verbose" tabindex="-1">6.4 Verbose 로깅 (<code>--verbose</code>) <a class="header-anchor" href="#_6-4-verbose-로깅-verbose" aria-label="Permalink to &quot;6.4 Verbose 로깅 (\`--verbose\`)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span></span></code></pre></div><p>현재 구현에서는 verbose 레벨이 켜지지만, 추가 상세 로그는 아직 준비돼 있지 않습니다. 실패 진단에는 도움되지 않으니 추후 개선까지는 참고용으로만 사용하세요.</p><hr><h2 id="_7-실패-모드-복구-전략" tabindex="-1">7. 실패 모드 &amp; 복구 전략 <a class="header-anchor" href="#_7-실패-모드-복구-전략" aria-label="Permalink to &quot;7. 실패 모드 &amp; 복구 전략&quot;">​</a></h2><table tabindex="0"><thead><tr><th>증상</th><th>원인</th><th>해결 방법</th></tr></thead><tbody><tr><td><code>⚠️ This doesn&#39;t appear to be a MoAI-ADK project</code></td><td><code>.moai/</code> 디렉터리 없음</td><td><code>moai status</code>로 상태 확인 → 필요 시 <code>moai init</code> 실행</td></tr><tr><td><code>npm install</code> 관련 오류</td><td>네트워크/권한/레지스트리 문제</td><td>사내 레지스트리 사용 여부 확인, <code>npm config get registry</code>, VPN/프록시 점검</td></tr><tr><td><code>EACCES</code> 권한 오류</td><td>프로젝트 파일 소유권 불일치</td><td><code>chmod -R u+w .moai .claude</code>, <code>chown</code>으로 소유자 수정 후 재시도</td></tr><tr><td>백업 실패</td><td>디스크 부족 또는 경로 권한 문제</td><td>용량 확보 → 다시 실행, 임시로 <code>--no-backup</code> 사용 시 Git 커밋 필수</td></tr><tr><td>업데이트 후 동작 이상</td><td>덮어쓰기 때문에 사용자 변경 사라짐</td><td>백업에서 <code>moai restore &lt;backup-path&gt;</code> 수행 또는 Git으로 롤백</td></tr><tr><td><code>--project-path</code>가 먹지 않음</td><td>옵션은 정의됐지만 전달되지 않음</td><td>해당 기능은 로드맵, 현재는 대상 디렉터리에서 직접 실행</td></tr></tbody></table><p>바이브 코딩은 “실패하면 다시 해보면 되지” 수준의 낙관을 전제로 합니다. 에이전틱 코딩은 <strong>실패 가능성을 줄이기 위한 사전 점검</strong>(테이블 7)과 <strong>되돌릴 방법 확보</strong>(백업 / Git)를 항상 포함합니다.</p><hr><h2 id="_8-로드맵-제한-사항" tabindex="-1">8. 로드맵 &amp; 제한 사항 <a class="header-anchor" href="#_8-로드맵-제한-사항" aria-label="Permalink to &quot;8. 로드맵 &amp; 제한 사항&quot;">​</a></h2><p>현재 문서는 구현된 기능을 기준으로 작성했습니다. 향후 계획과 제한 사항은 아래와 같습니다.</p><table tabindex="0"><thead><tr><th>항목</th><th>상태</th><th>메모</th></tr></thead><tbody><tr><td>ConflictResolver, MigrationFramework</td><td>미구현</td><td>문서에서 “계획”으로만 언급되던 기능. 설계 초안은 남아 있지만 코드 반영 전입니다.</td></tr><tr><td><code>--project-path &lt;path&gt;</code></td><td>미지원</td><td>CLI 옵션에 노출돼 있지만 <code>UpdateCommand.run</code>에서 사용하지 않습니다.</td></tr><tr><td><code>--package-only</code>, <code>--resources-only</code></td><td>미동작</td><td>현재는 로그만 남기고 아무 동작도 하지 않습니다.</td></tr><tr><td>Verbose 세부 로그</td><td>제한적</td><td>Console 레벨만 바뀌어서 실질적인 분석에는 부족.</td></tr></tbody></table><p>구현 완료 후 문서 업데이트 시에는 이 섹션을 “실제 동작”으로 옮기고, 테스트 커버리지와 회귀 테스트 계획을 함께 명시하는 것이 바람직합니다.</p><hr><h2 id="_9-관련-명령어-참고-자료" tabindex="-1">9. 관련 명령어 &amp; 참고 자료 <a class="header-anchor" href="#_9-관련-명령어-참고-자료" aria-label="Permalink to &quot;9. 관련 명령어 &amp; 참고 자료&quot;">​</a></h2><ul><li><a href="./init.html"><code>moai init</code></a> — 프로젝트 초기화</li><li><a href="./status.html"><code>moai status</code></a> — 템플릿/버전 상태 확인</li><li><a href="./doctor.html"><code>moai doctor</code></a> — 시스템 요구사항 점검</li><li><a href="./restore.html"><code>moai restore</code></a> — 백업 복원</li><li>사내 가이드: 에이전틱 코딩 체크리스트, 업데이트 전후 테스트 시나리오</li></ul><hr><p><strong>요약</strong>: <code>moai update</code>는 단순하지만 강력한 도구입니다. 에이전틱 코딩 방식으로 사용하면 업데이트 실패와 데이터 손실을 예방할 수 있고, 향후 기능 확장을 위해 필요한 근거도 확보할 수 있습니다. 먼저 <code>--check</code>, 백업 유지, 실행 후 검증이라는 세 단계를 습관화하세요.</p>`,42))])}const _=s(h,[["render",u]]);export{B as __pageData,_ as default};
