# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šå®Œå…¨ã‚¬ã‚¤ãƒ‰

MoAI-ADKãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©³ç´°ã«èª¬æ˜ã™ã‚‹ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚è¨€èªè¨­å®šã‹ã‚‰GitHubçµ±åˆã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæœ€é©åŒ–ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šã¾ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®ã‚ã‚‰ã‚†ã‚‹å´é¢ã‚’ã‚«ãƒãƒ¼ã—ã¾ã™ã€‚

## ç›®æ¬¡

01. [æ¦‚è¦](#æ¦‚è¦)
02. [ã‚³ã‚¢è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«](#ã‚³ã‚¢è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«)
03. [è¨€èªãŠã‚ˆã³ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š](#è¨€èªãŠã‚ˆã³ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š)
04. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š)
05. [GitHubçµ±åˆè¨­å®š](#githubçµ±åˆè¨­å®š)
06. [ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆåˆ¶å¾¡](#ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆåˆ¶å¾¡)
07. [Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š](#gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š)
08. [Hookè¨­å®šæœ€é©åŒ–](#hookè¨­å®šæœ€é©åŒ–)
09. [ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š](#ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š)
10. [TAGã‚·ã‚¹ãƒ†ãƒ è¨­å®š](#tagã‚·ã‚¹ãƒ†ãƒ è¨­å®š)
11. [TRUST 5åŸå‰‡è¨­å®š](#trust-5åŸå‰‡è¨­å®š)
12. [ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®š](#ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®š)
13. [è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ](#è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ)
14. [è¨­å®šæœ€é©åŒ–æˆ¦ç•¥](#è¨­å®šæœ€é©åŒ–æˆ¦ç•¥)
15. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## æ¦‚è¦

MoAI-ADKã®è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã¯æŸ”è»Ÿæ€§ã¨æ‹¡å¼µæ€§ã‚’ä¸­å¿ƒã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚å˜ç´”ãªç’°å¢ƒè¨­å®šã‚’è¶…ãˆã¦ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œæ–¹å¼ã€é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ãƒãƒ¼ãƒ å”åƒæ–¹å¼ã¾ã§ã€ã™ã¹ã¦ã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚

### è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¢åŸå‰‡

1. **éšå±¤æ§‹é€ **: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
2. **è‡ªå‹•æ¤œå‡º**: å¯èƒ½ãªé™ã‚Šå¤šãã®è¨­å®šã‚’è‡ªå‹•çš„ã«æ¤œå‡º
3. **æ®µéšçš„å…¬é–‹**: å¿…è¦ãªè¨­å®šã®ã¿ã‚’å…¬é–‹ã—ã€è¤‡é›‘ã•ã‚’æœ€å°åŒ–
4. **å®‰å…¨ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨å®‰å®šæ€§ã‚’å„ªå…ˆã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
5. **ãƒãƒ¼ãƒ äº’æ›æ€§**: å€‹äººè¨­å®šãŒãƒãƒ¼ãƒ æ¨™æº–ã‚’æãªã‚ãªã„

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
.moai/
â”œâ”€â”€ config.json              # ãƒ¡ã‚¤ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ user-config.json         # ãƒ¦ãƒ¼ã‚¶ãƒ¼å€‹äººè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”œâ”€â”€ team-config.json         # ãƒãƒ¼ãƒ å…±é€šè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â””â”€â”€ environment-config.json  # ç’°å¢ƒåˆ¥è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

.claude/
â”œâ”€â”€ settings.json            # Claude Codeè¨­å®š
â”œâ”€â”€ mcp.json                 # MCPã‚µãƒ¼ãƒãƒ¼è¨­å®š
â””â”€â”€ permissions.json         # æ¨©é™è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

## ã‚³ã‚¢è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### `.moai/config.json` - ãƒ¡ã‚¤ãƒ³è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®ã‚³ã‚¢è¨­å®šã‚’ç®¡ç†ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

```json
{
  "version": "0.17.0",
  "moai": {
    "version": "0.17.0",
    "template_version": "0.17.0",
    "optimized": false,
    "auto_update": true
  },
  "language": {
    "conversation_language": "ko",
    "conversation_language_name": "í•œêµ­ì–´",
    "code_language": "python",
    "locale": "ko-KR",
    "timezone": "Asia/Seoul"
  },
  "project": {
    "name": "my-awesome-project",
    "description": "AIãƒ™ãƒ¼ã‚¹ã®é©æ–°çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
    "owner": "username",
    "team": "development-team",
    "mode": "personal",
    "created_at": "2025-11-06T10:00:00Z",
    "updated_at": "2025-11-06T15:30:00Z",
    "domains": ["backend", "api", "database"],
    "tags": ["fastapi", "postgresql", "docker"],
    "visibility": "private"
  },
  "github": {
    "enabled": true,
    "repository": "username/my-awesome-project",
    "default_branch": "main",
    "auto_delete_branches": true,
    "spec_git_workflow": "feature_branch",
    "require_review": true,
    "auto_merge": false,
    "issue_sync": true,
    "release_automation": true
  },
  "report_generation": {
    "enabled": true,
    "level": "minimal",
    "formats": ["markdown"],
    "auto_commit": true,
    "include_metrics": true,
    "include_changelog": true,
    "max_file_size_kb": 100
  },
  "hooks": {
    "timeout_seconds": 5,
    "auto_checkpoint": true,
    "risk_detection": true,
    "tag_validation": true,
    "auto_linting": true,
    "session_recording": true
  },
  "tags": {
    "policy": "strict",
    "auto_validation": true,
    "format": "@TYPE:DOMAIN-NNN",
    "required_types": ["SPEC", "TEST", "CODE", "DOC"],
    "auto_assignment": true,
    "orphan_detection": true
  },
  "constitution": {
    "trust_principles": true,
    "tdd_workflow": true,
    "spec_first": true,
    "code_review_required": false,
    "documentation_required": true
  },
  "ai": {
    "default_model": "claude-3-5-sonnet-20241022",
    "fast_model": "claude-3-5-haiku-20241022",
    "max_tokens": 100000,
    "temperature": 0.1,
    "timeout": 300,
    "retry_attempts": 3
  },
  "security": {
    "scan_dependencies": true,
    "scan_secrets": true,
    "require_authentication": false,
    "audit_log": true,
    "encryption_at_rest": false
  },
  "performance": {
    "parallel_processing": true,
    "cache_enabled": true,
    "cache_ttl": 3600,
    "memory_limit_mb": 1024,
    "concurrent_agents": 3
  }
}
```

### `.claude/settings.json` - Claude Codeè¨­å®š

Claude Codeã®å‹•ä½œæ–¹å¼ã‚’åˆ¶å¾¡ã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

```json
{
  "models": {
    "default": "claude-3-5-sonnet-20241022",
    "fast": "claude-3-5-haiku-20241022",
    "reasoning": "claude-3-5-sonnet-20241022"
  },
  "permissions": {
    "allow": [
      "Read(*)",
      "Write(src/*, tests/*, docs/*, .moai/*)",
      "Bash(git status, git log, git diff, pytest, python, uv, node, npm)",
      "Grep(*), Glob(*), Edit(*), Bash(*, cd, ls, mkdir, echo, cat)"
    ],
    "ask": [
      "Bash(git push, git merge, git pull, rm -rf)",
      "Write(.claude/*, .moai/config.json, .env*)",
      "Bash(sudo, docker exec)"
    ],
    "deny": [
      "Bash(sudo rm, dd, mkfs, format)",
      "Write(*.key, *.pem, id_rsa)",
      "Bash(curl -X DELETE, wget -qO-)"
    ]
  },
  "hooks": {
    "SessionStart": ["alfred-hooks"],
    "PreToolUse": ["alfred-hooks"],
    "UserPromptSubmit": ["alfred-hooks"],
    "PostToolUse": ["alfred-hooks"],
    "SessionEnd": ["alfred-hooks"],
    "timeout": 5
  },
  "environment": {
    "PYTHONPATH": "${CLAUDE_PROJECT_DIR}/src",
    "MOAI_PROJECT_ROOT": "${CLAUDE_PROJECT_DIR}",
    "PATH": "${CLAUDE_PROJECT_DIR}/.venv/bin:${PATH}"
  },
  "ui": {
    "theme": "dark",
    "font_size": 14,
    "line_numbers": true,
    "word_wrap": true,
    "auto_save": true
  },
  "features": {
    "auto_completion": true,
    "syntax_highlighting": true,
    "inline_errors": true,
    "quick_actions": true
  },
  "experimental": {
    "multimodal": false,
    "advanced_reasoning": true,
    "context_compression": true
  }
}
```

## è¨€èªãŠã‚ˆã³ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

### è¨€èªè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### conversation_languageï¼ˆä¼šè©±è¨€èªï¼‰

Alfredã¨ã®ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã«ä½¿ç”¨ã•ã‚Œã‚‹è¨€èªã§ã™ã€‚

```json
{
  "language": {
    "conversation_language": "ko",
    "conversation_language_name": "í•œêµ­ì–´",
    "supported_languages": {
      "ko": "í•œêµ­ì–´",
      "en": "English",
      "ja": "æ—¥æœ¬èª",
      "zh": "ä¸­æ–‡",
      "es": "EspaÃ±ol"
    }
  }
}
```

**ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹è¨€èª**:

| ã‚³ãƒ¼ãƒ‰ | è¨€èª     | ã‚µãƒãƒ¼ãƒˆãƒ¬ãƒ™ãƒ« | å‚™è€ƒ                      |
| ------ | -------- | -------------- | ------------------------- |
| ko     | í•œêµ­ì–´   | å®Œå…¨           | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èª            |
| en     | English  | å®Œå…¨           | ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¨™æº–            |
| ja     | æ—¥æœ¬èª   | å®Œå…¨           | æ—¥æœ¬èªã‚µãƒãƒ¼ãƒˆ            |
| zh     | ä¸­æ–‡     | å®Œå…¨           | ä¸­å›½èªç°¡ä½“å­—/ç¹ä½“å­—ã‚µãƒãƒ¼ãƒˆ |
| es     | EspaÃ±ol  | å®Œå…¨           | ã‚¹ãƒšã‚¤ãƒ³èªã‚µãƒãƒ¼ãƒˆ        |
| fr     | FranÃ§ais | éƒ¨åˆ†çš„         | ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆé–‹ç™ºä¸­ï¼‰      |
| de     | Deutsch  | éƒ¨åˆ†çš„         | ãƒ‰ã‚¤ãƒ„èªï¼ˆé–‹ç™ºä¸­ï¼‰        |

#### code_languageï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸»è¦ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªè¨­å®šã§ã™ã€‚

```json
{
  "language": {
    "code_language": "python",
    "auto_detection": true,
    "fallback": "python",
    "multi_language": {
      "enabled": false,
      "primary": "python",
      "secondary": ["javascript", "sql"]
    }
  }
}
```

**ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª**:

| è¨€èª       | è‡ªå‹•æ¤œå‡ºãƒ•ã‚¡ã‚¤ãƒ«                       | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ„ãƒ¼ãƒ«          | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ                       |
| ---------- | -------------------------------------- | ------------------------- | ------------------------------------------ |
| python     | pyproject.toml, setup.py, requirements.txt | pytest, ruff, mypy        | âœ…                                         |
| javascript | package.json, yarn.lock                | jest, eslint, prettier    | âœ…                                         |
| typescript | tsconfig.json, package.json            | typescript, eslint, prettier | âœ…                                         |
| go         | go.mod, go.sum                         | go test, golint, gofmt    | âœ…                                         |
| rust       | Cargo.toml                             | cargo test, clippy, rustfmt | âœ…                                         |
| java       | pom.xml, build.gradle                  | junit, maven, gradle      | âœ…                                         |
| kotlin     | build.gradle.kts                       | junit, ktlint             | âœ…                                         |
| ruby       | Gemfile                                | rspec, rubocop            | âœ…                                         |
| php        | composer.json                          | phpunit, phpstan          | âœ…                                         |
| csharp     | \*.csproj, \*.sln                      | xunit, dotnet             | âœ…                                         |
| sql        | \*.sql, schema.sql                     | -                         | <span class="material-icons">warning</span> åˆ¶é™ä»˜ã |

#### localeè¨­å®š

ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢é€£ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚

```json
{
  "language": {
    "locale": "ko-KR",
    "timezone": "Asia/Seoul",
    "date_format": "YYYY-MM-DD",
    "time_format": "HH:mm:ss",
    "currency": "KRW",
    "number_format": {
      "decimal_separator": ".",
      "thousands_separator": ","
    }
  }
}
```

### è¨€èªè¨­å®šã®æœ€é©åŒ–

#### è‡ªå‹•è¨€èªæ¤œå‡º

```python
# .claude/hooks/alfred/utils/language_detector.py
import os
from pathlib import Path

def detect_project_language(project_dir: Path) -> dict:
    """ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨€èªã®è‡ªå‹•æ¤œå‡º"""
    indicators = {
        'python': ['pyproject.toml', 'setup.py', 'requirements.txt', 'Pipfile'],
        'javascript': ['package.json', 'yarn.lock', 'package-lock.json'],
        'typescript': ['tsconfig.json', 'package.json'],
        'go': ['go.mod', 'go.sum'],
        'rust': ['Cargo.toml'],
        'java': ['pom.xml', 'build.gradle'],
        'ruby': ['Gemfile', 'Rakefile'],
        'php': ['composer.json', 'composer.lock']
    }

    project_files = os.listdir(project_dir)

    for language, files in indicators.items():
        if any(file in project_files for file in files):
            return {
                'detected_language': language,
                'confidence': 'high',
                'indicators': [f for f in files if f in project_files]
            }

    return {'detected_language': 'python', 'confidence': 'low'}
```

#### å¤šè¨€èªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

```json
{
  "language": {
    "multi_language": {
      "enabled": true,
      "primary": "python",
      "secondary": ["javascript", "sql"],
      "bridging": {
        "enabled": true,
        "apis": ["grpc", "rest"],
        "data_formats": ["json", "protobuf"]
      }
    },
    "documentation": {
      "primary": "ko",
      "secondary": ["en"],
      "auto_translation": false
    }
  }
}
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š

### åŸºæœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

```json
{
  "project": {
    "name": "my-awesome-project",
    "display_name": "My Awesome Project",
    "description": "AIãƒ™ãƒ¼ã‚¹ã®é©æ–°çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³",
    "short_description": "AI-powered web application",
    "version": "1.0.0",
    "owner": "username",
    "team": "development-team",
    "organization": "company-name",
    "license": "MIT",
    "homepage": "https://github.com/username/my-awesome-project",
    "repository": "https://github.com/username/my-awesome-project.git",
    "documentation": "https://docs.my-awesome-project.com",
    "created_at": "2025-11-06T10:00:00Z",
    "updated_at": "2025-11-06T15:30:00Z"
  }
}
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†é¡

```json
{
  "project": {
    "type": "web-api",
    "category": "backend",
    "domains": ["backend", "api", "database", "security"],
    "tags": ["fastapi", "postgresql", "docker", "jwt", "rest"],
    "technologies": [
      {
        "name": "Python",
        "version": "3.13",
        "type": "language"
      },
      {
        "name": "FastAPI",
        "version": "0.104",
        "type": "framework"
      },
      {
        "name": "PostgreSQL",
        "version": "15",
        "type": "database"
      }
    ],
    "platforms": ["linux", "macos", "windows"],
    "target_environments": ["development", "staging", "production"]
  }
}
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰è¨­å®š

```json
{
  "project": {
    "mode": "team",
    "visibility": "private",
    "access_level": "internal",
    "collaboration": {
      "enabled": true,
      "team_size": 5,
      "review_policy": "required",
      "approval_policy": "majority"
    },
    "compliance": {
      "standards": ["ISO27001", "SOC2"],
      "audit_required": true,
      "data_classification": "confidential"
    }
  }
}
```

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ç¨®é¡**:

| ãƒ¢ãƒ¼ãƒ‰      | èª¬æ˜                   | é©ã—ãŸçŠ¶æ³       | ç‰¹å¾´                           |
| ----------- | ---------------------- | ---------------- | ------------------------------ |
| personal    | å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ       | å€‹äººé–‹ç™ºã€å­¦ç¿’   | ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®šã€ç´ æ—©ã„ã‚¹ã‚¿ãƒ¼ãƒˆ |
| team        | ãƒãƒ¼ãƒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ     | å°è¦æ¨¡ãƒãƒ¼ãƒ é–‹ç™º | ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| enterprise  | ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å¤§è¦æ¨¡çµ„ç¹”       | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€è¦åˆ¶éµå®ˆã€ç›£æŸ»   |
| open-source | ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã€é€æ˜æ€§ã€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |

## GitHubçµ±åˆè¨­å®š

### åŸºæœ¬GitHubè¨­å®š

```json
{
  "github": {
    "enabled": true,
    "repository": "username/my-awesome-project",
    "owner": "username",
    "default_branch": "main",
    "protected_branches": ["main", "develop"],
    "auto_delete_branches": true,
    "require_review": true,
    "auto_merge": false,
    "sync_issues": true,
    "sync_projects": true
  }
}
```

### Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š

```json
{
  "github": {
    "spec_git_workflow": "feature_branch",
    "branch_strategy": {
      "main": {
        "protected": true,
        "require_reviews": 2,
        "require_status_checks": ["ci/cd", "quality-gate"],
        "enforce_admins": true
      },
      "develop": {
        "protected": false,
        "auto_merge": true,
        "require_status_checks": ["lint", "test"]
      },
      "feature": {
        "naming_pattern": "feature/{spec-id}-{description}",
        "auto_create": true,
        "from_spec": true
      }
    },
    "pull_request": {
      "template": ".github/PULL_REQUEST_TEMPLATE.md",
      "auto_assign_reviewers": true,
      "reviewers": ["team-lead", "senior-dev"],
      "require_up_to_date": true
    }
  }
}
```

**Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:

| ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼   | èª¬æ˜                         | ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥                                | PRãƒãƒªã‚·ãƒ¼   |
| -------------- | ---------------------------- | ------------------------------------------- | ------------ |
| develop_direct | developãƒ–ãƒ©ãƒ³ãƒã«ç›´æ¥ã‚³ãƒŸãƒƒãƒˆ | develop â†’ main                              | Draft PR     |
| feature_branch | æ©Ÿèƒ½åˆ¥ãƒ–ãƒ©ãƒ³ãƒä½œæˆ           | feature â†’ develop â†’ main                    | Full PR      |
| release_branch | ãƒªãƒªãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒä½¿ç”¨         | feature â†’ develop â†’ release â†’ main          | Full PR + QA |
| gitflow        | å¾“æ¥ã®GitFlow                | feature â†’ develop â†’ release â†’ main â†’ hotfix | Complex PR   |

### GitHub Actionsçµ±åˆ

```json
{
  "github": {
    "actions": {
      "enabled": true,
      "workflows": [
        {
          "name": "ci.yml",
          "triggers": ["push", "pull_request"],
          "jobs": ["lint", "test", "build", "security-scan"]
        },
        {
          "name": "release.yml",
          "triggers": ["push:tags"],
          "jobs": ["build", "test", "publish", "deploy"]
        },
        {
          "name": "spec-sync.yml",
          "triggers": ["pull_request:opened", "pull_request:synchronize"],
          "jobs": ["spec-validation", "issue-sync"]
        }
      ],
      "secrets": {
        "required": ["GH_TOKEN", "DOCKER_REGISTRY_TOKEN"],
        "optional": ["SLACK_WEBHOOK", "NOTIFICATION_EMAIL"]
      }
    }
  }
}
```

### ã‚¤ã‚·ãƒ¥ãƒ¼ãŠã‚ˆã³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†

```json
{
  "github": {
    "issue_management": {
      "auto_sync": true,
      "spec_to_issue": true,
      "labels": {
        "spec": ["spec", "planning"],
        "bug": ["bug", "priority-high"],
        "feature": ["enhancement", "priority-medium"],
        "documentation": ["documentation", "good-first-issue"]
      },
      "templates": {
        "bug_report": ".github/ISSUE_TEMPLATE/bug_report.md",
        "feature_request": ".github/ISSUE_TEMPLATE/feature_request.md",
        "spec": ".github/ISSUE_TEMPLATE/spec.md"
      }
    },
    "project_management": {
      "boards": ["Development", "Backlog", "In Review", "Done"],
      "auto_update": true,
      "sync_with_spec": true
    }
  }
}
```

## ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆåˆ¶å¾¡

### ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆè¨­å®š

```json
{
  "report_generation": {
    "enabled": true,
    "level": "minimal",
    "formats": ["markdown", "html"],
    "output_directory": ".moai/reports",
    "auto_commit": true,
    "schedule": {
      "enabled": false,
      "frequency": "weekly",
      "day": "friday",
      "time": "17:00"
    },
    "triggers": {
      "on_sync": true,
      "on_completion": true,
      "on_release": true,
      "manual_only": false
    }
  }
}
```

### ãƒ¬ãƒãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«è¨­å®š

| ãƒ¬ãƒ™ãƒ«        | èª¬æ˜                   | ç”Ÿæˆã•ã‚Œã‚‹ãƒ¬ãƒãƒ¼ãƒˆ     | ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ |
| ------------- | ---------------------- | ---------------------- | -------------- |
| disable       | ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãªã—       | ãªã—                   | 0%             |
| minimal       | æœ€å°é™ã®ãƒ¬ãƒãƒ¼ãƒˆã®ã¿   | åŒæœŸã‚µãƒãƒªãƒ¼ã€TAGçŠ¶æ…‹  | 20%            |
| standard      | æ¨™æº–ãƒ¬ãƒãƒ¼ãƒˆ           | åŒæœŸã€å“è³ªã€ã‚«ãƒãƒ¬ãƒƒã‚¸ | 60%            |
| comprehensive | ã™ã¹ã¦ã®ãƒ¬ãƒãƒ¼ãƒˆ       | ã™ã¹ã¦ã®åˆ†æã€æ¨å¥¨ã€äºˆæ¸¬ | 100%           |

#### Minimalãƒ¬ãƒ™ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ

```markdown
# åŒæœŸãƒ¬ãƒãƒ¼ãƒˆ - 2025-11-06

## ã‚µãƒãƒªãƒ¼
- åŒæœŸã•ã‚ŒãŸSPEC: 3å€‹
- ç”Ÿæˆã•ã‚ŒãŸTAG: 12å€‹
- å“è³ªæ¤œè¨¼: é€šé

## å¤‰æ›´å†…å®¹
- AUTH-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å®Œäº†
- USER-002: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†å®Ÿè£…ä¸­
- API-003: APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
- USER-002å®Ÿè£…å®Œäº†
- API-003ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…è¦
```

#### Standardãƒ¬ãƒ™ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ

```markdown
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ - 2025-11-06

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- åå‰: My Awesome Project
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0.0
- çŠ¶æ…‹: é–‹ç™ºä¸­

## å“è³ªæŒ‡æ¨™
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 87.5%
- ã‚³ãƒ¼ãƒ‰å“è³ªã‚¹ã‚³ã‚¢: 92/100
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢: 95/100

## SPECçŠ¶æ…‹
| ID | ã‚¿ã‚¤ãƒˆãƒ« | çŠ¶æ…‹ | é€²æ—ç‡ |
|----|----------|------|--------|
| AUTH-001 | ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ | completed | 100% |
| USER-002 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† | in_progress | 75% |
| API-003 | APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | draft | 30% |

## æ¨å¥¨äº‹é …
1. USER-002ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å¢—åŠ ãŒå¿…è¦
2. API-003ã®å—ã‘å…¥ã‚ŒåŸºæº–ã®æ˜ç¢ºåŒ–ãŒå¿…è¦
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ã‚¯ãƒ«ã®çŸ­ç¸®ã‚’æ¨å¥¨
```

### ãƒ¬ãƒãƒ¼ãƒˆå½¢å¼è¨­å®š

```json
{
  "report_generation": {
    "formats": {
      "markdown": {
        "enabled": true,
        "template": "default",
        "include_toc": true,
        "include_charts": false
      },
      "html": {
        "enabled": true,
        "theme": "light",
        "include_interactive_charts": true,
        "export_to_pdf": false
      },
      "json": {
        "enabled": true,
        "pretty_print": true,
        "include_metadata": true
      },
      "csv": {
        "enabled": false,
        "include_metrics_only": true
      }
    }
  }
}
```

## Gitãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æˆ¦ç•¥ã®é¸æŠ

```json
{
  "github": {
    "spec_git_workflow": "feature_branch",
    "workflow_config": {
      "auto_create_branches": true,
      "branch_naming": "feature/{domain}-{id}",
      "auto_create_pr": true,
      "pr_template": "spec_template",
      "require_review": true,
      "auto_merge": false,
      "auto_delete_branches": true
    }
  }
}
```

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥è©³ç´°

#### Feature Branchãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[SPECä½œæˆ] --> B[featureãƒ–ãƒ©ãƒ³ãƒä½œæˆ]
    B --> C[TDDå®Ÿè£…]
    C --> D[Draft PRä½œæˆ]
    D --> E[ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼]
    E --> F[QAæ¤œè¨¼]
    F --> G{æ‰¿èª?}
    G -->|Yes| H[developãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸]
    G -->|No| I[ä¿®æ­£è¦æ±‚]
    I --> C
    H --> J[ãƒªãƒªãƒ¼ã‚¹æº–å‚™]
    J --> K[mainãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸]
    K --> L[ãƒ–ãƒ©ãƒ³ãƒè‡ªå‹•å‰Šé™¤]
```

```json
{
  "github": {
    "workflow": "feature_branch",
    "branches": {
      "main": {
        "protection": {
          "enabled": true,
          "required_status_checks": {
            "strict": true,
            "contexts": ["ci/cd", "quality-gate", "security-scan"]
          },
          "enforce_admins": true,
          "required_pull_request_reviews": {
            "required_approving_review_count": 2,
            "dismiss_stale_reviews": true,
            "require_code_owner_reviews": true
          }
        }
      },
      "develop": {
        "protection": {
          "enabled": false,
          "required_status_checks": {
            "contexts": ["lint", "test"]
          }
        }
      },
      "feature": {
        "pattern": "feature/{domain}-{id}",
        "auto_create": true,
        "source_branch": "develop",
        "delete_after_merge": true
      }
    }
  }
}
```

#### Develop Directãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[SPECä½œæˆ] --> B[developãƒ–ãƒ©ãƒ³ãƒã§ç›´æ¥ä½œæ¥­]
    B --> C[TDDå®Ÿè£…]
    C --> D[ã‚³ãƒŸãƒƒãƒˆ]
    D --> E[è‡ªå‹•å“è³ªãƒã‚§ãƒƒã‚¯]
    E --> F{é€šé?}
    F -->|Yes| G[æ¬¡ã®æ©Ÿèƒ½]
    F -->|No| H[ä¿®æ­£]
    H --> C
    G --> I[å®šæœŸçš„ã«develop â†’ mainãƒãƒ¼ã‚¸]
```

```json
{
  "github": {
    "workflow": "develop_direct",
    "settings": {
      "main_branch": "main",
      "develop_branch": "develop",
      "sync_schedule": "daily",
      "auto_merge_develop_to_main": false,
      "require_manual_review_for_main": true
    },
    "quality_gates": {
      "test_coverage_threshold": 85,
      "code_quality_threshold": 90,
      "security_scan_required": true
    }
  }
}
```

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š

```json
{
  "github": {
    "commit_convention": "conventional_commits",
    "commit_templates": {
      "feature": "feat({scope}): {description}",
      "fix": "fix({scope}): {description}",
      "refactor": "refactor({scope}): {description}",
      "test": "test({scope}): {description}",
      "docs": "docs({scope}): {description}",
      "chore": "chore({scope}): {description}"
    },
    "auto_tag_commits": true,
    "require_issue_link": false,
    "max_commit_message_length": 72
  }
}
```

## Hookè¨­å®šæœ€é©åŒ–

### Hookã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

MoAI-ADKã®Hookã‚·ã‚¹ãƒ†ãƒ ã¯ã€é–‹ç™ºãƒ•ãƒ­ãƒ¼ã®ã™ã¹ã¦ã®æ®µéšã§è‡ªå‹•çš„ã«å‹•ä½œã—ã¦ç”Ÿç”£æ€§ã‚’å‘ä¸Šã•ã›ã€å“è³ªã‚’ä¿è¨¼ã—ã¾ã™ã€‚

```json
{
  "hooks": {
    "timeout_seconds": 5,
    "enabled_hooks": {
      "SessionStart": {
        "enabled": true,
        "actions": ["project_summary", "context_loading", "version_check"],
        "priority": "high"
      },
      "PreToolUse": {
        "enabled": true,
        "actions": ["risk_detection", "checkpoint_creation", "tag_validation"],
        "priority": "critical"
      },
      "UserPromptSubmit": {
        "enabled": true,
        "actions": ["jit_context_loading", "intent_analysis"],
        "priority": "medium"
      },
      "PostToolUse": {
        "enabled": true,
        "actions": ["auto_linting", "test_execution", "change_detection"],
        "priority": "medium"
      },
      "SessionEnd": {
        "enabled": true,
        "actions": ["session_summary", "context_persistence", "cleanup"],
        "priority": "low"
      }
    },
    "auto_checkpoint": {
      "enabled": true,
      "triggers": [
        "file_deletion",
        "large_file_modification",
        "config_changes",
        "git_merge_operations"
      ],
      "max_checkpoints": 10,
      "retention_days": 30
    }
  }
}
```

### SessionStart Hook

```python
# .claude/hooks/alfred/session_start.py
import json
import os
from datetime import datetime
from pathlib import Path

def main():
    """ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ã‚µãƒãƒªãƒ¼"""
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')
    config_path = Path(project_dir) / '.moai' / 'config.json'

    if config_path.exists():
        with open(config_path) as f:
            config = json.load(f)

        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±å‡ºåŠ›
        print(f"ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {config['project']['name']}")
        print(f"ğŸŒ è¨€èª: {config['language']['conversation_language_name']}")
        print(f"ğŸ‘¤ ã‚ªãƒ¼ãƒŠãƒ¼: {config['project']['owner']}")
        print(f"âš™ï¸ ãƒ¢ãƒ¼ãƒ‰: {config['project']['mode']}")

        # SPECçŠ¶æ…‹ã‚µãƒãƒªãƒ¼
        specs_dir = Path(project_dir) / '.moai' / 'specs'
        if specs_dir.exists():
            spec_count = len([d for d in specs_dir.iterdir() if d.is_dir()])
            print(f"ğŸ“„ SPECãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: {spec_count}å€‹")

        # GitçŠ¶æ…‹ç¢ºèª
        os.system('git status --porcelain | wc -l | xargs echo "ğŸ”„ å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:"')

        # æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£
        print(f"ğŸ• æœ€çµ‚æ›´æ–°: {config['project']['updated_at']}")
        print("âœ… Alfredæº–å‚™å®Œäº†")

if __name__ == "__main__":
    main()
```

### PreToolUse Hook

```python
# .claude/hooks/alfred/pre_tool_use.py
import json
import os
import re
from pathlib import Path

def check_risk(operation: str, target: str) -> dict:
    """ãƒªã‚¹ã‚¯è©•ä¾¡"""
    risk_patterns = {
        'high': [r'rm\s+-rf', r'sudo', r'format', r'dd\s+if='],
        'medium': [r'git\s+push\s+--force', r'merge', r'reset'],
        'low': [r'rm\s+', r'chmod', r'chown']
    }

    for risk_level, patterns in risk_patterns.items():
        for pattern in patterns:
            if re.search(pattern, operation, re.IGNORECASE):
                return {'level': risk_level, 'pattern': pattern}

    return {'level': 'safe'}

def validate_tags(file_path: str) -> list:
    """TAGæ¬ è½æ¤œè¨¼"""
    if not file_path.endswith(('.py', '.js', '.ts', '.md')):
        return []

    with open(file_path, 'r') as f:
        content = f.read()

    # TAGãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢
    tag_pattern = r'@(SPEC|TEST|CODE|DOC):[A-Z]+-\d+'
    tags = re.findall(tag_pattern, content)

    if not tags:
        file_type = file_path.split('/')[-2]  # src/, tests/, docs/
        expected_tag = {
            'src': '@CODE:',
            'tests': '@TEST:',
            'docs': '@DOC:',
            '.moai/specs': '@SPEC:'
        }.get(file_type, '')

        return [f"âš ï¸ TAGæ¬ è½: {file_path} (æœŸå¾…: {expected_tag})"]

    return []

def main():
    """PreToolUse Hookãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯"""
    tool_name = os.environ.get('CLAUDE_TOOL_NAME')
    tool_args = os.environ.get('CLAUDE_TOOL_ARGS', '')
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')

    # ãƒªã‚¹ã‚¯è©•ä¾¡
    risk = check_risk(tool_name, tool_args)
    if risk['level'] in ['high', 'medium']:
        print(f"âš ï¸ ãƒªã‚¹ã‚¯æ¤œå‡º: {risk['level']} - {risk['pattern']}")
        if risk['level'] == 'high':
            response = input("ç¶šè¡Œã—ã¾ã™ã‹? (y/N): ")
            if response.lower() != 'y':
                exit(1)

    # TAGæ¤œè¨¼ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£æ™‚ï¼‰
    if tool_name in ['Write', 'Edit']:
        file_path = tool_args.split()[0] if tool_args else ''
        full_path = Path(project_dir) / file_path

        if full_path.exists():
            tag_issues = validate_tags(str(full_path))
            for issue in tag_issues:
                print(issue)

if __name__ == "__main__":
    main()
```

### PostToolUse Hook

```python
# .claude/hooks/alfred/post_tool_use.py
import json
import os
import subprocess
from pathlib import Path

def run_linting(file_path: str) -> dict:
    """ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸè‡ªå‹•ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°å®Ÿè¡Œ"""
    if file_path.endswith('.py'):
        return run_python_linting(file_path)
    elif file_path.endswith(('.js', '.ts')):
        return run_js_linting(file_path)
    elif file_path.endswith(('.go')):
        return run_go_linting(file_path)

    return {'status': 'skipped', 'reason': 'unsupported_file_type'}

def run_python_linting(file_path: str) -> dict:
    """Pythonãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°"""
    try:
        # ruffãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        result = subprocess.run(['ruff', 'format', file_path],
                              capture_output=True, text=True)

        if result.returncode != 0:
            return {'status': 'error', 'message': result.stderr}

        # ruffãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°
        result = subprocess.run(['ruff', 'check', '--fix', file_path],
                              capture_output=True, text=True)

        if result.returncode != 0:
            return {'status': 'warning', 'message': result.stderr}

        return {'status': 'success', 'message': 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°å®Œäº†'}

    except FileNotFoundError:
        return {'status': 'skipped', 'reason': 'ruff_not_installed'}

def run_tests_if_needed(file_path: str) -> dict:
    """é–¢é€£ãƒ†ã‚¹ãƒˆã®è‡ªå‹•å®Ÿè¡Œ"""
    if 'tests' not in file_path:
        return {'status': 'skipped', 'reason': 'not_test_file'}

    try:
        # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
        result = subprocess.run(['pytest', file_path, '-v'],
                              capture_output=True, text=True)

        return {
            'status': 'success' if result.returncode == 0 else 'failed',
            'output': result.stdout,
            'errors': result.stderr
        }

    except FileNotFoundError:
        return {'status': 'skipped', 'reason': 'pytest_not_installed'}

def main():
    """PostToolUse Hookãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯"""
    tool_name = os.environ.get('CLAUDE_TOOL_NAME')
    tool_args = os.environ.get('CLAUDE_TOOL_ARGS', '')
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')

    if tool_name in ['Write', 'Edit']:
        file_path = tool_args.split()[0] if tool_args else ''
        full_path = Path(project_dir) / file_path

        if full_path.exists():
            # è‡ªå‹•ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°
            lint_result = run_linting(file_path)
            if lint_result['status'] == 'success':
                print(f"âœ¨ {lint_result['message']}")

            # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆï¼‰
            if 'tests' in file_path:
                test_result = run_tests_if_needed(file_path)
                if test_result['status'] == 'success':
                    print(f"âœ… ãƒ†ã‚¹ãƒˆåˆæ ¼")
                else:
                    print(f"âŒ ãƒ†ã‚¹ãƒˆå¤±æ•—")

if __name__ == "__main__":
    main()
```

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š

### AIãƒ¢ãƒ‡ãƒ«è¨­å®š

```json
{
  "ai": {
    "default_model": "claude-3-5-sonnet-20241022",
    "fast_model": "claude-3-5-haiku-20241022",
    "reasoning_model": "claude-3-5-sonnet-20241022",
    "multimodal_model": "claude-3-5-sonnet-20241022",
    "models": {
      "claude-3-5-sonnet-20241022": {
        "context_window": 200000,
        "max_output_tokens": 8192,
        "temperature": 0.1,
        "timeout": 300,
        "retry_attempts": 3,
        "cost_per_input_token": 0.000003,
        "cost_per_output_token": 0.000015
      },
      "claude-3-5-haiku-20241022": {
        "context_window": 200000,
        "max_output_tokens": 4096,
        "temperature": 0.0,
        "timeout": 120,
        "retry_attempts": 2,
        "cost_per_input_token": 0.00000025,
        "cost_per_output_token": 0.00000125
      }
    }
  }
}
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¥è¨­å®š

```json
{
  "agents": {
    "project_manager": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.1,
      "max_tokens": 4000,
      "timeout": 180,
      "skills": ["project-init", "language-detection", "skill-recommendation"],
      "memory_retention": "session"
    },
    "spec_builder": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.2,
      "max_tokens": 6000,
      "timeout": 240,
      "skills": ["ears-authoring", "requirement-analysis", "plan-board"],
      "expertise_domains": ["requirements-engineering", "system-design"]
    },
    "code_builder": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.1,
      "max_tokens": 8000,
      "timeout": 300,
      "skills": ["tdd-implementation", "architecture-design", "code-review"],
      "sub_agents": ["implementation-planner", "tdd-implementer"]
    },
    "doc_syncer": {
      "model": "claude-3-5-haiku-20241022",
      "temperature": 0.0,
      "max_tokens": 4000,
      "timeout": 120,
      "skills": ["documentation-generation", "markdown-formatting", "api-docs"],
      "auto_sync": true
    }
  }
}
```

### ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š

```json
{
  "expert_agents": {
    "backend_expert": {
      "enabled": true,
      "auto_activate": ["backend", "api", "server", "database"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["system-design", "scalability", "performance", "security"],
      "skills": ["api-design", "database-design", "caching-strategies", "microservices"],
      "response_style": "detailed",
      "code_examples": true
    },
    "frontend_expert": {
      "enabled": true,
      "auto_activate": ["frontend", "ui", "component", "client-side"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["react", "vue", "angular", "css", "accessibility"],
      "skills": ["component-design", "state-management", "performance-optimization"],
      "response_style": "practical",
      "include_ui_mockups": true
    },
    "security_expert": {
      "enabled": true,
      "auto_activate": ["security", "authentication", "authorization", "vulnerability"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["owasp-top-10", "encryption", "authentication", "audit"],
      "skills": ["threat-modeling", "security-review", "compliance"],
      "response_style": "cautious",
      "require_approval": false
    }
  }
}
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæœ€é©åŒ–è¨­å®š

```json
{
  "agent_optimization": {
    "parallel_processing": true,
    "max_concurrent_agents": 3,
    "agent_timeout": 300,
    "memory_management": {
      "context_compression": true,
      "max_context_size": 150000,
      "priority_cutoff": 0.7
    },
    "cost_optimization": {
      "use_fast_model_for_simple_tasks": true,
      "cache_agent_responses": true,
      "cache_ttl": 3600,
      "max_cache_size_mb": 100
    },
    "performance_monitoring": {
      "track_response_times": true,
      "track_token_usage": true,
      "alert_on_slow_responses": true,
      "slow_response_threshold": 30
    }
  }
}
```

## TAGã‚·ã‚¹ãƒ†ãƒ è¨­å®š

### TAGãƒãƒªã‚·ãƒ¼è¨­å®š

```json
{
  "tags": {
    "policy": "strict",
    "format": "@TYPE:DOMAIN-NNN",
    "required_types": ["SPEC", "TEST", "CODE", "DOC"],
    "auto_assignment": true,
    "validation": {
      "enabled": true,
      "enforce_uniqueness": true,
      "check_format": true,
      "validate_domain": true
    },
    "domains": {
      "AUTH": "èªè¨¼ãŠã‚ˆã³èªå¯",
      "USER": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",
      "API": "APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ",
      "DB": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹",
      "UI": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹",
      "SEC": "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£",
      "PERF": "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",
      "DOCS": "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"
    }
  }
}
```

### TAGç”Ÿæˆãƒ«ãƒ¼ãƒ«

```json
{
  "tag_generation": {
    "auto_increment": true,
    "domain_reset": false,
    "padding": 3,
    "separator": "-",
    "examples": {
      "SPEC": "@SPEC:AUTH-001",
      "TEST": "@TEST:AUTH-001",
      "CODE": "@CODE:AUTH-001:SERVICE",
      "DOC": "@DOC:AUTH-001:API"
    }
  },
  "tag_mapping": {
    "file_patterns": {
      "src/**/*.py": "@CODE",
      "tests/**/*.py": "@TEST",
      "docs/**/*.md": "@DOC",
      ".moai/specs/**/spec.md": "@SPEC"
    },
    "content_patterns": {
      "test_*.py": "@TEST",
      "*_test.py": "@TEST",
      "conftest.py": "@TEST",
      "README.md": "@DOC",
      "CHANGELOG.md": "@DOC"
    }
  }
}
```

### TAGæ¤œè¨¼è¨­å®š

```python
# .claude/hooks/alfred/core/tag_validator.py
import re
import json
from pathlib import Path
from typing import Dict, List, Optional

class TagValidator:
    def __init__(self, config_path: str):
        with open(config_path) as f:
            self.config = json.load(f)
        self.tag_policy = self.config.get('tags', {})

    def validate_tag_format(self, tag: str) -> Dict:
        """TAGå½¢å¼æ¤œè¨¼"""
        pattern = self.tag_policy.get('format', r'@[A-Z]+:[A-Z]+-\d+')

        if not re.match(pattern, tag):
            return {
                'valid': False,
                'error': f'ç„¡åŠ¹ãªå½¢å¼ã§ã™ã€‚æœŸå¾…ã•ã‚Œã‚‹å½¢å¼: {pattern}',
                'tag': tag
            }

        return {'valid': True, 'tag': tag}

    def validate_tag_chain(self, project_dir: Path) -> Dict:
        """TAGãƒã‚§ãƒ¼ãƒ³ã®æ•´åˆæ€§æ¤œè¨¼"""
        spec_tags = self._find_tags(project_dir, pattern="@SPEC:")
        test_tags = self._find_tags(project_dir, pattern="@TEST:")
        code_tags = self._find_tags(project_dir, pattern="@CODE:")
        doc_tags = self._find_tags(project_dir, pattern="@DOC:")

        issues = []

        # å„SPECã«å¯¾å¿œã™ã‚‹TESTã€CODEã€DOCãŒã‚ã‚‹ã‹ç¢ºèª
        for spec_tag in spec_tags:
            spec_id = self._extract_tag_id(spec_tag)

            test_match = any(spec_id in tag for tag in test_tags)
            code_match = any(spec_id in tag for tag in code_tags)
            doc_match = any(spec_id in tag for tag in doc_tags)

            if not test_match:
                issues.append(f"{spec_tag}ã®TESTã‚¿ã‚°ãŒä¸è¶³ã—ã¦ã„ã¾ã™")
            if not code_match:
                issues.append(f"{spec_tag}ã®CODEã‚¿ã‚°ãŒä¸è¶³ã—ã¦ã„ã¾ã™")
            if not doc_match:
                issues.append(f"{spec_tag}ã®DOCã‚¿ã‚°ãŒä¸è¶³ã—ã¦ã„ã¾ã™")

        # å­¤ç«‹TAGæ¤œç´¢
        orphan_tags = []
        all_spec_ids = {self._extract_tag_id(tag) for tag in spec_tags}

        for tag in test_tags + code_tags + doc_tags:
            tag_id = self._extract_tag_id(tag)
            if tag_id not in all_spec_ids:
                orphan_tags.append(tag)

        return {
            'valid': len(issues) == 0,
            'issues': issues,
            'orphan_tags': orphan_tags,
            'total_tags': len(spec_tags + test_tags + code_tags + doc_tags)
        }

    def _find_tags(self, directory: Path, pattern: str) -> List[str]:
        """ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®TAGãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢"""
        tags = []
        regex_pattern = re.compile(pattern)

        for file_path in directory.rglob("*"):
            if file_path.is_file() and self._should_search_file(file_path):
                try:
                    with open(file_path, 'r', encoding='utf-8') as f:
                        content = f.read()
                        matches = regex_pattern.findall(content)
                        tags.extend(matches)
                except (UnicodeDecodeError, PermissionError):
                    continue

        return list(set(tags))

    def _should_search_file(self, file_path: Path) -> bool:
        """ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã®å¯å¦ã‚’æ±ºå®š"""
        exclude_patterns = {
            '.git', '__pycache__', 'node_modules', '.venv',
            '.DS_Store', '*.pyc', '*.log'
        }

        return not any(
            file_path.match(pattern) or pattern in str(file_path)
            for pattern in exclude_patterns
        )

    def _extract_tag_id(self, tag: str) -> str:
        """TAGã‹ã‚‰IDã‚’æŠ½å‡º"""
        match = re.search(r'@[A-Z]+:([A-Z]+-\d+)', tag)
        return match.group(1) if match else tag
```

## TRUST 5åŸå‰‡è¨­å®š

### TRUSTåŸå‰‡ã®æœ‰åŠ¹åŒ–

```json
{
  "constitution": {
    "trust_principles": {
      "enabled": true,
      "principles": {
        "test_first": {
          "enabled": true,
          "coverage_threshold": 85,
          "required_tests": ["unit", "integration"],
          "frameworks": {
            "python": ["pytest"],
            "javascript": ["jest"],
            "typescript": ["jest", "vitest"],
            "go": ["go test"]
          }
        },
        "readable": {
          "enabled": true,
          "max_function_lines": 50,
          "max_file_lines": 300,
          "naming_convention": "snake_case",
          "require_docstrings": true,
          "comment_coverage": 0.3
        },
        "unified": {
          "enabled": true,
          "architectural_consistency": true,
          "naming_consistency": true,
          "pattern_consistency": true,
          "code_style": "enforced"
        },
        "secured": {
          "enabled": true,
          "security_scan": true,
          "dependency_scan": true,
          "secret_detection": true,
          "input_validation": "required",
          "output_encoding": "required"
        },
        "trackable": {
          "enabled": true,
          "tag_system": "required",
          "git_history": "detailed",
          "change_tracking": "automatic",
          "decision_logging": "required"
        }
      }
    }
  }
}
```

### å“è³ªã‚²ãƒ¼ãƒˆè¨­å®š

```json
{
  "quality_gates": {
    "enabled": true,
    "gates": [
      {
        "name": "code_quality",
        "type": "static_analysis",
        "tools": ["ruff", "mypy", "security-scan"],
        "threshold": {
          "errors": 0,
          "warnings": 10,
          "suggestions": 50
        },
        "blocking": true
      },
      {
        "name": "test_coverage",
        "type": "test_analysis",
        "tools": ["pytest", "coverage"],
        "threshold": {
          "minimum_coverage": 85,
          "failed_tests": 0
        },
        "blocking": true
      },
      {
        "name": "security_scan",
        "type": "security_analysis",
        "tools": ["bandit", "safety"],
        "threshold": {
          "high_vulnerabilities": 0,
          "medium_vulnerabilities": 5
        },
        "blocking": true
      },
      {
        "name": "documentation",
        "type": "doc_analysis",
        "tools": ["doc_coverage"],
        "threshold": {
          "api_documentation": 100,
          "code_documentation": 80
        },
        "blocking": false
      }
    ],
    "auto_fix": {
      "enabled": true,
      "fixable_issues": ["formatting", "simple_linting"],
      "require_approval": false
    }
  }
}
```

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®š

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š

```json
{
  "user_profile": {
    "name": "ãƒ¦ãƒ¼ã‚¶ãƒ¼å",
    "nickname": "é–‹ç™ºè€…",
    "email": "user@example.com",
    "timezone": "Asia/Tokyo",
    "preferred_working_hours": {
      "start": "09:00",
      "end": "18:00",
      "breaks": ["12:00-13:00"]
    },
    "communication_style": {
      "formality": "casual",
      "verbosity": "detailed",
      "language": "ja",
      "include_emoji": true
    },
    "expertise": {
      "primary": ["python", "backend", "api"],
      "secondary": ["docker", "database", "testing"],
      "learning": ["kubernetes", "machine_learning"]
    },
    "preferences": {
      "auto_suggestions": true,
      "code_examples": true,
      "step_by_step": true,
      "ask_before_major_changes": true
    }
  }
}
```

### ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŠã‚ˆã³ãƒã‚¯ãƒ­è¨­å®š

```json
{
  "shortcuts": {
    "command_shortcuts": {
      "qp": "/alfred:1-plan",
      "qr": "/alfred:2-run",
      "qs": "/alfred:3-sync",
      "q0": "/alfred:0-project",
      "doc": "/alfred:3-sync --docs-only",
      "test": "pytest -v",
      "lint": "ruff check && ruff format"
    },
    "text_macros": {
      "todo": "// TODO: ",
      "fixme": "// FIXME: ",
      "note": "// NOTE: ",
      "spec_template": "# @SPEC:{DOMAIN}-{ID}: {TITLE}\\n\\n## æ¦‚è¦\\n\\n## è¦ä»¶\\n\\n## å—ã‘å…¥ã‚ŒåŸºæº–"
    },
    "workflow_shortcuts": {
      "new_feature": ["qp", "qr", "qs"],
      "bug_fix": ["qp --type=bug", "qr", "qs"],
      "refactor": ["qr --type=refactor", "qs"]
    }
  }
}
```

### AIå¿œç­”ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š

```json
{
  "ai_response_preferences": {
    "code_style": {
      "include_comments": true,
      "include_docstrings": true,
      "include_type_hints": true,
      "follow_project_conventions": true,
      "error_handling": "comprehensive"
    },
    "explanation_style": {
      "detail_level": "detailed",
      "include_examples": true,
      "include_alternatives": true,
      "include_rationale": true,
      "step_by_step": true
    },
    "interaction_style": {
      "ask_confirmations": true,
      "provide_options": true,
      "summarize_actions": true,
      "include_progress": true
    }
  }
}
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ

### è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š

```json
{
  "backup": {
    "enabled": true,
    "automatic": {
      "enabled": true,
      "schedule": "daily",
      "time": "02:00",
      "retention_days": 30,
      "max_backups": 10
    },
    "manual": {
      "enabled": true,
      "prompt_before_major_changes": true,
      "backup_before_sync": true
    },
    "storage": {
      "location": ".moai/backups",
      "compression": true,
      "encryption": false
    },
    "scope": {
      "include": [
        ".moai/config.json",
        ".claude/settings.json",
        ".moai/project/",
        ".moai/memory/"
      ],
      "exclude": [
        ".moai/reports/",
        ".moai/cache/",
        "*.log"
      ]
    }
  }
}
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# backup-config.sh

set -e

PROJECT_DIR="$(pwd)"
BACKUP_DIR=".moai/backups"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
BACKUP_NAME="config_backup_${TIMESTAMP}"

echo "ğŸ”„ è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆä¸­..."

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p "${BACKUP_DIR}"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
tar -czf "${BACKUP_DIR}/${BACKUP_NAME}.tar.gz" \
    .moai/config.json \
    .claude/settings.json \
    .moai/project/ \
    .moai/memory/ \
    --exclude='.moai/reports/' \
    --exclude='.moai/cache/' \
    --exclude='*.log'

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æƒ…å ±ä¿å­˜
cat > "${BACKUP_DIR}/${BACKUP_NAME}.info" << EOF
ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆæ—¥æ™‚: $(date)
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: $(basename $PROJECT_DIR)
Gitãƒ–ãƒ©ãƒ³ãƒ: $(git branch --show-current 2>/dev/null || echo 'N/A')
Gitã‚³ãƒŸãƒƒãƒˆ: $(git rev-parse --short HEAD 2>/dev/null || echo 'N/A')
å«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:
- .moai/config.json
- .claude/settings.json
- .moai/project/
- .moai/memory/
EOF

echo "âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆå®Œäº†: ${BACKUP_DIR}/${BACKUP_NAME}.tar.gz"

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
cd "${BACKUP_DIR}"
ls -t config_backup_*.tar.gz | tail -n +11 | xargs -r rm
echo "ğŸ§¹ å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸ"
```

### å¾©å…ƒã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# restore-config.sh

set -e

BACKUP_DIR=".moai/backups"

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§è¡¨ç¤º
echo "ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—:"
ls -la "${BACKUP_DIR}"/config_backup_*.tar.gz | nl

if [ $# -eq 0 ]; then
    echo -n "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç•ªå·ã‚’é¸æŠã—ã¦ãã ã•ã„ (1-${#BACKUPS}): "
    read -r SELECTION
else
    SELECTION=$1
fi

BACKUP_FILE=$(ls "${BACKUP_DIR}"/config_backup_*.tar.gz | sed -n "${SELECTION}p")

if [ ! -f "$BACKUP_FILE" ]; then
    echo "âŒ ç„¡åŠ¹ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é¸æŠã§ã™"
    exit 1
fi

echo "ğŸ”„ å¾©å…ƒä¸­: $(basename "$BACKUP_FILE")"

# ç¾åœ¨ã®è¨­å®šã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
PRE_RESTORE_BACKUP="pre_restore_${TIMESTAMP}"
tar -czf "${BACKUP_DIR}/${PRE_RESTORE_BACKUP}.tar.gz" \
    .moai/config.json \
    .claude/settings.json \
    .moai/project/ \
    .moai/memory/ \
    2>/dev/null || true

# å¾©å…ƒå®Ÿè¡Œ
tar -xzf "$BACKUP_FILE" -C .

echo "âœ… è¨­å®šã‚’å¾©å…ƒã—ã¾ã—ãŸ"
echo "ğŸ’¾ å¾©å…ƒå‰ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: ${PRE_RESTORE_BACKUP}.tar.gz"
```

## è¨­å®šæœ€é©åŒ–æˆ¦ç•¥

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

```json
{
  "performance": {
    "ai_optimization": {
      "context_compression": true,
      "max_context_tokens": 150000,
      "use_fast_model_for_simple_tasks": true,
      "simple_task_threshold": 1000,
      "cache_responses": true,
      "cache_ttl": 3600
    },
    "parallel_processing": {
      "enabled": true,
      "max_concurrent_agents": 3,
      "agent_timeout": 300,
      "load_balancing": "round_robin"
    },
    "memory_management": {
      "session_memory_limit": "1GB",
      "cache_cleanup_interval": 3600,
      "garbage_collection": "automatic"
    }
  }
}
```

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–

```json
{
  "cost_optimization": {
    "token_management": {
      "track_usage": true,
      "daily_limit": 1000000,
      "alert_threshold": 0.8,
      "cost_tracking": {
        "enabled": true,
        "currency": "USD",
        "monthly_budget": 100
      }
    },
    "model_selection": {
      "auto_optimize": true,
      "prefer_fast_model": true,
      "complexity_threshold": 0.7,
      "cost_threshold": 0.01
    },
    "caching": {
      "enabled": true,
      "intelligent_caching": true,
      "cache_hit_rate_target": 0.7,
      "cache_size_limit": "100MB"
    }
  }
}
```

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–

```json
{
  "workflow_optimization": {
    "automation_level": "high",
    "auto_approve_safe_operations": true,
    "batch_similar_operations": true,
    "parallel_independent_tasks": true,
    "predictive_suggestions": true,
    "learning_from_history": true
  },
  "user_experience": {
    "response_time_target": 2000,
    "progress_indicators": true,
    "cancel_long_operations": true,
    "undo_functionality": true,
    "quick_actions": true
  }
}
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ä¸€èˆ¬çš„ãªè¨­å®šå•é¡Œ

#### 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç ´æ

**ç—‡çŠ¶**:

```
Error: Invalid JSON in .moai/config.json
```

**è§£æ±º**:

```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
./restore-config.sh

# ã¾ãŸã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§å†ç”Ÿæˆ
moai-adk init . --restore-config
```

#### 2. æ¨©é™å•é¡Œ

**ç—‡çŠ¶**:

```
Permission denied: .claude/settings.json
```

**è§£æ±º**:

```bash
# æ¨©é™ä¿®æ­£
chmod 644 .moai/config.json
chmod 644 .claude/settings.json

# æ‰€æœ‰è€…ç¢ºèª
ls -la .moai/ .claude/
```

#### 3. Hookå‹•ä½œä¸è‰¯

**ç—‡çŠ¶**:

```
Hooks not responding
```

**è§£æ±º**:

```bash
# Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆç¢ºèª
ls -la .claude/hooks/alfred/
chmod +x .claude/hooks/alfred/*.py

# Claude Codeå†èµ·å‹•
exit
claude
```

### è¨­å®šè¨ºæ–­ãƒ„ãƒ¼ãƒ«

```bash
#!/bin/bash
# diagnose-config.sh

echo "ğŸ” MoAI-ADKè¨­å®šè¨ºæ–­"
echo "======================================"

# 1. åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
echo "ğŸ“ å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªä¸­..."
files=(
    ".moai/config.json"
    ".claude/settings.json"
    ".claude/hooks/alfred/alfred_hooks.py"
    "CLAUDE.md"
)

for file in "${files[@]}"; do
    if [ -f "$file" ]; then
        echo "âœ… $file å­˜åœ¨"
    else
        echo "âŒ $file ä¸è¶³"
    fi
done

# 2. JSONå¦¥å½“æ€§æ¤œæŸ»
echo -e "\nğŸ“‹ JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œè¨¼ä¸­..."
for json_file in .moai/config.json .claude/settings.json; do
    if [ -f "$json_file" ]; then
        if python3 -c "import json; json.load(open('$json_file'))" 2>/dev/null; then
            echo "âœ… $json_file ã¯æœ‰åŠ¹ãªJSON"
        else
            echo "âŒ $json_file ã¯ç„¡åŠ¹ãªJSON"
        fi
    fi
done

# 3. æ¨©é™ç¢ºèª
echo -e "\nğŸ” æ¨©é™ã‚’ç¢ºèªä¸­..."
for file in .moai/config.json .claude/settings.json; do
    if [ -f "$file" ]; then
        permissions=$(stat -f "%Lp" "$file" 2>/dev/null || stat -c "%a" "$file" 2>/dev/null)
        if [ "$permissions" = "644" ]; then
            echo "âœ… $file ã®æ¨©é™ã¯æ­£ã—ã„ ($permissions)"
        else
            echo "âš ï¸  $file ã®æ¨©é™ãŒç•°å¸¸ ($permissions)"
        fi
    fi
done

# 4. Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆç¢ºèª
echo -e "\nğŸª Hookã‚’ç¢ºèªä¸­..."
if [ -f ".claude/hooks/alfred/alfred_hooks.py" ]; then
    if [ -x ".claude/hooks/alfred/alfred_hooks.py" ]; then
        echo "âœ… Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å®Ÿè¡Œå¯èƒ½"
    else
        echo "âŒ Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œä¸å¯"
        echo "   å®Ÿè¡Œ: chmod +x .claude/hooks/alfred/alfred_hooks.py"
    fi
else
    echo "âŒ Hookã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä¸è¶³"
fi

# 5. ãƒãƒ¼ã‚¸ãƒ§ãƒ³äº’æ›æ€§ç¢ºèª
echo -e "\nğŸ” ãƒãƒ¼ã‚¸ãƒ§ãƒ³äº’æ›æ€§ã‚’ç¢ºèªä¸­..."
if [ -f ".moai/config.json" ]; then
    moai_version=$(python3 -c "import json; print(json.load(open('.moai/config.json')).get('moai', {}).get('version', 'unknown'))" 2>/dev/null)
    echo "ğŸ“¦ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®MoAI-ADKãƒãƒ¼ã‚¸ãƒ§ãƒ³: $moai_version"

    current_version=$(moai-adk --version 2>/dev/null | cut -d' ' -f3 || echo "unknown")
    echo "ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿MoAI-ADKãƒãƒ¼ã‚¸ãƒ§ãƒ³: $current_version"

    if [ "$moai_version" != "$current_version" ] && [ "$moai_version" != "unknown" ] && [ "$current_version" != "unknown" ]; then
        echo "âš ï¸  ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´ã‚’æ¤œå‡º"
        echo "   å®Ÿè¡Œ: moai-adk update"
    fi
fi

echo -e "\nğŸ¯ è¨ºæ–­å®Œäº†!"
```

---

ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’é€šã˜ã¦ã€MoAI-ADKãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®è¨­å®šã‚’ç†è§£ã—ã€æœ€é©åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¨­å®šã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆåŠŸã«é‡è¦ãªå½¹å‰²ã‚’æœãŸã™ãŸã‚ã€å®šæœŸçš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
