---
title: SPEC 编写示例
description: 通过实际案例学习如何编写高质量的 SPEC 文档，包括完整的 EARS 语法应用和最佳实践
---

# SPEC 编写示例

本指南通过实际项目案例，展示如何编写高质量的 SPEC 文档。每个示例都包含完整的 EARS 语法应用、验收标准定义和实际实现指导。

## 示例概述

### 案例项目：在线书店系统

我们将通过一个完整的在线书店系统来展示 SPEC 编写的各个方面：

1. **用户认证模块** (@SPEC:USER-AUTH-001)
2. **图书管理模块** (@SPEC:BOOK-MGT-001)
3. **订单管理模块** (@SPEC:ORDER-MGT-001)
4. **支付系统模块** (@SPEC:PAYMENT-001)
5. **通知系统模块** (@SPEC:NOTIFICATION-001)

### 技术栈背景

- **后端**: Python + FastAPI
- **数据库**: PostgreSQL + Redis
- **前端**: React + TypeScript
- **部署**: Docker + Kubernetes
- **测试**: pytest + Jest

---

## 示例 1: 用户认证模块

### 完整 SPEC 文档

```markdown
---
id: USER-AUTH-001
version: 1.0.0
status: approved
priority: critical
created: 2025-01-15
updated: 2025-01-20
author: @dev-team
reviewer: @tech-lead
tags: [authentication, security, user-management]
estimated_effort: 2w
estimated_complexity: high
---

# `@SPEC:USER-AUTH-001: 用户认证系统`

## 概述

实现完整的用户认证系统，包括用户注册、登录、密码重置、JWT 令牌管理等功能。系统必须确保安全性、可用性和良好的用户体验。

## Ubiquitous Requirements

- 系统必须提供用户注册功能
- 系统必须提供用户登录功能
- 系统必须提供密码重置功能
- 系统必须使用 JWT 令牌进行身份验证
- 系统必须记录所有认证相关的操作日志
- 系统必须保护用户密码等敏感数据
- 系统必须支持多设备同时登录
- 系统必须提供用户注销功能

## Event-driven Requirements

### 用户注册流程
- 当用户提供有效邮箱和符合要求的密码时，系统必须创建用户账户
- 当用户注册成功时，系统必须发送账户验证邮件
- 当用户点击验证邮件链接时，系统必须激活用户账户
- 当用户注册时邮箱已存在时，系统必须提示邮箱已被使用
- 当用户提供弱密码时，系统必须拒绝注册并提示密码要求

### 用户登录流程
- 当用户提供有效邮箱和密码时，系统必须验证身份并发放 JWT 令牌
- 当用户登录成功时，系统必须记录登录日志（IP、时间、设备信息）
- 当用户连续登录失败 5 次时，系统必须锁定账户 15 分钟
- 当用户使用已验证邮箱登录时，系统必须允许访问所有功能
- 当用户使用未验证邮箱登录时，系统必须限制部分功能

### 密码重置流程
- 当用户请求密码重置时，系统必须发送重置邮件
- 当用户点击重置邮件链接时，系统必须验证重置令牌有效性
- 当用户提供有效重置令牌时，系统必须允许设置新密码
- 当重置令牌过期时，系统必须要求重新申请重置
- 当密码重置成功时，系统必须使所有现有会话失效

### 令牌管理
- 当 JWT 令牌过期时，系统必须要求用户重新登录
- 当用户主动注销时，系统必须使当前令牌失效
- 当检测到异常登录时，系统必须撤销所有令牌
- 当用户修改密码时，系统必须撤销所有现有令牌

## State-driven Requirements

### 账户状态管理
- 当用户处于未验证状态时，系统必须限制购买、评论等功能
- 当用户处于已验证状态时，系统必须允许使用所有功能
- 当用户处于锁定状态时，系统必须拒绝所有登录尝试
- 当用户处于禁用状态时，系统必须拒绝所有操作并显示相应提示

### 会话状态管理
- 当用户处于活跃状态时，系统必须定期延长会话有效期
- 当用户处于空闲状态超过 2 小时，系统必须要求重新登录
- 当用户在多个设备登录时，系统必须支持设备管理
- 当检测到可疑登录时，系统必须要求额外验证

## Optional Requirements

### 安全增强功能
- 如果用户启用双重认证，系统必须支持 TOTP 验证
- 如果配置了短信服务，系统可以发送短信验证码
- 如果检测到异常登录，系统可以发送安全警报邮件
- 如果支持生物识别，系统可以集成指纹或面部识别

### 用户体验增强
- 如果用户提供了头像，系统可以显示用户头像
- 如果用户设置了偏好语言，系统可以显示相应语言界面
- 如果支持社交登录，系统可以集成第三方 OAuth 登录
- 如果启用了记住登录，系统可以提供长期有效的令牌

## Constraints

### 安全约束
- 用户密码长度必须在 8-128 字符之间
- 密码必须包含至少一个大写字母、一个小写字母、一个数字和一个特殊字符
- JWT 令牌密钥长度必须至少为 256 位
- API 响应时间不应该超过 200 毫秒
- 密码必须使用 bcrypt 加密存储，成本因子不低于 12
- JWT 令牌过期时间不能超过 24 小时
- 敏感操作必须有日志记录，保留时间不少于 90 天

### 业务约束
- 用户年龄必须大于 13 岁
- 同一 IP 地址在 1 小时内注册次数不能超过 5 次
- 单个用户最多可以同时在 5 个设备上登录
- 邮箱验证链接有效期必须是 24 小时
- 密码重置链接有效期必须是 1 小时

### 技术约束
- 系统必须支持至少 1000 并发用户
- 数据库查询响应时间不能超过 100 毫秒
- Redis 缓存命中率必须不低于 90%
- 系统可用性必须达到 99.9%
- 所有 API 必须使用 HTTPS 协议

## 验收标准

### 功能验收
- [ ] 用户可以使用邮箱和符合要求的密码成功注册账户
- [ ] 注册后必须验证邮箱才能使用完整功能
- [ ] 用户可以使用正确凭证成功登录并获得 JWT 令牌
- [ ] 用户可以使用重置邮件成功重置密码
- [ ] JWT 令牌可以用于访问受保护的 API 端点
- [ ] 用户可以成功注销账户
- [ ] 系统正确处理连续登录失败并锁定账户
- [ ] 用户可以管理多设备登录状态

### 安全验收
- [ ] 密码使用 bcrypt 加密存储，成本因子 ≥ 12
- [ ] JWT 令牌使用强密钥签名，密钥长度 ≥ 256 位
- [ ] API 有适当的速率限制和防暴力破解机制
- [ ] 所有输入数据都经过验证和清理
- [ ] 敏感操作有完整的日志记录
- [ ] 系统检测并防止常见的安全攻击
- [ ] 令牌在过期或撤销后立即失效

### 性能验收
- [ ] 登录 API 响应时间 < 200ms
- [ ] 注册 API 响应时间 < 500ms
- [ ] 令牌验证响应时间 < 50ms
- [ ] 系统支持 1000 并发用户
- [ ] 数据库查询经过优化，无慢查询
- [ ] Redis 缓存正常工作，命中率 ≥ 90%

### 可用性验收
- [ ] 用户界面友好，错误信息清晰明确
- [ ] 支持键盘导航和屏幕阅读器
- [ ] 响应式设计，支持移动设备
- [ ] 加载状态和进度指示清晰
- [ ] 帮助文档完整易懂

## 依赖关系

### 前置条件
- 邮件服务配置完成（SMTP 服务器设置）
- 数据库用户表已创建并优化
- JWT 密钥已安全生成和存储
- Redis 缓存服务正常运行
- SSL/TLS 证书已配置

### 后置影响
- 用户管理模块需要适配新的认证系统
- API 网关需要更新认证中间件
- 前端需要实现登录、注册界面
- 订单系统需要适配用户认证状态
- 评论系统需要验证用户权限

### 外部依赖
- 邮件服务提供商（SendGrid 或类似）
- 短信服务提供商（可选）
- 第三方 OAuth 提供商（Google、GitHub 等）
- 监控和日志服务

## 风险评估

### 技术风险
- **高风险**: JWT 令牌管理复杂性可能导致安全漏洞
  - 影响: 可能导致未授权访问
  - 概率: 中等
  - 缓解措施: 使用成熟的 JWT 库，定期安全审计，实施令牌黑名单机制

- **中等风险**: 高并发下的会话管理性能问题
  - 影响: 系统响应变慢，用户体验下降
  - 概率: 中等
  - 缓解措施: 使用 Redis 集群，实施会话缓存，负载测试优化

- **低风险**: 邮件服务依赖可能影响注册流程
  - 影响: 用户无法完成注册验证
  - 概率: 低
  - 缓解措施: 多邮件服务商备选，邮件队列机制，失败重试策略

### 业务风险
- **高风险**: 安全漏洞可能导致用户数据泄露
  - 影响: 声誉损失，法律风险，用户流失
  - 概率: 低
  - 缓解措施: 严格遵循安全最佳实践，定期渗透测试，安全培训

- **中等风险**: 用户体验不佳可能影响注册转化率
  - 影响: 用户增长缓慢，收入减少
  - 概率: 中等
  - 缓解措施: 用户测试，A/B 测试，持续优化用户界面

- **低风险**: 合规要求变化可能影响系统设计
  - 影响: 需要重新设计部分功能
  - 概率: 低
  - 缓解措施: 关注法规变化，灵活的架构设计，合规专家咨询

### 缓解措施详细计划
1. **安全措施实施**
   - 第一周: 代码安全审查和安全工具配置
   - 第二周: 渗透测试和安全漏洞修复
   - 第三周: 安全监控和告警系统部署
   - 持续: 定期安全审计和更新

2. **性能优化计划**
   - 第一周: 数据库查询优化和索引添加
   - 第二周: Redis 配置优化和缓存策略实施
   - 第三周: 负载测试和性能调优
   - 持续: 性能监控和优化

3. **用户体验改进**
   - 第一周: 用户界面原型设计和用户测试
   - 第二周: 界面实现和响应式适配
   - 第三周: 用户反馈收集和优化
   - 持续: 用户体验监控和改进

## 实施计划

### 第一阶段：核心认证功能（1 周）
- [ ] 用户注册 API 开发
- [ ] 密码验证和加密实现
- [ ] JWT 令牌生成和验证
- [ ] 基础登录功能实现
- [ ] 单元测试编写

### 第二阶段：安全和验证（1 周）
- [ ] 邮箱验证功能实现
- [ ] 密码重置功能开发
- [ ] 账户锁定机制实现
- [ ] 安全日志记录
- [ ] 集成测试编写

### 第三阶段：用户体验优化（0.5 周）
- [ ] 多设备登录管理
- [ ] 用户界面优化
- [ ] 错误处理完善
- [ ] 性能优化
- [ ] 端到端测试

## 验收测试

### 测试场景清单
```gherkin
Feature: 用户认证
  作为一个新用户
  我希望能够注册、登录和管理我的账户
  以便安全地使用在线书店服务

Scenario: 成功的用户注册
  Given 我是一个新用户
  When 我在注册页面提供有效的邮箱 "user@example.com" 和符合要求的密码 "SecurePass123!"
  Then 我应该收到验证邮件
  And 我的账户应该处于未验证状态
  And 我不能使用需要验证的功能

Scenario: 成功的用户登录
  Given 我是一个已验证的用户
  When 我提供正确的邮箱和密码
  Then 我应该收到 JWT 访问令牌
  And 令牌应该包含我的用户信息和权限
  And 我应该能够访问受保护的资源

Scenario: 密码重置流程
  Given 我忘记了密码
  When 我请求密码重置并提供我的邮箱
  Then 我应该收到密码重置邮件
  When 我点击重置链接并设置新密码
  Then 我应该能够使用新密码登录
  And 所有现有的会话都应该失效

Scenario: 账户安全保护
  Given 一个攻击者尝试暴力破解我的账户
  When 他连续输入错误密码 5 次
  Then 我的账户应该被锁定 15 分钟
  And 我应该收到安全警报邮件
```

## 相关链接

- `@SPEC:BOOK-MGT-001`: 图书管理模块（依赖用户认证）
- `@SPEC:ORDER-MGT-001`: 订单管理模块（依赖用户认证）
- `@SPEC:PAYMENT-001`: 支付系统模块（依赖用户认证）
- `@CODE:USER-AUTH-001`: 用户认证实现代码
- `@TEST:USER-AUTH-001`: 用户认证测试套件
- `@DOC:USER-AUTH-001`: 用户认证技术文档

---

## 示例 2: 图书管理模块

### 核心 SPEC 内容

```markdown
---
id: BOOK-MGT-001
version: 1.0.0
status: in-progress
priority: high
created: 2025-01-16
updated: 2025-01-21
author: @backend-team
reviewer: @product-manager
tags: [book-management, inventory, search]
estimated_effort: 3w
estimated_complexity: medium
---

# `@SPEC:BOOK-MGT-001: 图书管理系统`

## 概述

实现完整的图书管理系统，包括图书信息管理、库存管理、搜索功能、分类管理等功能。系统必须支持高并发查询和实时库存更新。

## Ubiquitous Requirements

- 系统必须提供图书信息录入功能
- 系统必须提供图书库存管理功能
- 系统必须提供图书搜索功能
- 系统必须支持图书分类管理
- 系统必须提供图书评价和评论功能
- 系统必须支持图书推荐功能
- 系统必须记录图书访问统计

## Event-driven Requirements

### 图书信息管理
- 当管理员添加新书时，系统必须验证图书信息的完整性
- 当图书信息更新时，系统必须保留变更历史
- 当图书信息包含违禁内容时，系统必须拒绝并通知管理员
- 当图书重复录入时，系统必须提示并要求合并或确认

### 库存管理
- 当图书售出时，系统必须实时更新库存数量
- 当库存低于阈值时，系统必须自动发送补货提醒
- 当图书入库时，系统必须更新库存并记录入库信息
- 当库存为 0 时，系统必须自动标记为缺货状态

### 搜索功能
- 当用户搜索图书时，系统必须支持关键词、分类、作者等多种搜索方式
- 当搜索结果为空时，系统必须提供相关推荐
- 当搜索包含拼写错误时，系统必须提供纠错建议
- 当用户使用高级搜索时，系统必须支持多条件组合查询

## State-driven Requirements

### 图书状态管理
- 当图书处于上架状态时，系统必须允许用户搜索和购买
- 当图书处于下架状态时，系统必须隐藏图书但仍允许管理员访问
- 当图书处于预售状态时，系统必须显示预计发货时间
- 当图书处于缺货状态时，系统必须允许加入缺货提醒

### 价格管理
- 当图书处于促销状态时，系统必须显示促销价格
- 当图书恢复原价时，系统必须更新所有相关显示
- 当价格变动时，系统必须通知已收藏该书的用户

## Optional Requirements

### 高级搜索功能
- 如果用户登录，系统可以提供个性化搜索推荐
- 如果支持语音搜索，系统可以集成语音识别功能
- 如果启用图像搜索，系统可以支持图书封面上传搜索

### 社交功能
- 如果用户登录，系统可以显示好友的图书评价
- 如果支持社交分享，系统可以提供图书分享功能
- 如果启用书单功能，系统可以允许用户创建和管理书单

## Constraints

### 数据约束
- 图书 ISBN 号必须是有效的 10 位或 13 位格式
- 图书标题长度不能超过 200 字符
- 图书描述长度不能超过 2000 字符
- 图书价格必须在 0.01-9999.99 之间
- 图书封面图片大小不能超过 5MB

### 性能约束
- 图书搜索响应时间不能超过 300 毫秒
- 系统必须支持每秒 1000 次搜索请求
- 库存更新延迟不能超过 1 秒
- 图书详情页面加载时间不能超过 2 秒

## 验收标准

### 功能验收
- [ ] 管理员可以成功添加、编辑、删除图书信息
- [ ] 系统正确处理库存更新和缺货状态
- [ ] 用户可以使用多种方式搜索图书并获得准确结果
- [ ] 图书分类管理功能正常工作
- [ ] 图书评价和评论功能完整可用
- [ ] 系统正确处理促销价格变更

### 性能验收
- [ ] 搜索响应时间 < 300ms
- [ ] 支持 1000 QPS 的搜索请求
- [ ] 库存更新实时性 < 1s
- [ ] 系统在 10000 种图书规模下正常运行

---
```

## 示例 3: 订单管理模块

### 核心 SPEC 内容

```markdown
---
id: ORDER-MGT-001
version: 1.0.0
status: draft
priority: critical
created: 2025-01-17
updated: 2025-01-22
author: @fullstack-team
reviewer: @business-analyst
tags: [order-management, e-commerce, payment-integration]
estimated_effort: 4w
estimated_complexity: high
---

# `@SPEC:ORDER-MGT-001: 订单管理系统`

## 概述

实现完整的订单管理系统，包括购物车管理、订单创建、支付集成、订单状态跟踪、物流管理等功能。系统必须确保订单处理的准确性和一致性。

## Ubiquitous Requirements

- 系统必须提供购物车管理功能
- 系统必须提供订单创建功能
- 系统必须支持多种支付方式
- 系统必须提供订单状态跟踪
- 系统必须支持订单修改和取消
- 系统必须提供订单搜索和筛选
- 系统必须记录订单操作历史

## Event-driven Requirements

### 购物车管理
- 当用户添加商品到购物车时，系统必须验证商品可用性和库存
- 当购物车商品数量变更时，系统必须实时计算总价
- 当购物车商品失效时，系统必须通知用户并移除商品
- 当用户会话过期时，系统必须保存购物车内容

### 订单处理
- 当用户提交订单时，系统必须验证商品库存和价格
- 当订单创建成功时，系统必须生成唯一订单号
- 当支付成功时，系统必须更新订单状态并通知库存系统
- 当支付失败时，系统必须保留订单并允许重新支付

### 物流管理
- 当商家发货时，系统必须更新订单状态并提供物流信息
- 当物流状态更新时，系统必须通知用户
- 当用户确认收货时，系统必须更新订单状态为已完成
- 当订单超期未收货时，系统必须发送提醒

## State-driven Requirements

### 订单状态控制
- 当订单处于待支付状态时，系统必须禁止修改商品和地址
- 当订单处于已支付状态时，系统必须禁止取消订单（特殊情况下除外）
- 当订单处于配送中状态时，系统必须禁止修改收货地址
- 当订单处于已完成状态时，系统必须允许用户评价商品

### 支付状态管理
- 当订单处于未支付状态时，系统必须显示支付倒计时
- 当订单处于支付处理中状态时，系统必须禁止重复支付
- 当订单处于支付失败状态时，系统必须提供重新支付选项

## Constraints

### 业务约束
- 订单金额必须大于 0 且小于 50000 元
- 订单商品数量不能超过 100 件
- 未支付订单必须在 30 分钟内完成支付
- 已支付订单只能在 24 小时内申请取消
- 退货申请必须在收货后 7 天内提出

### 技术约束
- 订单创建响应时间不能超过 500 毫秒
- 系统必须支持每秒 500 个订单创建请求
- 订单数据必须持久化存储，保证不丢失
- 库存扣减必须是原子操作

## 验收标准

### 功能验收
- [ ] 用户可以正常管理购物车商品
- [ ] 订单创建流程完整且准确
- [ ] 多种支付方式正常工作
- [ ] 订单状态跟踪准确及时
- [ ] 订单搜索和筛选功能正常
- [ ] 物流信息更新及时准确

### 业务验收
- [ ] 订单库存扣减准确无误
- [ ] 价格计算准确，包含税费和运费
- [ ] 优惠券和折扣正确应用
- [ ] 订单取消和退款流程正常
- [ ] 异常情况处理得当

---
```

## SPEC 编写技巧和最佳实践

### 1. 需求分解技巧

#### 自顶向下分解
```yaml
第一层: 功能模块
  用户认证系统
  图书管理系统
  订单管理系统

第二层: 子功能
  用户认证 → 注册、登录、密码重置、令牌管理
  图书管理 → 信息录入、库存管理、搜索功能
  订单管理 → 购物车、订单创建、支付处理

第三层: 具体场景
  用户注册 → 邮箱验证、密码强度、重复检测
  库存管理 → 实时更新、缺货提醒、批量操作
  支付处理 → 多支付方式、失败重试、安全验证
```

#### 按用户角色分解
```yaml
用户角色:
  普通用户: 注册、登录、浏览、购买、评价
  管理员: 商品管理、订单处理、用户管理、数据分析
  系统管理员: 系统配置、监控、备份、安全设置

每个角色的典型流程:
  普通用户: 发现商品 → 加入购物车 → 下单支付 → 收货评价
  管理员: 上架商品 → 设置价格 → 处理订单 → 售后服务
```

### 2. EARS 语法应用技巧

#### 选择合适的模式
```yaml
功能描述选择指南:

系统核心功能 → Ubiquitous Requirements
"系统必须提供用户注册功能"

用户操作触发 → Event-driven Requirements
"当用户点击注册按钮时，系统必须验证输入"

状态权限控制 → State-driven Requirements
"当用户未认证时，系统必须限制访问"

可选增强功能 → Optional Requirements
"如果支持第三方登录，系统可以集成 OAuth"

质量标准约束 → Constraints
"密码长度必须在 8-128 字符之间"
```

#### 避免 EARS 常见错误
```yaml
❌ 常见错误:

1. 模式选择错误
   "当系统启动时，系统必须提供用户注册" → 应该是 Ubiquitous

2. 条件描述模糊
   "当有问题时，系统要处理" → 条件不明确

3. 响应行为不具体
   "当用户登录时，系统要响应" → 响应不明确

4. 约束条件不量化
   "系统响应时间要快" → 缺少量化指标

✅ 正确写法:

1. 正确的模式选择
   "系统必须提供用户注册功能" → Ubiquitous Requirements

2. 明确的条件描述
   "当用户输入错误密码超过 5 次时，系统必须锁定账户"

3. 具体的响应行为
   "当用户成功登录时，系统必须发放 JWT 令牌并跳转到主页"

4. 量化的约束条件
   "API 响应时间不能超过 200 毫秒"
```

### 3. 验收标准编写技巧

#### SMART 原则应用
```yaml
Specific (具体的):
  ❌ "系统应该运行良好"
  ✅ "用户登录 API 响应时间必须小于 200ms"

Measurable (可测量的):
  ❌ "提高系统性能"
  ✅ "系统必须支持 1000 并发用户"

Achievable (可实现的):
  ❌ "系统响应时间为 0ms"
  ✅ "系统响应时间小于 100ms"

Relevant (相关的):
  ❌ "界面颜色要美观"
  ✅ "错误提示信息要清晰易懂"

Time-bound (有时间限制的):
  ❌ "系统要尽快优化"
  ✅ "页面加载时间必须在 3 秒内完成"
```

#### 测试驱动验收标准
```yaml
每个验收标准对应可执行的测试:

验收标准:
  "用户可以使用邮箱和密码成功登录"

对应测试用例:
```python
def test_user_login_success():
    """测试用户成功登录"""
    # Given 有效用户凭证
    user_data = {
        "email": "test@example.com",
        "password": "ValidPassword123!"
    }

    # When 用户登录
    response = client.post("/api/login", json=user_data)

    # Then 登录成功并获得令牌
    assert response.status_code == 200
    assert "access_token" in response.json()
    assert response.json()["user"]["email"] == user_data["email"]
```

### 4. 风险评估技巧

#### 风险矩阵应用
```yaml
风险评估矩阵:

            影响
      低    中    高
概率  低   低    中    高
     中   中    高    极高
     高   高    极高   极高

风险等级应对:
- 极高: 立即处理，每日跟踪
- 高: 优先处理，每周跟踪
- 中: 计划处理，双周跟踪
- 低: 监控，月度跟踪
```

#### 具体风险缓解措施
```yaml
技术风险缓解:
风险: JWT 令牌管理复杂性
缓解措施:
  1. 技术措施: 使用成熟的 JWT 库 (PyJWT)
  2. 流程措施: 定期安全审计
  3. 工具措施: 令牌黑名单机制
  4. 人员措施: 安全培训

业务风险缓解:
风险: 用户体验不佳影响转化率
缓解措施:
  1. 用户研究: 用户测试和反馈收集
  2. 数据分析: 转化率漏斗分析
  3. 迭代优化: A/B 测试和持续改进
  4. 竞品分析: 学习最佳实践
```

### 5. 实施计划制定技巧

#### 工作分解结构 (WBS)
```yaml
WBS 分层结构:

1.0 用户认证模块
  1.1 数据模型设计 (2天)
  1.2 API 开发 (5天)
    1.2.1 注册 API (1天)
    1.2.2 登录 API (1天)
    1.2.3 密码重置 API (1天)
    1.2.4 令牌管理 API (1天)
    1.2.5 用户信息 API (1天)
  1.3 前端界面 (3天)
  1.4 测试编写 (3天)
  1.5 集成测试 (2天)
```

#### 关键路径法
```yaml
关键路径识别:
用户认证模块关键路径:
1. 数据模型设计 → API 开发 → 前端集成 → 测试

并行任务:
- API 开发的同时进行前端界面设计
- 测试编写在 API 开发完成后开始

关键路径优化:
- 提前开始可以并行的任务
- 合理分配资源，避免关键路径资源瓶颈
- 设置缓冲时间应对不确定性
```

## SPEC 质量检查清单

### 1. 结构完整性检查

```yaml
基本信息完整:
- [ ] SPEC ID 格式正确 (DOMAIN-NNN)
- [ ] 版本号遵循语义化版本
- [ ] 状态清晰明确
- [ ] 优先级设置合理
- [ ] 创建和更新时间准确
- [ ] 作者和审查者信息完整

文档结构完整:
- [ ] 标题清晰明确
- [ ] 概述简洁完整
- [ ] 五种 EARS 模式都有应用
- [ ] 验收标准具体可测
- [ ] 依赖关系明确
- [ ] 风险评估全面
```

### 2. 内容质量检查

```yaml
需求质量:
- [ ] 需求描述清晰无歧义
- [ ] EARS 语法使用正确
- [ ] 需求覆盖完整
- [ ] 需求间无冲突
- [ ] 约束条件量化可测

验收标准质量:
- [ ] 验收标准与需求对应
- [ ] 验收标准具体可测
- [ ] 测试场景覆盖完整
- [ ] 边界条件考虑充分
- [ ] 异常处理包含其中
```

### 3. 可追溯性检查

```yaml
@TAG 使用:
- [ ] @TAG 语法正确
- [ ] @SPEC 有对应的 @CODE
- [ ] @CODE 有对应的 @TEST
- [ ] 完整的 @TAG 链存在
- [ ] 链接关系正确

文档一致性:
- [ ] 文档间引用正确
- [ ] 版本号一致
- [ ] 术语使用统一
- [ ] 格式规范一致
```

## 总结

通过这些实际示例，我们可以看到高质量 SPEC 文档的关键特征：

### 1. 完整性
- 覆盖所有功能需求和非功能需求
- 包含详细的验收标准和测试场景
- 考虑边界条件和异常情况

### 2. 清晰性
- 使用标准的 EARS 语法
- 避免模糊和歧义的表达
- 提供具体的、可测量的标准

### 3. 可实现性
- 技术方案可行
- 时间和资源估算合理
- 风险识别和缓解措施充分

### 4. 可追溯性
- 完整的 @TAG 链接
- 清晰的依赖关系
- 与其他文档的一致性

### 5. 实用性
- 详细的实施计划
- 清晰的验收标准
- 实用的风险评估

通过学习和应用这些示例和技巧，您可以编写出高质量的 SPEC 文档，为项目成功奠定坚实的基础。

### 下一步

- [开始第一个 SPEC 项目](../alfred/1-plan.md)
- [学习 TDD 实践方法](../tdd/)
- [掌握项目管理技巧](../project/)
- [了解高级开发主题](../advanced/)

通过不断实践和改进，您将能够编写出专业级的 SPEC 文档，成为团队中的需求工程专家。