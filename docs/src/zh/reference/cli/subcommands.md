# Alfred å·¥ä½œæµå‘½ä»¤æŒ‡å—

æ§åˆ¶ MoAI-ADK æ ¸å¿ƒå››æ­¥å·¥ä½œæµçš„ Alfred å‘½ä»¤ã€‚

> **é‡è¦**: Alfred å‘½ä»¤**ä»…åœ¨ Claude Code ç¯å¢ƒä¸­**å¯ç”¨ã€‚

## å·¥ä½œæµæ¦‚è§ˆ

```
/alfred:0-project (åˆå§‹åŒ–)
    â†“
/alfred:1-plan (è®¡åˆ’: SPEC ç¼–å†™)
    â†“
/alfred:2-run (æ‰§è¡Œ: TDD å¼€å‘)
    â†“
/alfred:3-sync (åŒæ­¥: æ–‡æ¡£/éªŒè¯)
    â†“
å®Œæˆå¹¶åˆ›å»º PR
```

______________________________________________________________________

## 1. /alfred:0-project

**é¡¹ç›®é…ç½®å’Œåˆå§‹åŒ–**

### è¯­æ³•

```
/alfred:0-project [option]
```

### é€‰é¡¹

```
setting     æŸ¥è¯¢å½“å‰é…ç½®
update      ä¿®æ”¹é¡¹ç›®é…ç½®
```

### ä¸»è¦åŠŸèƒ½

- ğŸ¯ è®¾ç½®é¡¹ç›®å…ƒæ•°æ® (åç§°ã€æè¿°ã€è¯­è¨€)
- ğŸŒ é€‰æ‹©å¯¹è¯è¯­è¨€ (éŸ©è¯­ã€è‹±è¯­ã€æ—¥è¯­ã€ä¸­æ–‡)
- ğŸ”§ é€‰æ‹©å¼€å‘æ¨¡å¼ (solo/team/org)
- ğŸ“‹ åˆå§‹åŒ– SPEC-First TDD æ£€æŸ¥æ¸…å•
- ğŸ·ï¸ æ¿€æ´» TAG ç³»ç»Ÿ
- ğŸ“Š è®¾ç½®æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ (é»˜è®¤ 85%)

### äº¤äº’ç¤ºä¾‹

```
/alfred:0-project

> Alfred: è¯·è¾“å…¥é¡¹ç›®åç§°
ç”¨æˆ·: Hello World API

> Alfred: é¡¹ç›®æè¿°?
ç”¨æˆ·: ç®€å•çš„ REST API æ•™ç¨‹

> Alfred: ä¸»è¦ä½¿ç”¨çš„è¯­è¨€?
ç”¨æˆ·: [1] Python  [2] TypeScript  [3] Go
é€‰æ‹©: 1

> Alfred: å¯¹è¯è¯­è¨€?
ç”¨æˆ·: [1] éŸ©è¯­  [2] English
é€‰æ‹©: 1

> Alfred: å¼€å‘æ¨¡å¼?
ç”¨æˆ·: [1] ç‹¬ç«‹  [2] å›¢é˜Ÿ  [3] ç»„ç»‡
é€‰æ‹©: 1

âœ… é¡¹ç›®åˆå§‹åŒ–å®Œæˆ!
```

### ç”Ÿæˆçš„é…ç½®

`.moai/config.json`:

```json
{
  "project": {
    "name": "Hello World API",
    "description": "ç®€å•çš„ REST API æ•™ç¨‹",
    "language": "python"
  },
  "language": {
    "conversation_language": "ko",
    "conversation_language_name": "í•œêµ­ì–´"
  },
  "constitution": {
    "test_coverage_minimum": 85
  }
}
```

______________________________________________________________________

## 2. /alfred:1-plan

**SPEC ç¼–å†™å’Œè®¡åˆ’åˆ¶å®š**

### è¯­æ³•

```
/alfred:1-plan "æ ‡é¢˜1" "æ ‡é¢˜2" ... | SPEC-ID ä¿®æ”¹å†…å®¹
```

### ä½¿ç”¨æ¡ˆä¾‹

#### æ–° SPEC ç¼–å†™

```
/alfred:1-plan "ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"
```

æˆ–å¤šä¸ª SPEC:

```
/alfred:1-plan "ç™»å½•åŠŸèƒ½" "æ³¨å†Œ" "å¯†ç é‡ç½®"
```

#### ä¿®æ”¹ç°æœ‰ SPEC

```
/alfred:1-plan SPEC-001 "ç™»å½•åŠŸèƒ½ (ä¿®æ”¹: æ·»åŠ  OAuth 2.0)"
```

### Alfred çš„è®¡åˆ’åˆ¶å®šè¿‡ç¨‹

1. **æ„å›¾ç†è§£**: åˆ†æå’Œæ¾„æ¸…è¯·æ±‚

   - å¦‚æœæ¨¡ç³Šï¼Œä½¿ç”¨ AskUserQuestion æ”¶é›†é¢å¤–ä¿¡æ¯

2. **åˆ¶å®šè®¡åˆ’**: ç»“æ„åŒ–æ‰§è¡Œç­–ç•¥

   - ä»»åŠ¡åˆ†è§£ (Decomposition)
   - ä¾èµ–å…³ç³»åˆ†æ (Dependency Analysis)
   - å¹¶è¡ŒåŒ–æœºä¼šè¯†åˆ« (Parallelization)
   - æ˜ç¡®å—å½±å“çš„æ–‡ä»¶ (File List)
   - é¢„ä¼°æ—¶é—´ (Time Estimation)

3. **ç”¨æˆ·æ‰¹å‡†**: æäº¤è®¡åˆ’å¹¶è¯·æ±‚æ‰¹å‡†

   ```
   Alfred: å·²æŒ‰ä»¥ä¸‹æ–¹å¼åˆ¶å®šè®¡åˆ’ã€‚æ˜¯å¦ç»§ç»­?

   ğŸ“‹ è®¡åˆ’æ‘˜è¦:
   - SPEC-001: ç™»å½•åŠŸèƒ½
   - SPEC-002: æ³¨å†Œ
   - å½±å“æ–‡ä»¶: 5ä¸ª
   - é¢„ä¼°æ—¶é—´: 30åˆ†é’Ÿ

   [ç»§ç»­] [ä¿®æ”¹] [å–æ¶ˆ]
   ```

4. **TodoWrite åˆå§‹åŒ–**: å¼€å§‹è·Ÿè¸ªæ‰€æœ‰ä»»åŠ¡é¡¹

### ç”Ÿæˆçš„æ–‡ä»¶

```
.moai/specs/SPEC-001/
â”œâ”€â”€ spec.md              # SPEC æ–‡æ¡£ (EARS æ ¼å¼)
â”œâ”€â”€ requirements.md      # éœ€æ±‚è¯¦æƒ…
â””â”€â”€ tests.md            # æµ‹è¯•è®¡åˆ’
```

### SPEC æ–‡æ¡£ç»“æ„

```markdown
# SPEC-001: ç™»å½•åŠŸèƒ½

## éœ€æ±‚ (EARS æ ¼å¼)

### åŸºæœ¬éœ€æ±‚
- GIVEN: ç”¨æˆ·è®¿é—®ç™»å½•é¡µé¢
  WHEN: è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶å’Œå¯†ç 
  THEN: åˆ›å»ºä¼šè¯å¹¶é‡å®šå‘åˆ°ä»ªè¡¨æ¿

### é”™è¯¯å¤„ç†
- GIVEN: ç™»å½•é¡µé¢
  WHEN: è¾“å…¥é”™è¯¯çš„å¯†ç 
  THEN: æ˜¾ç¤º"å¯†ç ä¸åŒ¹é…"æ¶ˆæ¯

## æµ‹è¯•è®¡åˆ’
- [ ] ä½¿ç”¨æœ‰æ•ˆå‡­æ®ç™»å½•æˆåŠŸ
- [ ] ä½¿ç”¨æ— æ•ˆå‡­æ®ç™»å½•å¤±è´¥
- [ ] æ–°ç”¨æˆ·æ³¨å†Œåç™»å½•
```

______________________________________________________________________

## 3. /alfred:2-run

**TDD å®æ–½æ‰§è¡Œ**

### è¯­æ³•

```
/alfred:2-run [SPEC-ID | "all"]
```

### ä½¿ç”¨æ¡ˆä¾‹

#### å¼€å‘ç‰¹å®š SPEC

```
/alfred:2-run SPEC-001
```

#### å¼€å‘æ‰€æœ‰ SPEC

```
/alfred:2-run all
```

### æ‰§è¡Œå·¥ä½œæµ

Alfred ä¸¥æ ¼éµå¾ª TDD çš„ä¸‰ä¸ªé˜¶æ®µ:

#### Phase 1: RED (çº¢è‰²) - ç¼–å†™å¤±è´¥çš„æµ‹è¯•

```
Alfred: å¼€å§‹ RED é˜¶æ®µ
- åˆ›å»ºæµ‹è¯•æ–‡ä»¶: tests/test_login.py
- ç¼–å†™æµ‹è¯• (åŸºäº SPEC)
- æ‰§è¡Œ â†’ å…¨éƒ¨å¤±è´¥ âŒ

âœ… RED é˜¶æ®µå®Œæˆ
æ‰€æœ‰æµ‹è¯•éƒ½å¤„äºå¤±è´¥çŠ¶æ€ã€‚

[è¿›å…¥ GREEN é˜¶æ®µ]
```

**æµ‹è¯•ç¤ºä¾‹**:

```python
# tests/test_login.py @TEST:SPEC-001:*
import pytest
from app import login

def test_valid_login():
    """GIVEN: ç™»å½•é¡µé¢
       WHEN: æœ‰æ•ˆå‡­æ®
       THEN: åˆ›å»ºä¼šè¯"""
    result = login("user@example.com", "password123")
    assert result["status"] == "success"
    assert result["session"] is not None

def test_invalid_password():
    """GIVEN: ç™»å½•é¡µé¢
       WHEN: é”™è¯¯çš„å¯†ç 
       THEN: é”™è¯¯æ¶ˆæ¯"""
    result = login("user@example.com", "wrong")
    assert result["status"] == "error"
    assert "å¯†ç " in result["message"]
```

#### Phase 2: GREEN (ç»¿è‰²) - æœ€å°å®ç°ä½¿æµ‹è¯•é€šè¿‡

```
Alfred: å¼€å§‹ GREEN é˜¶æ®µ
- æ·»åŠ æœ€å°å®ç°: app.py
- è¿è¡Œæµ‹è¯• â†’ å…¨éƒ¨é€šè¿‡ âœ…

âœ… GREEN é˜¶æ®µå®Œæˆ
æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ã€‚

[è¿›å…¥ REFACTOR é˜¶æ®µ]
```

**å®ç°ç¤ºä¾‹**:

```python
# app.py @CODE:SPEC-001:*
def login(email, password):
    """ç™»å½•å¤„ç†"""
    if password == "password123":
        return {
            "status": "success",
            "session": "session_123"
        }
    else:
        return {
            "status": "error",
            "message": "å¯†ç ä¸åŒ¹é…"
        }
```

#### Phase 3: REFACTOR (é‡æ„) - æ”¹è¿›ä»£ç è´¨é‡

```
Alfred: å¼€å§‹ REFACTOR é˜¶æ®µ
- æ”¹è¿›é”™è¯¯å¤„ç†
- æ·»åŠ æ•°æ®éªŒè¯
- ä»£ç æ¸…ç†

âœ… REFACTOR é˜¶æ®µå®Œæˆ
æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œä»£ç è´¨é‡æ”¹è¿›ã€‚

[æ‰€æœ‰å·¥ä½œå®Œæˆ]
```

**æ”¹è¿›åçš„å®ç°**:

```python
# app.py (æ”¹è¿›å)
from flask import session
from werkzeug.security import check_password_hash
from models import User

def login(email, password):
    """ç™»å½•å¤„ç† (æ”¹è¿›ç‰ˆæœ¬)"""
    # è¾“å…¥éªŒè¯
    if not email or not password:
        raise ValueError("ç”µå­é‚®ä»¶å’Œå¯†ç æ˜¯å¿…éœ€çš„")

    # æŸ¥è¯¢ç”¨æˆ·
    user = User.query.filter_by(email=email).first()
    if not user:
        return {
            "status": "error",
            "message": "æœªæ³¨å†Œçš„ç”¨æˆ·"
        }

    # å¯†ç éªŒè¯
    if not check_password_hash(user.password_hash, password):
        return {
            "status": "error",
            "message": "å¯†ç ä¸åŒ¹é…"
        }

    # åˆ›å»ºä¼šè¯
    session['user_id'] = user.id
    return {
        "status": "success",
        "session": session.sid,
        "user": {
            "id": user.id,
            "email": user.email,
            "name": user.name
        }
    }
```

### TodoWrite è·Ÿè¸ª

Alfred è‡ªåŠ¨è·Ÿè¸ªæ¯ä¸ªé˜¶æ®µ:

```
[in_progress] RED: SPEC-001 æµ‹è¯•ç¼–å†™
[completed]   RED: SPEC-001 æµ‹è¯•ç¼–å†™
[in_progress] GREEN: SPEC-001 æœ€å°å®ç°
[completed]   GREEN: SPEC-001 æœ€å°å®ç°
[in_progress] REFACTOR: SPEC-001 ä»£ç æ”¹è¿›
[completed]   REFACTOR: SPEC-001 ä»£ç æ”¹è¿›
```

______________________________________________________________________

## 4. /alfred:3-sync

**æ–‡æ¡£åŒæ­¥å’ŒéªŒè¯**

### è¯­æ³•

```
/alfred:3-sync [Mode] [Target] [Path]
```

### æ¨¡å¼ (Mode)

```
auto         è‡ªåŠ¨åŒæ­¥ (æ¨è)
force        å¼ºåˆ¶åŒæ­¥
status       ä»…æŸ¥è¯¢å½“å‰çŠ¶æ€
project      å®Œæ•´é¡¹ç›®éªŒè¯
```

### ç›®æ ‡ (Target)

```
SPEC-001         åŒæ­¥ç‰¹å®š SPEC
all              åŒæ­¥æ‰€æœ‰ SPEC
```

### ä¸»è¦åŠŸèƒ½

1. **æ–‡æ¡£ç”Ÿæˆ** (æ ¹æ®ç”Ÿæˆé…ç½®)

   - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
   - æ¶æ„å›¾
   - éƒ¨ç½²æŒ‡å—

2. **TAG éªŒè¯**

   - æ£€æŸ¥ SPEC â†’ TEST â†’ CODE â†’ DOC è¿æ¥
   - æ£€æµ‹å¹¶åˆ é™¤å­¤ç«‹çš„ TAG
   - ç¡®è®¤å¯è¿½æº¯æ€§å®Œæ•´æ€§

3. **è´¨é‡éªŒè¯**

   - ç¡®è®¤æµ‹è¯•è¦†ç›–ç‡ 85% ä»¥ä¸Š
   - ç¡®è®¤æ‰€æœ‰æµ‹è¯•é€šè¿‡
   - ä»£ç é£æ ¼æ£€æŸ¥

4. **PR åˆ›å»º** (å›¢é˜Ÿæ¨¡å¼)

   - é’ˆå¯¹ develop åˆ†æ”¯åˆ›å»º PR
   - å˜æ›´æ‘˜è¦
   - åŒ…å«éªŒè¯ç»“æœ

### åŒæ­¥è¿‡ç¨‹

```
/alfred:3-sync auto SPEC-001

â¡ï¸ æ­¥éª¤1: SPEC éªŒè¯
âœ… SPEC-001 ç»“æ„æ­£å¸¸
âœ… ç¡®è®¤ 8 ä¸ªéœ€æ±‚

â¡ï¸ æ­¥éª¤2: TAG éªŒè¯
âœ… @TEST:SPEC-001 æ ‡ç­¾ 12ä¸ª
âœ… @CODE:SPEC-001 æ ‡ç­¾ 15ä¸ª
âœ… @DOC:SPEC-001 æ ‡ç­¾ 3ä¸ª
âš ï¸ åˆ é™¤äº† 2 ä¸ªå­¤ç«‹ TAG

â¡ï¸ æ­¥éª¤3: è´¨é‡éªŒè¯
âœ… æµ‹è¯•è¦†ç›–ç‡: 92%
âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
âœ… ä»£ç é£æ ¼æ­£å¸¸

â¡ï¸ æ­¥éª¤4: æ–‡æ¡£ç”Ÿæˆ
âœ… ç”Ÿæˆ API æ–‡æ¡£: docs/api/SPEC-001.md
âœ… ç”Ÿæˆæ¶æ„å›¾

â¡ï¸ æ­¥éª¤5: åˆ›å»º PR
âœ… åˆ›å»º PR #23
ğŸ“ æ ‡é¢˜: "feat: SPEC-001 ç™»å½•åŠŸèƒ½å®ç°"
```

______________________________________________________________________

## 5. /alfred:9-feedback

**åˆ›å»º GitHub Issue (åé¦ˆ)**

### è¯­æ³•

```
/alfred:9-feedback
```

### åŠŸèƒ½

- ğŸ› é”™è¯¯æŠ¥å‘Š
- ğŸ’¡ åŠŸèƒ½å»ºè®®
- ğŸ“ æ”¹è¿›å»ºè®®
- â“ é—®é¢˜

### äº¤äº’ç¤ºä¾‹

```
/alfred:9-feedback

> Alfred: åé¦ˆç±»å‹?
é€‰æ‹©: [1] é”™è¯¯  [2] åŠŸèƒ½  [3] æ”¹è¿›  [4] é—®é¢˜

> é€‰æ‹©: 1

> æ ‡é¢˜?
è¾“å…¥: "ç™»å½•åä¼šè¯æœªä¿æŒ"

> æè¿°?
è¾“å…¥: "ç™»å½•ååˆ·æ–°å³é€€å‡ºç™»å½•"

> é‡ç°æ­¥éª¤?
è¾“å…¥: "1. ç™»å½• 2. åˆ·æ–° 3. è®¿é—®ä»ªè¡¨æ¿"

> é¢„æœŸè¡Œä¸º?
è¾“å…¥: "ä¼šè¯åº”è¯¥ä¿æŒ"

âœ… åˆ›å»º GitHub Issue #24
ğŸ“ æ ‡é¢˜: "ğŸ› ç™»å½•åä¼šè¯æœªä¿æŒ"
```

______________________________________________________________________

## å‘½ä»¤å¿«é€Ÿå‚è€ƒ

### å®Œæ•´å·¥ä½œæµ

```bash
# 1. é¡¹ç›®åˆå§‹åŒ–
/alfred:0-project

# 2. SPEC ç¼–å†™
/alfred:1-plan "ç™»å½•åŠŸèƒ½" "æ³¨å†Œ"

# 3. TDD å®ç°
/alfred:2-run all

# 4. åŒæ­¥å’ŒéªŒè¯
/alfred:3-sync auto all

# å®Œæˆ! è‡ªåŠ¨åˆ›å»º PR
```

### éƒ¨åˆ†å·¥ä½œæµ

```bash
# ä»…ä¿®æ”¹ç‰¹å®š SPEC
/alfred:1-plan SPEC-001 "ç™»å½•åŠŸèƒ½ (æ·»åŠ  OAuth)"

# ä»…å¼€å‘è¯¥ SPEC
/alfred:2-run SPEC-001

# ä»…åŒæ­¥è¯¥ SPEC
/alfred:3-sync auto SPEC-001
```

______________________________________________________________________

## é”™è¯¯å¤„ç†

### "æ— æ³•è¯†åˆ« Alfred å‘½ä»¤"

```bash
# é‡å¯ Claude Code
exit

# å¯åŠ¨æ–°ä¼šè¯
claude

# é‡æ–°åˆå§‹åŒ–é¡¹ç›®
/alfred:0-project
```

### "æ‰¾ä¸åˆ° SPEC æ–‡ä»¶"

```bash
# æ£€æŸ¥é¡¹ç›®çŠ¶æ€
moai-adk status

# é‡æ–°åˆå§‹åŒ–
moai-adk init . --force
/alfred:0-project
```

### "æµ‹è¯•è¦†ç›–ç‡ä¸è¶³"

```bash
# æ£€æŸ¥å½“å‰è¦†ç›–ç‡
moai-adk status

# æ·»åŠ ç¼ºå¤±çš„æµ‹è¯•
# åœ¨ tests/ ç›®å½•ä¸­æ·»åŠ æµ‹è¯•

# é‡æ–°åŒæ­¥
/alfred:3-sync auto SPEC-001
```

______________________________________________________________________

**ä¸‹ä¸€æ­¥**: [moai-adk å‘½ä»¤å‚è€ƒ](moai-adk.md) æˆ– [Alfred æ¦‚å¿µ](../../guides/alfred/index.md)
