# í”„ë¡œì íŠ¸ ì„¤ì • ì™„ì „ ê°€ì´ë“œ

MoAI-ADK í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì„¤ì • ì˜µì…˜ì„ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤. ì–¸ì–´ ì„¤ì •ë¶€í„° GitHub í†µí•©, ì—ì´ì „íŠ¸ ìµœì í™”, ê°œì¸í™” ì„¤ì •ê¹Œì§€ í”„ë¡œì íŠ¸ ì„¤ì •ì˜ ëª¨ë“  ì¸¡ë©´ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [í•µì‹¬ ì„¤ì • íŒŒì¼](#í•µì‹¬-ì„¤ì •-íŒŒì¼)
3. [ì–¸ì–´ ë° ì§€ì—­í™” ì„¤ì •](#ì–¸ì–´-ë°-ì§€ì—­í™”-ì„¤ì •)
4. [í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„° ì„¤ì •](#í”„ë¡œì íŠ¸-ë©”íƒ€ë°ì´í„°-ì„¤ì •)
5. [GitHub í†µí•© ì„¤ì •](#github-í†µí•©-ì„¤ì •)
6. [ë³´ê³ ì„œ ìƒì„± ì œì–´](#ë³´ê³ ì„œ-ìƒì„±-ì œì–´)
7. [Git ì›Œí¬í”Œë¡œìš° ì„¤ì •](#git-ì›Œí¬í”Œë¡œìš°-ì„¤ì •)
8. [Hook ì„¤ì • ìµœì í™”](#hook-ì„¤ì •-ìµœì í™”)
9. [ì—ì´ì „íŠ¸ ì„¤ì •](#ì—ì´ì „íŠ¸-ì„¤ì •)
10. [TAG ì‹œìŠ¤í…œ ì„¤ì •](#tag-ì‹œìŠ¤í…œ-ì„¤ì •)
11. [TRUST 5ì›ì¹™ ì„¤ì •](#trust-5ì›ì¹™-ì„¤ì •)
12. [ê°œì¸í™” ì„¤ì •](#ê°œì¸í™”-ì„¤ì •)
13. [ì„¤ì • íŒŒì¼ ë°±ì—… ë° ë³µì›](#ì„¤ì •-íŒŒì¼-ë°±ì—…-ë°-ë³µì›)
14. [ì„¤ì • ìµœì í™” ì „ëµ](#ì„¤ì •-ìµœì í™”-ì „ëµ)
15. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

## ê°œìš”

MoAI-ADKì˜ ì„¤ì • ì‹œìŠ¤í…œì€ ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¨ìˆœí•œ í™˜ê²½ ì„¤ì •ì„ ë„˜ì–´, AI ì—ì´ì „íŠ¸ì˜ ë™ì‘ ë°©ì‹, ê°œë°œ ì›Œí¬í”Œë¡œìš°, íŒ€ í˜‘ì—… ë°©ì‹ê¹Œì§€ ëª¨ë“  ê²ƒì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì„¤ì • ì‹œìŠ¤í…œì˜ í•µì‹¬ ì›ì¹™

1. **ê³„ì¸µì  êµ¬ì¡°**: ê¸°ë³¸ê°’ â†’ í”„ë¡œì íŠ¸ ì„¤ì • â†’ ì‚¬ìš©ì ê°œì¸í™”
2. **ìë™ ê°ì§€**: ê°€ëŠ¥í•œ í•œ ë§ì€ ì„¤ì •ì„ ìë™ìœ¼ë¡œ ê°ì§€
3. **ì ì§„ì  ë…¸ì¶œ**: í•„ìš”í•œ ì„¤ì •ë§Œ ë…¸ì¶œ, ë³µì¡ì„± ìµœì†Œí™”
4. **ì•ˆì „í•œ ê¸°ë³¸ê°’**: ë³´ì•ˆê³¼ ì•ˆì •ì„±ì„ ìš°ì„ ì‹œí•˜ëŠ” ê¸°ë³¸ ì„¤ì •
5. **íŒ€ í˜¸í™˜ì„±**: ê°œì¸ ì„¤ì •ì´ íŒ€ í‘œì¤€ì„ í•´ì¹˜ì§€ ì•ŠìŒ

### ì„¤ì • íŒŒì¼ êµ¬ì¡°

```
.moai/
â”œâ”€â”€ config.json              # ë©”ì¸ ì„¤ì • íŒŒì¼
â”œâ”€â”€ user-config.json         # ì‚¬ìš©ì ê°œì¸ ì„¤ì • (å¯é€‰)
â”œâ”€â”€ team-config.json         # íŒ€ ê³µí†µ ì„¤ì • (å¯é€‰)
â””â”€â”€ environment-config.json  # í™˜ê²½ë³„ ì„¤ì • (å¯é€‰)

.claude/
â”œâ”€â”€ settings.json            # Claude Code ì„¤ì •
â”œâ”€â”€ mcp.json                 # MCP ì„œë²„ ì„¤ì •
â””â”€â”€ permissions.json         # ê¶Œí•œ ì„¤ì • (å¯é€‰)
```

## í•µì‹¬ ì„¤ì • íŒŒì¼

### `.moai/config.json` - ë©”ì¸ ì„¤ì • íŒŒì¼

í”„ë¡œì íŠ¸ì˜ ëª¨ë“  í•µì‹¬ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.

```json
{
  "version": "0.17.0",
  "moai": {
    "version": "0.17.0",
    "template_version": "0.17.0",
    "optimized": false,
    "auto_update": true
  },
  "language": {
    "conversation_language": "ko",
    "conversation_language_name": "í•œêµ­ì–´",
    "code_language": "python",
    "locale": "ko-KR",
    "timezone": "Asia/Seoul"
  },
  "project": {
    "name": "my-awesome-project",
    "description": "AI ê¸°ë°˜ì˜ í˜ì‹ ì ì¸ í”„ë¡œì íŠ¸",
    "owner": "username",
    "team": "development-team",
    "mode": "personal",
    "created_at": "2025-11-06T10:00:00Z",
    "updated_at": "2025-11-06T15:30:00Z",
    "domains": ["backend", "api", "database"],
    "tags": ["fastapi", "postgresql", "docker"],
    "visibility": "private"
  },
  "github": {
    "enabled": true,
    "repository": "username/my-awesome-project",
    "default_branch": "main",
    "auto_delete_branches": true,
    "spec_git_workflow": "feature_branch",
    "require_review": true,
    "auto_merge": false,
    "issue_sync": true,
    "release_automation": true
  },
  "report_generation": {
    "enabled": true,
    "level": "minimal",
    "formats": ["markdown"],
    "auto_commit": true,
    "include_metrics": true,
    "include_changelog": true,
    "max_file_size_kb": 100
  },
  "hooks": {
    "timeout_seconds": 5,
    "auto_checkpoint": true,
    "risk_detection": true,
    "tag_validation": true,
    "auto_linting": true,
    "session_recording": true
  },
  "tags": {
    "policy": "strict",
    "auto_validation": true,
    "format": "@TYPE:DOMAIN-NNN",
    "required_types": ["SPEC", "TEST", "CODE", "DOC"],
    "auto_assignment": true,
    "orphan_detection": true
  },
  "constitution": {
    "trust_principles": true,
    "tdd_workflow": true,
    "spec_first": true,
    "code_review_required": false,
    "documentation_required": true
  },
  "ai": {
    "default_model": "claude-3-5-sonnet-20241022",
    "fast_model": "claude-3-5-haiku-20241022",
    "max_tokens": 100000,
    "temperature": 0.1,
    "timeout": 300,
    "retry_attempts": 3
  },
  "security": {
    "scan_dependencies": true,
    "scan_secrets": true,
    "require_authentication": false,
    "audit_log": true,
    "encryption_at_rest": false
  },
  "performance": {
    "parallel_processing": true,
    "cache_enabled": true,
    "cache_ttl": 3600,
    "memory_limit_mb": 1024,
    "concurrent_agents": 3
  }
}
```

### `.claude/settings.json` - Claude Code ì„¤ì •

Claude Codeì˜ ë™ì‘ ë°©ì‹ì„ ì œì–´í•˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.

```json
{
  "models": {
    "default": "claude-3-5-sonnet-20241022",
    "fast": "claude-3-5-haiku-20241022",
    "reasoning": "claude-3-5-sonnet-20241022"
  },
  "permissions": {
    "allow": [
      "Read(*)",
      "Write(src/*, tests/*, docs/*, .moai/*)",
      "Bash(git status, git log, git diff, pytest, python, uv, node, npm)",
      "Grep(*), Glob(*), Edit(*), Bash(*, cd, ls, mkdir, echo, cat)"
    ],
    "ask": [
      "Bash(git push, git merge, git pull, rm -rf)",
      "Write(.claude/*, .moai/config.json, .env*)",
      "Bash(sudo, docker exec)"
    ],
    "deny": [
      "Bash(sudo rm, dd, mkfs, format)",
      "Write(*.key, *.pem, id_rsa)",
      "Bash(curl -X DELETE, wget -qO-)"
    ]
  },
  "hooks": {
    "SessionStart": ["alfred-hooks"],
    "PreToolUse": ["alfred-hooks"],
    "UserPromptSubmit": ["alfred-hooks"],
    "PostToolUse": ["alfred-hooks"],
    "SessionEnd": ["alfred-hooks"],
    "timeout": 5
  },
  "environment": {
    "PYTHONPATH": "${CLAUDE_PROJECT_DIR}/src",
    "MOAI_PROJECT_ROOT": "${CLAUDE_PROJECT_DIR}",
    "PATH": "${CLAUDE_PROJECT_DIR}/.venv/bin:${PATH}"
  },
  "ui": {
    "theme": "dark",
    "font_size": 14,
    "line_numbers": true,
    "word_wrap": true,
    "auto_save": true
  },
  "features": {
    "auto_completion": true,
    "syntax_highlighting": true,
    "inline_errors": true,
    "quick_actions": true
  },
  "experimental": {
    "multimodal": false,
    "advanced_reasoning": true,
    "context_compression": true
  }
}
```

## ì–¸ì–´ ë° ì§€ì—­í™” ì„¤ì •

### ì–¸ì–´ ì„¤ì • ì˜µì…˜

#### conversation_language (ëŒ€í™” ì–¸ì–´)

Alfredì™€ì˜ ëª¨ë“  ìƒí˜¸ì‘ìš©ì— ì‚¬ìš©ë˜ëŠ” ì–¸ì–´ì…ë‹ˆë‹¤.

```json
{
  "language": {
    "conversation_language": "ko",
    "conversation_language_name": "í•œêµ­ì–´",
    "supported_languages": {
      "ko": "í•œêµ­ì–´",
      "en": "English",
      "ja": "æ—¥æœ¬èª",
      "zh": "ä¸­æ–‡",
      "es": "EspaÃ±ol"
    }
  }
}
```

**ì§€ì›ë˜ëŠ” ì–¸ì–´**:

| ì½”ë“œ | ì–¸ì–´ | ì§€ì› ìˆ˜ì¤€ | ë¹„ê³  |
|------|------|-----------|------|
| ko | í•œêµ­ì–´ | ì™„ì „ | ê¸°ë³¸ ì–¸ì–´ |
| en | English | ì™„ì „ | ê¸€ë¡œë²Œ í‘œì¤€ |
| ja | æ—¥æœ¬èª | ì™„ì „ | ì¼ë³¸ì–´ ì§€ì› |
| zh | ä¸­æ–‡ | ì™„ì „ | ì¤‘êµ­ì–´ ê°„ì²´/ë²ˆì²´ ì§€ì› |
| es | EspaÃ±ol | ì™„ì „ | ìŠ¤í˜ì¸ì–´ ì§€ì› |
| fr | FranÃ§ais | ë¶€ë¶„ | í”„ë‘ìŠ¤ì–´ (ê°œë°œ ì¤‘) |
| de | Deutsch | ë¶€ë¶„ | ë…ì¼ì–´ (ê°œë°œ ì¤‘) |

#### code_language (í”„ë¡œê·¸ë˜ë° ì–¸ì–´)

í”„ë¡œì íŠ¸ì˜ ì£¼ìš” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ì„¤ì •ì…ë‹ˆë‹¤.

```json
{
  "language": {
    "code_language": "python",
    "auto_detection": true,
    "fallback": "python",
    "multi_language": {
      "enabled": false,
      "primary": "python",
      "secondary": ["javascript", "sql"]
    }
  }
}
```

**ì§€ì›ë˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´**:

| ì–¸ì–´ | ìë™ ê°ì§€ íŒŒì¼ | ê¸°ë³¸ ë„êµ¬ | í…œí”Œë¦¿ ì§€ì› |
|------|----------------|----------|------------|
| python | pyproject.toml, setup.py, requirements.txt | pytest, ruff, mypy | âœ… |
| javascript | package.json, yarn.lock | jest, eslint, prettier | âœ… |
| typescript | tsconfig.json, package.json | typescript, eslint, prettier | âœ… |
| go | go.mod, go.sum | go test, golint, gofmt | âœ… |
| rust | Cargo.toml | cargo test, clippy, rustfmt | âœ… |
| java | pom.xml, build.gradle | junit, maven, gradle | âœ… |
| kotlin | build.gradle.kts | junit, ktlint | âœ… |
| ruby | Gemfile | rspec, rubocop | âœ… |
| php | composer.json | phpunit, phpstan | âœ… |
| csharp | *.csproj, *.sln | xunit, dotnet | âœ… |
| sql | *.sql, schema.sql | - | <span class="material-icons">warning</span> ì œí•œì  |

#### locale ì„¤ì •

ì§€ì—­í™”ì™€ ê´€ë ¨ëœ í˜•ì‹í™” ê·œì¹™ì„ ì„¤ì •í•©ë‹ˆë‹¤.

```json
{
  "language": {
    "locale": "ko-KR",
    "timezone": "Asia/Seoul",
    "date_format": "YYYY-MM-DD",
    "time_format": "HH:mm:ss",
    "currency": "KRW",
    "number_format": {
      "decimal_separator": ".",
      "thousands_separator": ","
    }
  }
}
```

### ì–¸ì–´ ì„¤ì • ìµœì í™”

#### ìë™ ì–¸ì–´ ê°ì§€

```python
# .claude/hooks/alfred/utils/language_detector.py
import os
from pathlib import Path

def detect_project_language(project_dir: Path) -> dict:
    """í”„ë¡œì íŠ¸ ì–¸ì–´ ìë™ ê°ì§€"""
    indicators = {
        'python': ['pyproject.toml', 'setup.py', 'requirements.txt', 'Pipfile'],
        'javascript': ['package.json', 'yarn.lock', 'package-lock.json'],
        'typescript': ['tsconfig.json', 'package.json'],
        'go': ['go.mod', 'go.sum'],
        'rust': ['Cargo.toml'],
        'java': ['pom.xml', 'build.gradle'],
        'ruby': ['Gemfile', 'Rakefile'],
        'php': ['composer.json', 'composer.lock']
    }

    project_files = os.listdir(project_dir)

    for language, files in indicators.items():
        if any(file in project_files for file in files):
            return {
                'detected_language': language,
                'confidence': 'high',
                'indicators': [f for f in files if f in project_files]
            }

    return {'detected_language': 'python', 'confidence': 'low'}
```

#### ë‹¤êµ­ì–´ í”„ë¡œì íŠ¸ ì„¤ì •

```json
{
  "language": {
    "multi_language": {
      "enabled": true,
      "primary": "python",
      "secondary": ["javascript", "sql"],
      "bridging": {
        "enabled": true,
        "apis": ["grpc", "rest"],
        "data_formats": ["json", "protobuf"]
      }
    },
    "documentation": {
      "primary": "ko",
      "secondary": ["en"],
      "auto_translation": false
    }
  }
}
```

## í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„° ì„¤ì •

### ê¸°ë³¸ í”„ë¡œì íŠ¸ ì •ë³´

```json
{
  "project": {
    "name": "my-awesome-project",
    "display_name": "My Awesome Project",
    "description": "AI ê¸°ë°˜ì˜ í˜ì‹ ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜",
    "short_description": "AI-powered web application",
    "version": "1.0.0",
    "owner": "username",
    "team": "development-team",
    "organization": "company-name",
    "license": "MIT",
    "homepage": "https://github.com/username/my-awesome-project",
    "repository": "https://github.com/username/my-awesome-project.git",
    "documentation": "https://docs.my-awesome-project.com",
    "created_at": "2025-11-06T10:00:00Z",
    "updated_at": "2025-11-06T15:30:00Z"
  }
}
```

### í”„ë¡œì íŠ¸ ë¶„ë¥˜

```json
{
  "project": {
    "type": "web-api",
    "category": "backend",
    "domains": ["backend", "api", "database", "security"],
    "tags": ["fastapi", "postgresql", "docker", "jwt", "rest"],
    "technologies": [
      {
        "name": "Python",
        "version": "3.13",
        "type": "language"
      },
      {
        "name": "FastAPI",
        "version": "0.104",
        "type": "framework"
      },
      {
        "name": "PostgreSQL",
        "version": "15",
        "type": "database"
      }
    ],
    "platforms": ["linux", "macos", "windows"],
    "target_environments": ["development", "staging", "production"]
  }
}
```

### í”„ë¡œì íŠ¸ ëª¨ë“œ ì„¤ì •

```json
{
  "project": {
    "mode": "team",
    "visibility": "private",
    "access_level": "internal",
    "collaboration": {
      "enabled": true,
      "team_size": 5,
      "review_policy": "required",
      "approval_policy": "majority"
    },
    "compliance": {
      "standards": ["ISO27001", "SOC2"],
      "audit_required": true,
      "data_classification": "confidential"
    }
  }
}
```

**í”„ë¡œì íŠ¸ ëª¨ë“œ ì¢…ë¥˜**:

| ëª¨ë“œ | ì„¤ëª… | ì í•©í•œ ìƒí™© | íŠ¹ì§• |
|------|------|-----------|------|
| personal | ê°œì¸ í”„ë¡œì íŠ¸ | ê°œì¸ ê°œë°œ, í•™ìŠµ | ë‹¨ìˆœí•œ ì„¤ì •, ë¹ ë¥¸ ì‹œì‘ |
| team | íŒ€ í”„ë¡œì íŠ¸ | ì†Œê·œëª¨ íŒ€ ê°œë°œ | í˜‘ì—… ê¸°ëŠ¥, ì½”ë“œ ë¦¬ë·° |
| enterprise | ê¸°ì—… í”„ë¡œì íŠ¸ | ëŒ€ê·œë©´ ì¡°ì§ | ë³´ì•ˆ, ê·œì œ ì¤€ìˆ˜, ê°ì‚¬ |
| open-source | ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ | ê³µê°œ í”„ë¡œì íŠ¸ | ì»¤ë®¤ë‹ˆí‹°, íˆ¬ëª…ì„±, ë¼ì´ì„ ìŠ¤ |

## GitHub í†µí•© ì„¤ì •

### ê¸°ë³¸ GitHub ì„¤ì •

```json
{
  "github": {
    "enabled": true,
    "repository": "username/my-awesome-project",
    "owner": "username",
    "default_branch": "main",
    "protected_branches": ["main", "develop"],
    "auto_delete_branches": true,
    "require_review": true,
    "auto_merge": false,
    "sync_issues": true,
    "sync_projects": true
  }
}
```

### Git ì›Œí¬í”Œë¡œìš° ì„¤ì •

```json
{
  "github": {
    "spec_git_workflow": "feature_branch",
    "branch_strategy": {
      "main": {
        "protected": true,
        "require_reviews": 2,
        "require_status_checks": ["ci/cd", "quality-gate"],
        "enforce_admins": true
      },
      "develop": {
        "protected": false,
        "auto_merge": true,
        "require_status_checks": ["lint", "test"]
      },
      "feature": {
        "naming_pattern": "feature/{spec-id}-{description}",
        "auto_create": true,
        "from_spec": true
      }
    },
    "pull_request": {
      "template": ".github/PULL_REQUEST_TEMPLATE.md",
      "auto_assign_reviewers": true,
      "reviewers": ["team-lead", "senior-dev"],
      "require_up_to_date": true
    }
  }
}
```

**Git ì›Œí¬í”Œë¡œìš° ì˜µì…˜**:

| ì›Œí¬í”Œë¡œìš° | ì„¤ëª… | ë¸Œëœì¹˜ ì „ëµ | PR ì •ì±… |
|-----------|------|-------------|----------|
| develop_direct | develop ë¸Œëœì¹˜ì— ì§ì ‘ ì»¤ë°‹ | develop â†’ main | Draft PR |
| feature_branch | ê¸°ëŠ¥ë³„ ë¸Œëœì¹˜ ìƒì„± | feature â†’ develop â†’ main | Full PR |
| release_branch | ë¦´ë¦¬ì¦ˆ ë¸Œëœì¹˜ ì‚¬ìš© | feature â†’ develop â†’ release â†’ main | Full PR + QA |
| gitflow | ì „í†µì  GitFlow | feature â†’ develop â†’ release â†’ main â†’ hotfix | Complex PR |

### GitHub Actions í†µí•©

```json
{
  "github": {
    "actions": {
      "enabled": true,
      "workflows": [
        {
          "name": "ci.yml",
          "triggers": ["push", "pull_request"],
          "jobs": ["lint", "test", "build", "security-scan"]
        },
        {
          "name": "release.yml",
          "triggers": ["push:tags"],
          "jobs": ["build", "test", "publish", "deploy"]
        },
        {
          "name": "spec-sync.yml",
          "triggers": ["pull_request:opened", "pull_request:synchronize"],
          "jobs": ["spec-validation", "issue-sync"]
        }
      ],
      "secrets": {
        "required": ["GH_TOKEN", "DOCKER_REGISTRY_TOKEN"],
        "optional": ["SLACK_WEBHOOK", "NOTIFICATION_EMAIL"]
      }
    }
  }
}
```

### ì´ìŠˆ ë° í”„ë¡œì íŠ¸ ê´€ë¦¬

```json
{
  "github": {
    "issue_management": {
      "auto_sync": true,
      "spec_to_issue": true,
      "labels": {
        "spec": ["spec", "planning"],
        "bug": ["bug", "priority-high"],
        "feature": ["enhancement", "priority-medium"],
        "documentation": ["documentation", "good-first-issue"]
      },
      "templates": {
        "bug_report": ".github/ISSUE_TEMPLATE/bug_report.md",
        "feature_request": ".github/ISSUE_TEMPLATE/feature_request.md",
        "spec": ".github/ISSUE_TEMPLATE/spec.md"
      }
    },
    "project_management": {
      "boards": ["Development", "Backlog", "In Review", "Done"],
      "auto_update": true,
      "sync_with_spec": true
    }
  }
}
```

## ë³´ê³ ì„œ ìƒì„± ì œì–´

### ë³´ê³ ì„œ ìƒì„± ì„¤ì •

```json
{
  "report_generation": {
    "enabled": true,
    "level": "minimal",
    "formats": ["markdown", "html"],
    "output_directory": ".moai/reports",
    "auto_commit": true,
    "schedule": {
      "enabled": false,
      "frequency": "weekly",
      "day": "friday",
      "time": "17:00"
    },
    "triggers": {
      "on_sync": true,
      "on_completion": true,
      "on_release": true,
      "manual_only": false
    }
  }
}
```

### ë³´ê³ ì„œ ë ˆë²¨ ì„¤ì •

| ë ˆë²¨ | ì„¤ëª… | ìƒì„±ë˜ëŠ” ë³´ê³ ì„œ | í† í° ì‚¬ìš©ëŸ‰ |
|------|------|----------------|------------|
| disable | ë³´ê³ ì„œ ìƒì„± ì•ˆ í•¨ | ì—†ìŒ | 0% |
| minimal | ìµœì†Œí•œì˜ ë³´ê³ ì„œë§Œ | ë™ê¸°í™” ìš”ì•½, TAG ìƒíƒœ | 20% |
| standard | í‘œì¤€ ë³´ê³ ì„œ | ë™ê¸°í™”, í’ˆì§ˆ, ì»¤ë²„ë¦¬ì§€ | 60% |
| comprehensive | ëª¨ë“  ë³´ê³ ì„œ | ëª¨ë“  ë¶„ì„, ì¶”ì²œ, ì˜ˆì¸¡ | 100% |

#### Minimal ë ˆë²¨ ë³´ê³ ì„œ

```markdown
# ë™ê¸°í™” ë¦¬í¬íŠ¸ - 2025-11-06

## ìš”ì•½
- ë™ê¸°í™”ëœ SPEC: 3ê°œ
- ìƒì„±ëœ TAG: 12ê°œ
- í’ˆì§ˆ ê²€ì¦: í†µê³¼

## ë³€ê²½ì‚¬í•­
- AUTH-001: ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ
- USER-002: ì‚¬ìš©ì ê´€ë¦¬ êµ¬í˜„ ì¤‘
- API-003: API ë¬¸ì„œ ì—…ë°ì´íŠ¸

## ë‹¤ìŒ ë‹¨ê³„
- USER-002 êµ¬í˜„ ì™„ë£Œ
- API-003 ë¦¬ë·° í•„ìš”
```

#### Standard ë ˆë²¨ ë³´ê³ ì„œ

```markdown
# í”„ë¡œì íŠ¸ ìƒì„¸ ë¦¬í¬íŠ¸ - 2025-11-06

## í”„ë¡œì íŠ¸ ê°œìš”
- ì´ë¦„: My Awesome Project
- ë²„ì „: 1.0.0
- ìƒíƒœ: ê°œë°œ ì¤‘

## í’ˆì§ˆ ì§€í‘œ
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 87.5%
- ì½”ë“œ í’ˆì§ˆ ì ìˆ˜: 92/100
- ë³´ì•ˆ ì ìˆ˜: 95/100

## SPEC ìƒíƒœ
| ID | ì œëª© | ìƒíƒœ | ì§„í–‰ë¥  |
|----|------|------|--------|
| AUTH-001 | ì‚¬ìš©ì ì¸ì¦ | completed | 100% |
| USER-002 | ì‚¬ìš©ì ê´€ë¦¬ | in_progress | 75% |
| API-003 | API ë¬¸ì„œ | draft | 30% |

## ì¶”ì²œ ì‚¬í•­
1. USER-002ì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¦ê°€ í•„ìš”
2. API-003ì˜ ìˆ˜ìš© ê¸°ì¤€ ëª…í™•í™” í•„ìš”
3. ë³´ì•ˆ ê²€í†  ì£¼ê¸° ë‹¨ì¶• ê¶Œì¥
```

### ë³´ê³ ì„œ í˜•ì‹ ì„¤ì •

```json
{
  "report_generation": {
    "formats": {
      "markdown": {
        "enabled": true,
        "template": "default",
        "include_toc": true,
        "include_charts": false
      },
      "html": {
        "enabled": true,
        "theme": "light",
        "include_interactive_charts": true,
        "export_to_pdf": false
      },
      "json": {
        "enabled": true,
        "pretty_print": true,
        "include_metadata": true
      },
      "csv": {
        "enabled": false,
        "include_metrics_only": true
      }
    }
  }
}
```

## Git ì›Œí¬í”Œë¡œìš° ì„¤ì •

### ì›Œí¬í”Œë¡œìš° ì „ëµ ì„ íƒ

```json
{
  "github": {
    "spec_git_workflow": "feature_branch",
    "workflow_config": {
      "auto_create_branches": true,
      "branch_naming": "feature/{domain}-{id}",
      "auto_create_pr": true,
      "pr_template": "spec_template",
      "require_review": true,
      "auto_merge": false,
      "auto_delete_branches": true
    }
  }
}
```

### ë¸Œëœì¹˜ ì „ëµ ìƒì„¸

#### Feature Branch ì›Œí¬í”Œë¡œìš°

```mermaid
graph TD
    A[SPEC ì‘ì„±] --> B[feature ë¸Œëœì¹˜ ìƒì„±]
    B --> C[TDD êµ¬í˜„]
    C --> D[Draft PR ìƒì„±]
    D --> E[ì½”ë“œ ë¦¬ë·°]
    E --> F[QA ê²€ì¦]
    F --> G{ìŠ¹ì¸?}
    G -->|Yes| H[develop ë¸Œëœì¹˜ ë³‘í•©]
    G -->|No| I[ìˆ˜ì • ìš”ì²­]
    I --> C
    H --> J[ë¦´ë¦¬ì¦ˆ ì¤€ë¹„]
    J --> K[main ë¸Œëœì¹˜ ë³‘í•©]
    K --> L[ë¸Œëœì¹˜ ìë™ ì‚­ì œ]
```

```json
{
  "github": {
    "workflow": "feature_branch",
    "branches": {
      "main": {
        "protection": {
          "enabled": true,
          "required_status_checks": {
            "strict": true,
            "contexts": ["ci/cd", "quality-gate", "security-scan"]
          },
          "enforce_admins": true,
          "required_pull_request_reviews": {
            "required_approving_review_count": 2,
            "dismiss_stale_reviews": true,
            "require_code_owner_reviews": true
          }
        }
      },
      "develop": {
        "protection": {
          "enabled": false,
          "required_status_checks": {
            "contexts": ["lint", "test"]
          }
        }
      },
      "feature": {
        "pattern": "feature/{domain}-{id}",
        "auto_create": true,
        "source_branch": "develop",
        "delete_after_merge": true
      }
    }
  }
}
```

#### Develop Direct ì›Œí¬í”Œë¡œìš°

```mermaid
graph TD
    A[SPEC ì‘ì„±] --> B[develop ë¸Œëœì¹˜ì— ì§ì ‘ ì‘ì—…]
    B --> C[TDD êµ¬í˜„]
    C --> D[ì»¤ë°‹]
    D --> E[ìë™ í’ˆì§ˆ ê²€ì‚¬]
    E --> F{í†µê³¼?}
    F -->|Yes| G[ë‹¤ìŒ ê¸°ëŠ¥]
    F -->|No| H[ìˆ˜ì •]
    H --> C
    G --> I[ì£¼ê¸°ì  develop â†’ main ë³‘í•©]
```

```json
{
  "github": {
    "workflow": "develop_direct",
    "settings": {
      "main_branch": "main",
      "develop_branch": "develop",
      "sync_schedule": "daily",
      "auto_merge_develop_to_main": false,
      "require_manual_review_for_main": true
    },
    "quality_gates": {
      "test_coverage_threshold": 85,
      "code_quality_threshold": 90,
      "security_scan_required": true
    }
  }
}
```

### ì»¤ë°‹ ë©”ì‹œì§€ ì„¤ì •

```json
{
  "github": {
    "commit_convention": "conventional_commits",
    "commit_templates": {
      "feature": "feat({scope}): {description}",
      "fix": "fix({scope}): {description}",
      "refactor": "refactor({scope}): {description}",
      "test": "test({scope}): {description}",
      "docs": "docs({scope}): {description}",
      "chore": "chore({scope}): {description}"
    },
    "auto_tag_commits": true,
    "require_issue_link": false,
    "max_commit_message_length": 72
  }
}
```

## Hook ì„¤ì • ìµœì í™”

### Hook ì‹œìŠ¤í…œ ê°œìš”

MoAI-ADKì˜ Hook ì‹œìŠ¤í…œì€ ê°œë°œ íë¦„ì˜ ëª¨ë“  ë‹¨ê³„ì—ì„œ ìë™ìœ¼ë¡œ ë™ì‘í•˜ì—¬ ìƒì‚°ì„±ì„ í–¥ìƒì‹œí‚¤ê³  í’ˆì§ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.

```json
{
  "hooks": {
    "timeout_seconds": 5,
    "enabled_hooks": {
      "SessionStart": {
        "enabled": true,
        "actions": ["project_summary", "context_loading", "version_check"],
        "priority": "high"
      },
      "PreToolUse": {
        "enabled": true,
        "actions": ["risk_detection", "checkpoint_creation", "tag_validation"],
        "priority": "critical"
      },
      "UserPromptSubmit": {
        "enabled": true,
        "actions": ["jit_context_loading", "intent_analysis"],
        "priority": "medium"
      },
      "PostToolUse": {
        "enabled": true,
        "actions": ["auto_linting", "test_execution", "change_detection"],
        "priority": "medium"
      },
      "SessionEnd": {
        "enabled": true,
        "actions": ["session_summary", "context_persistence", "cleanup"],
        "priority": "low"
      }
    },
    "auto_checkpoint": {
      "enabled": true,
      "triggers": [
        "file_deletion",
        "large_file_modification",
        "config_changes",
        "git_merge_operations"
      ],
      "max_checkpoints": 10,
      "retention_days": 30
    }
  }
}
```

### SessionStart Hook

```python
# .claude/hooks/alfred/session_start.py
import json
import os
from datetime import datetime
from pathlib import Path

def main():
    """ì„¸ì…˜ ì‹œì‘ ì‹œ í”„ë¡œì íŠ¸ ìƒíƒœ ìš”ì•½"""
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')
    config_path = Path(project_dir) / '.moai' / 'config.json'

    if config_path.exists():
        with open(config_path) as f:
            config = json.load(f)

        # í”„ë¡œì íŠ¸ ì •ë³´ ì¶œë ¥
        print(f"ğŸ“‹ í”„ë¡œì íŠ¸: {config['project']['name']}")
        print(f"ğŸŒ ì–¸ì–´: {config['language']['conversation_language_name']}")
        print(f"ğŸ‘¤ ì†Œìœ ì: {config['project']['owner']}")
        print(f"âš™ï¸ ëª¨ë“œ: {config['project']['mode']}")

        # SPEC ìƒíƒœ ìš”ì•½
        specs_dir = Path(project_dir) / '.moai' / 'specs'
        if specs_dir.exists():
            spec_count = len([d for d in specs_dir.iterdir() if d.is_dir()])
            print(f"ğŸ“„ SPEC ë¬¸ì„œ: {spec_count}ê°œ")

        # Git ìƒíƒœ í™•ì¸
        os.system('git status --porcelain | wc -l | xargs echo "ğŸ”„ ë³€ê²½ëœ íŒŒì¼:"')

        # ìµœê·¼ í™œë™
        print(f"ğŸ• ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {config['project']['updated_at']}")
        print("âœ… Alfred ì¤€ë¹„ ì™„ë£Œ")

if __name__ == "__main__":
    main()
```

### PreToolUse Hook

```python
# .claude/hooks/alfred/pre_tool_use.py
import json
import os
import re
from pathlib import Path

def check_risk(operation: str, target: str) -> dict:
    """ìœ„í—˜ë„ í‰ê°€"""
    risk_patterns = {
        'high': [r'rm\s+-rf', r'sudo', r'format', r'dd\s+if='],
        'medium': [r'git\s+push\s+--force', r'merge', r'reset'],
        'low': [r'rm\s+', r'chmod', r'chown']
    }

    for risk_level, patterns in risk_patterns.items():
        for pattern in patterns:
            if re.search(pattern, operation, re.IGNORECASE):
                return {'level': risk_level, 'pattern': pattern}

    return {'level': 'safe'}

def validate_tags(file_path: str) -> list:
    """TAG ëˆ„ë½ ê²€ì¦"""
    if not file_path.endswith(('.py', '.js', '.ts', '.md')):
        return []

    with open(file_path, 'r') as f:
        content = f.read()

    # TAG íŒ¨í„´ ê²€ìƒ‰
    tag_pattern = r'@(SPEC|TEST|CODE|DOC):[A-Z]+-\d+'
    tags = re.findall(tag_pattern, content)

    if not tags:
        file_type = file_path.split('/')[-2]  # src/, tests/, docs/
        expected_tag = {
            'src': '@CODE:',
            'tests': '@TEST:',
            'docs': '@DOC:',
            '.moai/specs': '@SPEC:'
        }.get(file_type, '')

        return [f"<span class="material-icons">warning</span> TAG ëˆ„ë½: {file_path} (ê¸°ëŒ€: {expected_tag})"]

    return []

def main():
    """PreToolUse Hook ë©”ì¸ ë¡œì§"""
    tool_name = os.environ.get('CLAUDE_TOOL_NAME')
    tool_args = os.environ.get('CLAUDE_TOOL_ARGS', '')
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')

    # ìœ„í—˜ë„ í‰ê°€
    risk = check_risk(tool_name, tool_args)
    if risk['level'] in ['high', 'medium']:
        print(f"<span class="material-icons">warning</span> ìœ„í—˜ ê°ì§€: {risk['level']} - {risk['pattern']}")
        if risk['level'] == 'high':
            response = input("ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/N): ")
            if response.lower() != 'y':
                exit(1)

    # TAG ê²€ì¦ (íŒŒì¼ ìˆ˜ì • ì‹œ)
    if tool_name in ['Write', 'Edit']:
        file_path = tool_args.split()[0] if tool_args else ''
        full_path = Path(project_dir) / file_path

        if full_path.exists():
            tag_issues = validate_tags(str(full_path))
            for issue in tag_issues:
                print(issue)

if __name__ == "__main__":
    main()
```

### PostToolUse Hook

```python
# .claude/hooks/alfred/post_tool_use.py
import json
import os
import subprocess
from pathlib import Path

def run_linting(file_path: str) -> dict:
    """íŒŒì¼ ìœ í˜•ì— ë”°ë¼ ìë™ ë¦°íŒ… ì‹¤í–‰"""
    if file_path.endswith('.py'):
        return run_python_linting(file_path)
    elif file_path.endswith(('.js', '.ts')):
        return run_js_linting(file_path)
    elif file_path.endswith(('.go')):
        return run_go_linting(file_path)

    return {'status': 'skipped', 'reason': 'unsupported_file_type'}

def run_python_linting(file_path: str) -> dict:
    """Python íŒŒì¼ ë¦°íŒ…"""
    try:
        # ruff í¬ë§·íŒ…
        result = subprocess.run(['ruff', 'format', file_path],
                              capture_output=True, text=True)

        if result.returncode != 0:
            return {'status': 'error', 'message': result.stderr}

        # ruff ë¦°íŒ…
        result = subprocess.run(['ruff', 'check', '--fix', file_path],
                              capture_output=True, text=True)

        if result.returncode != 0:
            return {'status': 'warning', 'message': result.stderr}

        return {'status': 'success', 'message': 'í¬ë§·íŒ… ë° ë¦°íŒ… ì™„ë£Œ'}

    except FileNotFoundError:
        return {'status': 'skipped', 'reason': 'ruff_not_installed'}

def run_tests_if_needed(file_path: str) -> dict:
    """ê´€ë ¨ í…ŒìŠ¤íŠ¸ ìë™ ì‹¤í–‰"""
    if 'tests' not in file_path:
        return {'status': 'skipped', 'reason': 'not_test_file'}

    try:
        # í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
        result = subprocess.run(['pytest', file_path, '-v'],
                              capture_output=True, text=True)

        return {
            'status': 'success' if result.returncode == 0 else 'failed',
            'output': result.stdout,
            'errors': result.stderr
        }

    except FileNotFoundError:
        return {'status': 'skipped', 'reason': 'pytest_not_installed'}

def main():
    """PostToolUse Hook ë©”ì¸ ë¡œì§"""
    tool_name = os.environ.get('CLAUDE_TOOL_NAME')
    tool_args = os.environ.get('CLAUDE_TOOL_ARGS', '')
    project_dir = os.environ.get('CLAUDE_PROJECT_DIR')

    if tool_name in ['Write', 'Edit']:
        file_path = tool_args.split()[0] if tool_args else ''
        full_path = Path(project_dir) / file_path

        if full_path.exists():
            # ìë™ ë¦°íŒ…
            lint_result = run_linting(file_path)
            if lint_result['status'] == 'success':
                print(f"âœ¨ {lint_result['message']}")

            # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ íŒŒì¼ì¸ ê²½ìš°)
            if 'tests' in file_path:
                test_result = run_tests_if_needed(file_path)
                if test_result['status'] == 'success':
                    print(f"âœ… í…ŒìŠ¤íŠ¸ í†µê³¼")
                else:
                    print(f"<span class="material-icons">cancel</span> í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨")

if __name__ == "__main__":
    main()
```

## ì—ì´ì „íŠ¸ ì„¤ì •

### AI ëª¨ë¸ ì„¤ì •

```json
{
  "ai": {
    "default_model": "claude-3-5-sonnet-20241022",
    "fast_model": "claude-3-5-haiku-20241022",
    "reasoning_model": "claude-3-5-sonnet-20241022",
    "multimodal_model": "claude-3-5-sonnet-20241022",
    "models": {
      "claude-3-5-sonnet-20241022": {
        "context_window": 200000,
        "max_output_tokens": 8192,
        "temperature": 0.1,
        "timeout": 300,
        "retry_attempts": 3,
        "cost_per_input_token": 0.000003,
        "cost_per_output_token": 0.000015
      },
      "claude-3-5-haiku-20241022": {
        "context_window": 200000,
        "max_output_tokens": 4096,
        "temperature": 0.0,
        "timeout": 120,
        "retry_attempts": 2,
        "cost_per_input_token": 0.00000025,
        "cost_per_output_token": 0.00000125
      }
    }
  }
}
```

### ì—ì´ì „íŠ¸ë³„ ì„¤ì •

```json
{
  "agents": {
    "project_manager": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.1,
      "max_tokens": 4000,
      "timeout": 180,
      "skills": ["project-init", "language-detection", "skill-recommendation"],
      "memory_retention": "session"
    },
    "spec_builder": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.2,
      "max_tokens": 6000,
      "timeout": 240,
      "skills": ["ears-authoring", "requirement-analysis", "plan-board"],
      "expertise_domains": ["requirements-engineering", "system-design"]
    },
    "code_builder": {
      "model": "claude-3-5-sonnet-20241022",
      "temperature": 0.1,
      "max_tokens": 8000,
      "timeout": 300,
      "skills": ["tdd-implementation", "architecture-design", "code-review"],
      "sub_agents": ["implementation-planner", "tdd-implementer"]
    },
    "doc_syncer": {
      "model": "claude-3-5-haiku-20241022",
      "temperature": 0.0,
      "max_tokens": 4000,
      "timeout": 120,
      "skills": ["documentation-generation", "markdown-formatting", "api-docs"],
      "auto_sync": true
    }
  }
}
```

### ì „ë¬¸ê°€ ì—ì´ì „íŠ¸ ì„¤ì •

```json
{
  "expert_agents": {
    "backend_expert": {
      "enabled": true,
      "auto_activate": ["backend", "api", "server", "database"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["system-design", "scalability", "performance", "security"],
      "skills": ["api-design", "database-design", "caching-strategies", "microservices"],
      "response_style": "detailed",
      "code_examples": true
    },
    "frontend_expert": {
      "enabled": true,
      "auto_activate": ["frontend", "ui", "component", "client-side"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["react", "vue", "angular", "css", "accessibility"],
      "skills": ["component-design", "state-management", "performance-optimization"],
      "response_style": "practical",
      "include_ui_mockups": true
    },
    "security_expert": {
      "enabled": true,
      "auto_activate": ["security", "authentication", "authorization", "vulnerability"],
      "model": "claude-3-5-sonnet-20241022",
      "expertise": ["owasp-top-10", "encryption", "authentication", "audit"],
      "skills": ["threat-modeling", "security-review", "compliance"],
      "response_style": "cautious",
      "require_approval": false
    }
  }
}
```

### ì—ì´ì „íŠ¸ ìµœì í™” ì„¤ì •

```json
{
  "agent_optimization": {
    "parallel_processing": true,
    "max_concurrent_agents": 3,
    "agent_timeout": 300,
    "memory_management": {
      "context_compression": true,
      "max_context_size": 150000,
      "priority_cutoff": 0.7
    },
    "cost_optimization": {
      "use_fast_model_for_simple_tasks": true,
      "cache_agent_responses": true,
      "cache_ttl": 3600,
      "max_cache_size_mb": 100
    },
    "performance_monitoring": {
      "track_response_times": true,
      "track_token_usage": true,
      "alert_on_slow_responses": true,
      "slow_response_threshold": 30
    }
  }
}
```

## TAG ì‹œìŠ¤í…œ ì„¤ì •

### TAG ì •ì±… ì„¤ì •

```json
{
  "tags": {
    "policy": "strict",
    "format": "@TYPE:DOMAIN-NNN",
    "required_types": ["SPEC", "TEST", "CODE", "DOC"],
    "auto_assignment": true,
    "validation": {
      "enabled": true,
      "enforce_uniqueness": true,
      "check_format": true,
      "validate_domain": true
    },
    "domains": {
      "AUTH": "ì¸ì¦ ë° ê¶Œí•œ",
      "USER": "ì‚¬ìš©ì ê´€ë¦¬",
      "API": "API ì—”ë“œí¬ì¸íŠ¸",
      "DB": "ë°ì´í„°ë² ì´ìŠ¤",
      "UI": "ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤",
      "SEC": "ë³´ì•ˆ",
      "PERF": "ì„±ëŠ¥",
      "DOCS": "ë¬¸ì„œí™”"
    }
  }
}
```

### TAG ìƒì„± ê·œì¹™

```json
{
  "tag_generation": {
    "auto_increment": true,
    "domain_reset": false,
    "padding": 3,
    "separator": "-",
    "examples": {
      "SPEC": "@SPEC:AUTH-001",
      "TEST": "@TEST:AUTH-001",
      "CODE": "@CODE:AUTH-001:SERVICE",
      "DOC": "@DOC:AUTH-001:API"
    }
  },
  "tag_mapping": {
    "file_patterns": {
      "src/**/*.py": "@CODE",
      "tests/**/*.py": "@TEST",
      "docs/**/*.md": "@DOC",
      ".moai/specs/**/spec.md": "@SPEC"
    },
    "content_patterns": {
      "test_*.py": "@TEST",
      "*_test.py": "@TEST",
      "conftest.py": "@TEST",
      "README.md": "@DOC",
      "CHANGELOG.md": "@DOC"
    }
  }
}
```

### TAG ê²€ì¦ ì„¤ì •

```python
# .claude/hooks/alfred/core/tag_validator.py
import re
import json
from pathlib import Path
from typing import Dict, List, Optional

class TagValidator:
    def __init__(self, config_path: str):
        with open(config_path) as f:
            self.config = json.load(f)
        self.tag_policy = self.config.get('tags', {})

    def validate_tag_format(self, tag: str) -> Dict:
        """TAG í˜•ì‹ ê²€ì¦"""
        pattern = self.tag_policy.get('format', r'@[A-Z]+:[A-Z]+-\d+')

        if not re.match(pattern, tag):
            return {
                'valid': False,
                'error': f'Invalid format. Expected: {pattern}',
                'tag': tag
            }

        return {'valid': True, 'tag': tag}

    def validate_tag_chain(self, project_dir: Path) -> Dict:
        """TAG ì²´ì¸ ë¬´ê²°ì„± ê²€ì¦"""
        spec_tags = self._find_tags(project_dir, pattern="@SPEC:")
        test_tags = self._find_tags(project_dir, pattern="@TEST:")
        code_tags = self._find_tags(project_dir, pattern="@CODE:")
        doc_tags = self._find_tags(project_dir, pattern="@DOC:")

        issues = []

        # ê° SPECì— ëŒ€ì‘í•˜ëŠ” TEST, CODE, DOCê°€ ìˆëŠ”ì§€ í™•ì¸
        for spec_tag in spec_tags:
            spec_id = self._extract_tag_id(spec_tag)

            test_match = any(spec_id in tag for tag in test_tags)
            code_match = any(spec_id in tag for tag in code_tags)
            doc_match = any(spec_id in tag for tag in doc_tags)

            if not test_match:
                issues.append(f"Missing TEST tag for {spec_tag}")
            if not code_match:
                issues.append(f"Missing CODE tag for {spec_tag}")
            if not doc_match:
                issues.append(f"Missing DOC tag for {spec_tag}")

        # ê³ ì•„ TAG ê²€ìƒ‰
        orphan_tags = []
        all_spec_ids = {self._extract_tag_id(tag) for tag in spec_tags}

        for tag in test_tags + code_tags + doc_tags:
            tag_id = self._extract_tag_id(tag)
            if tag_id not in all_spec_ids:
                orphan_tags.append(tag)

        return {
            'valid': len(issues) == 0,
            'issues': issues,
            'orphan_tags': orphan_tags,
            'total_tags': len(spec_tags + test_tags + code_tags + doc_tags)
        }

    def _find_tags(self, directory: Path, pattern: str) -> List[str]:
        """ë””ë ‰í† ë¦¬ì—ì„œ TAG íŒ¨í„´ ê²€ìƒ‰"""
        tags = []
        regex_pattern = re.compile(pattern)

        for file_path in directory.rglob("*"):
            if file_path.is_file() and self._should_search_file(file_path):
                try:
                    with open(file_path, 'r', encoding='utf-8') as f:
                        content = f.read()
                        matches = regex_pattern.findall(content)
                        tags.extend(matches)
                except (UnicodeDecodeError, PermissionError):
                    continue

        return list(set(tags))

    def _should_search_file(self, file_path: Path) -> bool:
        """íŒŒì¼ ê²€ìƒ‰ ì—¬ë¶€ ê²°ì •"""
        exclude_patterns = {
            '.git', '__pycache__', 'node_modules', '.venv',
            '.DS_Store', '*.pyc', '*.log'
        }

        return not any(
            file_path.match(pattern) or pattern in str(file_path)
            for pattern in exclude_patterns
        )

    def _extract_tag_id(self, tag: str) -> str:
        """TAGì—ì„œ ID ì¶”ì¶œ"""
        match = re.search(r'@[A-Z]+:([A-Z]+-\d+)', tag)
        return match.group(1) if match else tag
```

## TRUST 5ì›ì¹™ ì„¤ì •

### TRUST ì›ì¹™ í™œì„±í™”

```json
{
  "constitution": {
    "trust_principles": {
      "enabled": true,
      "principles": {
        "test_first": {
          "enabled": true,
          "coverage_threshold": 85,
          "required_tests": ["unit", "integration"],
          "frameworks": {
            "python": ["pytest"],
            "javascript": ["jest"],
            "typescript": ["jest", "vitest"],
            "go": ["go test"]
          }
        },
        "readable": {
          "enabled": true,
          "max_function_lines": 50,
          "max_file_lines": 300,
          "naming_convention": "snake_case",
          "require_docstrings": true,
          "comment_coverage": 0.3
        },
        "unified": {
          "enabled": true,
          "architectural_consistency": true,
          "naming_consistency": true,
          "pattern_consistency": true,
          "code_style": "enforced"
        },
        "secured": {
          "enabled": true,
          "security_scan": true,
          "dependency_scan": true,
          "secret_detection": true,
          "input_validation": "required",
          "output_encoding": "required"
        },
        "trackable": {
          "enabled": true,
          "tag_system": "required",
          "git_history": "detailed",
          "change_tracking": "automatic",
          "decision_logging": "required"
        }
      }
    }
  }
}
```

### í’ˆì§ˆ ê²Œì´íŠ¸ ì„¤ì •

```json
{
  "quality_gates": {
    "enabled": true,
    "gates": [
      {
        "name": "code_quality",
        "type": "static_analysis",
        "tools": ["ruff", "mypy", "security-scan"],
        "threshold": {
          "errors": 0,
          "warnings": 10,
          "suggestions": 50
        },
        "blocking": true
      },
      {
        "name": "test_coverage",
        "type": "test_analysis",
        "tools": ["pytest", "coverage"],
        "threshold": {
          "minimum_coverage": 85,
          "failed_tests": 0
        },
        "blocking": true
      },
      {
        "name": "security_scan",
        "type": "security_analysis",
        "tools": ["bandit", "safety"],
        "threshold": {
          "high_vulnerabilities": 0,
          "medium_vulnerabilities": 5
        },
        "blocking": true
      },
      {
        "name": "documentation",
        "type": "doc_analysis",
        "tools": ["doc_coverage"],
        "threshold": {
          "api_documentation": 100,
          "code_documentation": 80
        },
        "blocking": false
      }
    ],
    "auto_fix": {
      "enabled": true,
      "fixable_issues": ["formatting", "simple_linting"],
      "require_approval": false
    }
  }
}
```

## ê°œì¸í™” ì„¤ì •

### ì‚¬ìš©ì í”„ë¡œí•„ ì„¤ì •

```json
{
  "user_profile": {
    "name": "ì‚¬ìš©ì ì´ë¦„",
    "nickname": "ê°œë°œì",
    "email": "user@example.com",
    "timezone": "Asia/Seoul",
    "preferred_working_hours": {
      "start": "09:00",
      "end": "18:00",
      "breaks": ["12:00-13:00"]
    },
    "communication_style": {
      "formality": "casual",
      "verbosity": "detailed",
      "language": "ko",
      "include_emoji": true
    },
    "expertise": {
      "primary": ["python", "backend", "api"],
      "secondary": ["docker", "database", "testing"],
      "learning": ["kubernetes", "machine_learning"]
    },
    "preferences": {
      "auto_suggestions": true,
      "code_examples": true,
      "step_by_step": true,
      "ask_before_major_changes": true
    }
  }
}
```

### ë‹¨ì¶•í‚¤ ë° ë§¤í¬ë¡œ ì„¤ì •

```json
{
  "shortcuts": {
    "command_shortcuts": {
      "qp": "/alfred:1-plan",
      "qr": "/alfred:2-run",
      "qs": "/alfred:3-sync",
      "q0": "/alfred:0-project",
      "doc": "/alfred:3-sync --docs-only",
      "test": "pytest -v",
      "lint": "ruff check && ruff format"
    },
    "text_macros": {
      "todo": "// TODO: ",
      "fixme": "// FIXME: ",
      "note": "// NOTE: ",
      "spec_template": "# `@SPEC:{DOMAIN}-{ID}: {TITLE}\\n\\n## ê°œìš”\\n\\n## ìš”êµ¬ì‚¬í•­\\n\\n## ìˆ˜ìš© ê¸°ì¤€"
    },
    "workflow_shortcuts": {
      "new_feature": ["qp", "qr", "qs"],
      "bug_fix": ["qp --type=bug", "qr", "qs"],
      "refactor": ["qr --type=refactor", "qs"]
    }
  }
}
```

### AI ì‘ë‹µ ìŠ¤íƒ€ì¼ ì„¤ì •

```json
{
  "ai_response_preferences": {
    "code_style": {
      "include_comments": true,
      "include_docstrings": true,
      "include_type_hints": true,
      "follow_project_conventions": true,
      "error_handling": "comprehensive"
    },
    "explanation_style": {
      "detail_level": "detailed",
      "include_examples": true,
      "include_alternatives": true,
      "include_rationale": true,
      "step_by_step": true
    },
    "interaction_style": {
      "ask_confirmations": true,
      "provide_options": true,
      "summarize_actions": true,
      "include_progress": true
    }
  }
}
```

## ì„¤ì • íŒŒì¼ ë°±ì—… ë° ë³µì›

### ìë™ ë°±ì—… ì„¤ì •

```json
{
  "backup": {
    "enabled": true,
    "automatic": {
      "enabled": true,
      "schedule": "daily",
      "time": "02:00",
      "retention_days": 30,
      "max_backups": 10
    },
    "manual": {
      "enabled": true,
      "prompt_before_major_changes": true,
      "backup_before_sync": true
    },
    "storage": {
      "location": ".moai/backups",
      "compression": true,
      "encryption": false
    },
    "scope": {
      "include": [
        ".moai/config.json",
        ".claude/settings.json",
        ".moai/project/",
        ".moai/memory/"
      ],
      "exclude": [
        ".moai/reports/",
        ".moai/cache/",
        "*.log"
      ]
    }
  }
}
```

### ë°±ì—… ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# backup-config.sh

set -e

PROJECT_DIR="$(pwd)"
BACKUP_DIR=".moai/backups"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
BACKUP_NAME="config_backup_${TIMESTAMP}"

echo "ğŸ”„ Creating configuration backup..."

# ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p "${BACKUP_DIR}"

# ì„¤ì • íŒŒì¼ ë°±ì—…
tar -czf "${BACKUP_DIR}/${BACKUP_NAME}.tar.gz" \
    .moai/config.json \
    .claude/settings.json \
    .moai/project/ \
    .moai/memory/ \
    --exclude='.moai/reports/' \
    --exclude='.moai/cache/' \
    --exclude='*.log'

# ë°±ì—… ì •ë³´ ì €ì¥
cat > "${BACKUP_DIR}/${BACKUP_NAME}.info" << EOF
Backup created: $(date)
Project: $(basename $PROJECT_DIR)
Git branch: $(git branch --show-current 2>/dev/null || echo 'N/A')
Git commit: $(git rev-parse --short HEAD 2>/dev/null || echo 'N/A')
Files included:
- .moai/config.json
- .claude/settings.json
- .moai/project/
- .moai/memory/
EOF

echo "âœ… Backup created: ${BACKUP_DIR}/${BACKUP_NAME}.tar.gz"

# ì˜¤ë˜ëœ ë°±ì—… ì •ë¦¬
cd "${BACKUP_DIR}"
ls -t config_backup_*.tar.gz | tail -n +11 | xargs -r rm
echo "ğŸ§¹ Old backups cleaned up"
```

### ë³µì› ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# restore-config.sh

set -e

BACKUP_DIR=".moai/backups"

# ë°±ì—… ëª©ë¡ í‘œì‹œ
echo "ğŸ“‹ Available backups:"
ls -la "${BACKUP_DIR}"/config_backup_*.tar.gz | nl

if [ $# -eq 0 ]; then
    echo -n "Select backup number (1-${#BACKUPS}): "
    read -r SELECTION
else
    SELECTION=$1
fi

BACKUP_FILE=$(ls "${BACKUP_DIR}"/config_backup_*.tar.gz | sed -n "${SELECTION}p")

if [ ! -f "$BACKUP_FILE" ]; then
    echo "<span class="material-icons">cancel</span> Invalid backup selection"
    exit 1
fi

echo "ğŸ”„ Restoring from: $(basename "$BACKUP_FILE")"

# í˜„ì¬ ì„¤ì • ë°±ì—…
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
PRE_RESTORE_BACKUP="pre_restore_${TIMESTAMP}"
tar -czf "${BACKUP_DIR}/${PRE_RESTORE_BACKUP}.tar.gz" \
    .moai/config.json \
    .claude/settings.json \
    .moai/project/ \
    .moai/memory/ \
    2>/dev/null || true

# ë³µì› ì‹¤í–‰
tar -xzf "$BACKUP_FILE" -C .

echo "âœ… Configuration restored"
echo "ğŸ’¾ Pre-restore backup: ${PRE_RESTORE_BACKUP}.tar.gz"
```

## ì„¤ì • ìµœì í™” ì „ëµ

### ì„±ëŠ¥ ìµœì í™”

```json
{
  "performance": {
    "ai_optimization": {
      "context_compression": true,
      "max_context_tokens": 150000,
      "use_fast_model_for_simple_tasks": true,
      "simple_task_threshold": 1000,
      "cache_responses": true,
      "cache_ttl": 3600
    },
    "parallel_processing": {
      "enabled": true,
      "max_concurrent_agents": 3,
      "agent_timeout": 300,
      "load_balancing": "round_robin"
    },
    "memory_management": {
      "session_memory_limit": "1GB",
      "cache_cleanup_interval": 3600,
      "garbage_collection": "automatic"
    }
  }
}
```

### ë¹„ìš© ìµœì í™”

```json
{
  "cost_optimization": {
    "token_management": {
      "track_usage": true,
      "daily_limit": 1000000,
      "alert_threshold": 0.8,
      "cost_tracking": {
        "enabled": true,
        "currency": "USD",
        "monthly_budget": 100
      }
    },
    "model_selection": {
      "auto_optimize": true,
      "prefer_fast_model": true,
      "complexity_threshold": 0.7,
      "cost_threshold": 0.01
    },
    "caching": {
      "enabled": true,
      "intelligent_caching": true,
      "cache_hit_rate_target": 0.7,
      "cache_size_limit": "100MB"
    }
  }
}
```

### ì›Œí¬í”Œë¡œìš° ìµœì í™”

```json
{
  "workflow_optimization": {
    "automation_level": "high",
    "auto_approve_safe_operations": true,
    "batch_similar_operations": true,
    "parallel_independent_tasks": true,
    "predictive_suggestions": true,
    "learning_from_history": true
  },
  "user_experience": {
    "response_time_target": 2000,
    "progress_indicators": true,
    "cancel_long_operations": true,
    "undo_functionality": true,
    "quick_actions": true
  }
}
```

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ì„¤ì • ë¬¸ì œ

#### 1. ì„¤ì • íŒŒì¼ ì†ìƒ

**ì¦ìƒ**:
```
Error: Invalid JSON in .moai/config.json
```

**í•´ê²°**:
```bash
# ë°±ì—…ì—ì„œ ë³µì›
./restore-config.sh

# ë˜ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ìƒì„±
moai-adk init . --restore-config
```

#### 2. ê¶Œí•œ ë¬¸ì œ

**ì¦ìƒ**:
```
Permission denied: .claude/settings.json
```

**í•´ê²°**:
```bash
# ê¶Œí•œ ìˆ˜ì •
chmod 644 .moai/config.json
chmod 644 .claude/settings.json

# ì†Œìœ ì í™•ì¸
ls -la .moai/ .claude/
```

#### 3. Hook ë™ì‘ ì•ˆ í•¨

**ì¦ìƒ**:
```
Hooks not responding
```

**í•´ê²°**:
```bash
# Hook ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
ls -la .claude/hooks/alfred/
chmod +x .claude/hooks/alfred/*.py

# Claude Code ì¬ì‹œì‘
exit
claude
```

### ì„¤ì • ì§„ë‹¨ ë„êµ¬

```bash
#!/bin/bash
# diagnose-config.sh

echo "<span class="material-icons">search</span> MoAI-ADK Configuration Diagnostics"
echo "======================================"

# 1. ê¸°ë³¸ íŒŒì¼ ì¡´ì¬ í™•ì¸
echo "ğŸ“ Checking essential files..."
files=(
    ".moai/config.json"
    ".claude/settings.json"
    ".claude/hooks/alfred/alfred_hooks.py"
    "CLAUDE.md"
)

for file in "${files[@]}"; do
    if [ -f "$file" ]; then
        echo "âœ… $file exists"
    else
        echo "<span class="material-icons">cancel</span> $file missing"
    fi
done

# 2. JSON ìœ íš¨ì„± ê²€ì‚¬
echo -e "\nğŸ“‹ Validating JSON files..."
for json_file in .moai/config.json .claude/settings.json; do
    if [ -f "$json_file" ]; then
        if python3 -c "import json; json.load(open('$json_file'))" 2>/dev/null; then
            echo "âœ… $json_file is valid JSON"
        else
            echo "<span class="material-icons">cancel</span> $json_file has invalid JSON"
        fi
    fi
done

# 3. ê¶Œí•œ í™•ì¸
echo -e "\nğŸ” Checking permissions..."
for file in .moai/config.json .claude/settings.json; do
    if [ -f "$file" ]; then
        permissions=$(stat -f "%Lp" "$file" 2>/dev/null || stat -c "%a" "$file" 2>/dev/null)
        if [ "$permissions" = "644" ]; then
            echo "âœ… $file has correct permissions ($permissions)"
        else
            echo "<span class="material-icons">warning</span>  $file has unusual permissions ($permissions)"
        fi
    fi
done

# 4. Hook ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
echo -e "\nğŸª Checking hooks..."
if [ -f ".claude/hooks/alfred/alfred_hooks.py" ]; then
    if [ -x ".claude/hooks/alfred/alfred_hooks.py" ]; then
        echo "âœ… Hook script is executable"
    else
        echo "<span class="material-icons">cancel</span> Hook script is not executable"
        echo "   Run: chmod +x .claude/hooks/alfred/alfred_hooks.py"
    fi
else
    echo "<span class="material-icons">cancel</span> Hook script missing"
fi

# 5. ë²„ì „ í˜¸í™˜ì„± í™•ì¸
echo -e "\n<span class="material-icons">search</span> Checking version compatibility..."
if [ -f ".moai/config.json" ]; then
    moai_version=$(python3 -c "import json; print(json.load(open('.moai/config.json')).get('moai', {}).get('version', 'unknown'))" 2>/dev/null)
    echo "ğŸ“¦ MoAI-ADK version in config: $moai_version"

    current_version=$(moai-adk --version 2>/dev/null | cut -d' ' -f3 || echo "unknown")
    echo "ğŸ“¦ Installed MoAI-ADK version: $current_version"

    if [ "$moai_version" != "$current_version" ] && [ "$moai_version" != "unknown" ] && [ "$current_version" != "unknown" ]; then
        echo "<span class="material-icons">warning</span>  Version mismatch detected"
        echo "   Run: moai-adk update"
    fi
fi

echo -e "\nğŸ¯ Diagnostics complete!"
```

---

ì´ ê°€ì´ë“œë¥¼ í†µí•´ MoAI-ADK í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì„¤ì •ì„ ì´í•´í•˜ê³  ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì •ì€ í”„ë¡œì íŠ¸ì˜ ì„±ê³µì— ì¤‘ìš”í•œ ì—­í• ì„ í•˜ë¯€ë¡œ, ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  í•„ìš”ì— ë”°ë¼ ì¡°ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.