# CSS 아키텍처 다이어그램

## 전체 스타일 흐름

```
┌─────────────────────────────────────────────────────────────┐
│                    브라우저 요청                            │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                   mkdocs.yml                               │
│  ┌────────────────────────────────────────────────────┐   │
│  │ theme: material                                    │   │
│  │ custom_dir: overrides/                             │   │
│  │ extra_css:                                         │   │
│  │   - stylesheets/extra.css                          │   │
│  └────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
        ┌───────────────────┴───────────────────┐
        │                                       │
        ▼                                       ▼
  ┌─────────────────┐              ┌──────────────────────┐
  │ Material 테마   │              │ overrides/main.html  │
  │ 기본 스타일     │              │ (CSS 변수 정의)      │
  │                 │              │                      │
  │ • 레이아웃      │              │ :root {              │
  │ • 색상          │              │  --md-default-bg    │
  │ • 타이포그래피  │              │  --md-accent-color  │
  │ • 애니메이션    │              │ }                    │
  └─────────────────┘              │                      │
                                   │ [data-md-color-    │
                                   │  scheme="slate"] {} │
                                   └──────────────────────┘
        │                                       │
        └───────────────────┬───────────────────┘
                            │
                            ▼
      ┌─────────────────────────────────────┐
      │ stylesheets/extra.css               │
      │ (커스텀 오버라이드)                  │
      │                                     │
      │ .md-content {                       │
      │   width: 70% !important;            │
      │ }                                   │
      │                                     │
      │ [data-md-color-scheme="default"]    │
      │  .md-header {                       │
      │   background-color: ... !important; │
      │ }                                   │
      └─────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                   렌더링된 페이지                            │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ 헤더 (F7F6F2) │ 좌측네비(숨김) │ 본문(70%) │TOC(30%)│ │
│  └─────────────────────────────────────────────────────┘  │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ 코드블록 │ 테이블 │ 링크 │ 리스트 │ Mermaid        │  │
│  └─────────────────────────────────────────────────────┘  │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ 푸터                                                │  │
│  └─────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## CSS 우선순위 계층

```
┌──────────────────────────────────────────────────────┐
│ 1. 인라인 스타일 (style="...")        [최고 우선순위]  │
└──────────────────────────────────────────────────────┘
                    │
                    ▼
┌──────────────────────────────────────────────────────┐
│ 2. extra.css의 !important 선언                        │
│    (Material 테마 강제 오버라이드)                    │
└──────────────────────────────────────────────────────┘
                    │
                    ▼
┌──────────────────────────────────────────────────────┐
│ 3. extra.css의 일반 선언                             │
└──────────────────────────────────────────────────────┘
                    │
                    ▼
┌──────────────────────────────────────────────────────┐
│ 4. Material 테마 기본 스타일                          │
│    (overrides/main.html CSS 변수 적용)               │
└──────────────────────────────────────────────────────┘
                    │
                    ▼
┌──────────────────────────────────────────────────────┐
│ 5. 브라우저 기본값           [최저 우선순위]         │
└──────────────────────────────────────────────────────┘
```

## 파일 관계도

```
docs/
├── mkdocs.yml
│   └─ theme: material
│   └─ custom_dir: overrides
│   └─ extra_css:
│       └─ stylesheets/extra.css
│
├── overrides/
│   └─ main.html
│       ├─ <style> CSS 변수 정의
│       ├─ 라이트/다크 모드 색상
│       └─ 폰트 로드
│
└── stylesheets/
    └─ extra.css (1195줄)
        ├─ 레이아웃 최적화 (1-113)
        ├─ 헤더 스타일 (168-218)
        ├─ 사이드바 스타일 (235-290)
        ├─ 이탤릭체 제거 (128-166)
        ├─ 코드 블록 (954-1167)
        ├─ 테이블 스타일 (1015-1058)
        ├─ 반응형 디자인 (595-811)
        └─ 다크 모드 (전체적으로)
```

## 레이아웃 구조

### 데스크톱 (≥ 1220px)

```
┌────────────────────────────────────────────────┐
│ 헤더 (100% 너비, max-width: 1220px)             │
├────────────────────────────────────────────────┤
│ 컨테이너 (1220px, 중앙정렬)                    │
│ ┌──────────────────────────────────────────┐  │
│ │                                          │  │
│ │ 좌측네비(숨김)│ 본문(70%)│ TOC(30%)    │  │
│ │              │         │ border-left: │  │
│ │              │         │ 1px solid    │  │
│ │              │         │              │  │
│ └──────────────────────────────────────────┘  │
├────────────────────────────────────────────────┤
│ 푸터 (100% 너비, max-width: 1220px)             │
└────────────────────────────────────────────────┘
```

### 태블릿 (76.25em - 1220px)

```
┌──────────────────────────────┐
│ 헤더                         │
├──────────────────────────────┤
│ 본문(100%)                  │
│                              │
│                              │
├──────────────────────────────┤
│ TOC(100%)                   │
│ border-top: 1px solid       │
│                              │
├──────────────────────────────┤
│ 푸터                        │
└──────────────────────────────┘
```

### 모바일 (< 76.25em)

```
┌─────────────────┐
│ 헤더            │
│ [☰] 메뉴        │
├─────────────────┤
│ 본문(100%)      │
│                 │
│                 │
│                 │
├─────────────────┤
│ TOC(100%)       │
│                 │
├─────────────────┤
│ 푸터            │
└─────────────────┘

[☰] 클릭 시:
└─ 좌측네비 슬라이드 오버레이
   (position: fixed, left: -100%→0)
```

## 테마 전환 흐름

```
┌─────────────────────────────────────────┐
│   사용자 테마 선택 (라이트/다크)        │
└─────────────────────────────────────────┘
            │
            ▼
┌─────────────────────────────────────────┐
│ JavaScript가 감지                       │
│ (overrides/stylesheets/language-      │
│  selector.js)                           │
└─────────────────────────────────────────┘
            │
            ▼
┌──────────────────────────────┬──────────────────────────┐
│ 라이트 모드 선택            │ 다크 모드 선택          │
├──────────────────────────────┼──────────────────────────┤
│ data-md-color-scheme=        │ data-md-color-scheme=   │
│ "default" 추가               │ "slate" 추가            │
│                              │                         │
│ CSS 적용:                    │ CSS 적용:               │
│ [data-md-color-scheme=       │ [data-md-color-scheme= │
│  "default"]...               │  "slate"]...            │
│                              │                         │
│ 색상:                        │ 색상:                   │
│ bg: #ffffff                  │ bg: #171612             │
│ fg: #171612                  │ fg: #F7F6F2             │
└──────────────────────────────┴──────────────────────────┘
            │
            ▼
┌─────────────────────────────────────────┐
│   CSS 변수 값 자동 업데이트             │
│   :root와                               │
│   [data-md-color-scheme] 재계산         │
└─────────────────────────────────────────┘
            │
            ▼
┌─────────────────────────────────────────┐
│   페이지 색상 즉시 전환                  │
│   (transition: 0.3s ease)               │
└─────────────────────────────────────────┘
```

## CSS 선택자 우선순위 예제

```
낮은 특이도 (높은 우선순위)
└─ a                                    (1)
└─ .md-content a                        (1+1 = 2)
└─ .md-main .md-content a               (1+1+1 = 3)
└─ [data-md-color-scheme="default"]
   .md-content a                        (1+2 = 3)
└─ .md-content a:hover                  (1+1 = 2)

높은 특이도 (낮은 우선순위)
└─ html body .md-container .md-content
   a                                    (1+1+2 = 4)

최고 우선순위 (하지만 필요시에만 사용)
└─ .md-content a !important             (1+1 + !important)
```

**규칙**: 가장 낮은 특이도로 스타일을 작성하세요.
덜 구체적일수록 재사용성이 높습니다.

## 색상 결정 플로우

```
새로운 색상 필요?
│
├─ 라이트 모드의 가독성 중요?
│  ├─ YES → #171612 (어두운 검은색) 사용
│  └─ NO  → 다음으로
│
├─ 다크 모드의 가독성 중요?
│  ├─ YES → #F7F6F2 (밝은 색) 사용
│  └─ NO  → 다음으로
│
├─ 기존 Material 변수가 있는가?
│  ├─ YES → var(--md-xxx-color) 사용
│  └─ NO  → 다음으로
│
├─ 강조색이 필요한가?
│  ├─ YES → var(--md-accent-fg-color) 사용
│  └─ NO  → 다음으로
│
└─ 새로운 색상 정의
   ├─ overrides/main.html에 CSS 변수 추가
   └─ 라이트/다크 모드 모두 정의
```

## 수정 시나리오

### 시나리오 1: 링크 색상 변경

```
현재 상태: var(--md-accent-fg-color) → #504F4B (라이트), #C9C8C4 (다크)
원하는 상태: 더 밝은 색으로 변경

단계:
1. /docs/overrides/main.html 열기
2. [data-md-color-scheme] 섹션 찾기
3. --md-accent-fg-color 값 변경
4. mkdocs serve 실행하여 확인
5. 라이트/다크 모두 테스트
```

### 시나리오 2: 코드 블록 배경색 변경

```
현재 상태: #f5f5f5 (라이트), #2a2a2a (다크)
원하는 상태: 더 어두운 배경

단계:
1. /docs/stylesheets/extra.css 열기
2. ".md-content .highlight" 검색
3. [data-md-color-scheme="default"]와
   [data-md-color-scheme="slate"] 섹션 모두 수정
4. background-color 값 변경
5. mkdocs serve로 확인
```

### 시나리오 3: 모바일 레이아웃 수정

```
현재 상태: 모바일에서 텍스트가 너무 작음
원하는 상태: 더 큰 폰트 크기

단계:
1. /docs/stylesheets/extra.css 열기
2. "@media screen and (max-width: 76.25em)" 검색
3. .md-content { font-size: ... } 값 증가
4. 모바일 디바이스에서 테스트
5. 데스크톱 레이아웃도 확인 (regression)
```

---

**핵심 포인트**:
- Material → overrides/main.html → extra.css 순서로 적용
- !important는 Material 테마 오버라이드가 필요할 때만 사용
- 모든 색상 변경은 라이트/다크 모드 모두 처리
- 반응형 규칙은 모바일 먼저 (mobile-first 원칙)
