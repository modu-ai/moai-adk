---
title: "Mermaid 시각화 시스템 검수 기준"
spec_id: "DOC-VISUAL-001"
version: "1.0.0"
status: "draft"
created_at: "2025-11-05"
updated_at: "2025-11-05"
author: "spec-builder"
reviewer: ""
type: "acceptance-criteria"
priority: "high"
---

# Mermaid 시각화 시스템 검수 기준

## 검수 개요

이 문서는 DOC-VISUAL-001 SPEC의 구현 완료를 검증하기 위한 상세한 검수 기준을 정의합니다. 모든 기능이 요구사항에 따라 정확하게 구현되었는지 확인하기 위한 Given-When-Then 형식의 시나리오를 포함합니다.

## 검수 환경

### 테스트 환경 구성
- **브라우저**: Chrome 120+, Firefox 115+, Safari 17+, Edge 120+
- **화면 해상도**: 1920x1080 (데스크탑), 375x812 (모바일)
- **네트워크**: 4G 및 Wi-Fi 환경
- **접근성 도구**: VoiceOver (macOS), NVDA (Windows), ChromeVox

### 검수 데이터
- **테스트 다이어그램**: 10개 이상의 다양한 유형 Mermaid 다이어그램
- **대용량 테스트**: 100+ 노드를 포함하는 대규모 다이어그램
- **에지 케이스**: 비정상적인 구문, 빈 다이어그램, 특수문자 포함

## 기능 검수 기준

### 1. 다이어그램 자동 생성

#### 시나리오 1.1: Markdown 코드 블록 감지
```gherkin
Feature: Mermaid 코드 블록 자동 감지 및 렌더링

Scenario: 기본 Mermaid 코드 블록 렌더링
  Given 문서에 다음 Mermaid 코드 블록이 포함되어 있음:
    """
    ```mermaid
    graph TD
        A[시작] --> B[처리]
        B --> C[종료]
    ```
    """
  When 사용자가 문서 페이지를 로드함
  Then 코드 블록이 SVG 다이어그램으로 자동 변환됨
  And 다이어그램이 페이지 내에 올바르게 표시됨
  And 원본 코드는 숨겨지거나 소스 뷰로 제공됨
```

#### 시나리오 1.2: 다양한 다이어그램 유형 지원
```gherkin
Feature: 다양한 Mermaid 다이어그램 유형 렌더링

Scenario Outline: 다이어그램 유형별 렌더링
  Given "<diagram_type>" 유형의 Mermaid 코드가 포함된 문서가 있음
  When 페이지가 렌더링됨
  Then "<expected_element>" 요소가 올바르게 표시됨
  And 다이어그램의 구조가 시각적으로 이해 가능함

  Examples:
    | diagram_type | expected_element |
    | flowchart    | 노드와 연결선 |
    | sequence     | 참여자와 메시지 |
    | class        | 클래스와 관계선 |
    | state        | 상태와 전환 |
    | gantt        | 타임라인과 작업 |
```

#### 시나리오 1.3: 렌더링 실패 처리
```gherkin
Feature: 잘못된 Mermaid 코드 처리

Scenario: 문법 오류가 있는 다이어그램
  Given 문법 오류를 포함하는 Mermaid 코드 블록이 있음
  When 페이지가 로드됨
  Then 원본 코드 블록이 표시됨
  And "다이어그램 렌더링 오류" 메시지가 표시됨
  And 문법 검사 제안이 제공됨

Scenario: 지원하지 않는 다이어그램 유형
  Given 지원하지 않는 다이어그램 유형의 코드가 있음
  When 렌더링 시도됨
  Then "지원하지 않는 다이어그램 유형" 메시지가 표시됨
  And 지원 가능한 유형 목록이 제공됨
```

### 2. 무채색 테마 시스템

#### 시나리오 2.1: 라이트 모드 테마 적용
```gherkin
Feature: 라이트 모드 무채색 테마

Scenario: 라이트 모드에서의 다이어그램 표시
  Given 시스템 테마가 라이트 모드로 설정됨
  And Mermaid 다이어그램이 포함된 페이지가 있음
  When 페이지가 로드됨
  Then 다이어그램 배경색이 흰색 계열(#ffffff)로 표시됨
  And 주요 텍스트와 선이 어두운 회색(#1e293b)으로 표시됨
  And 색상 대비가 4.5:1 이상임
  And 색상 정보가 없는 사용자도 구조를 이해할 수 있음
```

#### 시나리오 2.2: 다크 모드 테마 적용
```gherkin
Feature: 다크 모드 무채색 테마

Scenario: 다크 모드에서의 다이어그램 표시
  Given 시스템 테마가 다크 모드로 설정됨
  And Mermaid 다이어그램이 포함된 페이지가 있음
  When 페이지가 로드됨
  Then 다이어그램 배경색이 어두운 회색(#1e293b)으로 표시됨
  And 주요 텍스트와 선이 밝은 회색(#f8fafc)으로 표시됨
  And 색상 대비가 4.5:1 이상임
  And 눈의 피로를 최소화하는 색상 조합이 적용됨
```

#### 시나리오 2.3: 동적 테마 전환
```gherkin
Feature: 실시간 테마 전환

Scenario: 테마 전환 버튼 클릭
  Given 라이트 모드로 표시된 다이어그램 페이지가 있음
  When 사용자가 테마 전환 버튼을 클릭함
  Then 다이어그램 테마가 다크 모드로 부드럽게 전환됨
  And 전환 애니메이션이 300ms 이내에 완료됨
  And 사용자의 테마 설정이 localStorage에 저장됨

Scenario: 시스템 테마 자동 감지
  Given 사용자의 OS 테마 설정이 다크 모드임
  And 웹사이트 테마가 '자동'으로 설정됨
  When 페이지가 처음 로드됨
  Then 다이어그램이 자동으로 다크 모드 테마로 표시됨
```

### 3. Material 아이콘 통합

#### 시나리오 3.1: Material 아이콘 자동 적용
```gherkin
Feature: 다이어그램 내 Material 아이콘 통합

Scenario: Flowchart 노드에 아이콘 적용
  Given 다음 Mermaid flowchart 코드가 있음:
    """
    graph TD
        A[시작] --> B[데이터 처리]
        B --> C[결과 출력]
    """
  And 아이콘 매핑 설정이 활성화됨
  When 다이어그램이 렌더링됨
  Then '시작' 노드에 play_arrow 아이콘이 표시됨
  And '데이터 처리' 노드에 storage 아이콘이 표시됨
  And '결과 출력' 노드에 download 아이콘이 표시됨
  And 모든 아이콘이 일관된 크기(24px)로 표시됨
```

#### 시나리오 3.2: 아이콘-텍스트 레이아웃
```gherkin
Feature: 아이콘과 텍스트 조합 레이아웃

Scenario: 노드 내 아이콘과 텍스트 정렬
  Given 아이콘이 포함된 다이어그램 노드가 있음
  When 다이어그램이 렌더링됨
  Then 아이콘이 텍스트 왼쪽에 수평 정렬됨
  And 아이콘과 텍스트 사이에 8px 간격이 유지됨
  And 전체 노드 중앙에 콘텐츠가 정렬됨
  And 아이콘이 테마 색상에 맞게 표시됨
```

#### 시나리오 3.3: 커스텀 아이콘 확장
```gherkin
Feature: 사용자 정의 아이콘 지원

Scenario: 커스텀 아이콘 라이브러리 추가
  Given 사용자가 커스텀 아이콘 SVG 파일을 업로드함
  And 아이콘 이름을 'custom-api'로 지정함
  When 다이어그램에서 해당 아이콘을 참조함
  Then 커스텀 아이콘이 올바르게 표시됨
  And Material 아이콘과 동일한 스타일이 적용됨
  And 아이콘이 캐싱되어 빠르게 로드됨
```

### 4. 상호작용 기능

#### 시나리오 4.1: 클릭 상호작용
```gherkin
Feature: 다이어그램 요소 클릭 상호작용

Scenario: 노드 클릭 시 페이지 내비게이션
  Given 다이어그램 노드에 클릭 가능한 링크가 설정됨
  When 사용자가 해당 노드를 클릭함
  Then 링크된 페이지로 부드럽게 스크롤됨
  And 목표 섹션이 하이라이트됨
  And 브라우저 히스토리에 상태가 기록됨

Scenario: 노드 클릭 시 모달 표시
  Given 다이어그램 노드에 상세 정보가 설정됨
  When 사용자가 노드를 클릭함
  Then 상세 정보 모달이 표시됨
  And 모달 배경이 반투명으로 처리됨
  And 닫기 버튼과 ESC 키로 모달을 닫을 수 있음
```

#### 시나리오 4.2: 내보내기 기능
```gherkin
Feature: 다이어그램 내보내기

Scenario: SVG 형식으로 내보내기
  Given 다이어그램 우클릭 메뉴가 있음
  When 사용자가 'SVG로 내보내기'를 선택함
  Then 다이어그램 SVG 파일이 다운로드됨
  And 파일 이름이 다이어그램 제목을 반영함
  And SVG에 메타데이터가 포함됨

Scenario: PNG 형식으로 내보내기
  Given 다이어그램 내보내기 옵션이 있음
  When 사용자가 'PNG로 내보내기'를 선택함
  Then PNG 파일이 생성됨
  And 해상도가 300 DPI로 설정됨
  And 배경이 투명하게 처리됨
```

#### 시나리오 4.3: 확대/축소 기능
```gherkin
Feature: 다이어그램 확대/축소

Scenario: 마우스 휠로 확대/축소
  Given 다이어그램이 표시된 상태임
  When 사용자가 마우스 휠을 위로 스크롤함
  Then 다이어그램이 1.2배 확대됨
  And 확대 중심점이 마우스 커서 위치임
  And 최대 3배까지 확대 가능함

Scenario: 전체 화면 보기
  Given 다이어그램 전체 화면 버튼이 있음
  When 사용자가 전체 화면 버튼을 클릭함
  Then 다이어그램이 전체 화면 모드로 전환됨
  And ESC 키로 전체 화면을 종료할 수 있음
  And 화면 방향에 따라 최적화됨
```

### 5. 성능 요구사항

#### 시나리오 5.1: 렌더링 성능
```gherkin
Feature: 다이어그램 렌더링 성능

Scenario: 일반 크기 다이어그램 렌더링
  Given 20개 노드를 포함하는 다이어그램이 있음
  When 페이지가 로드됨
  Then 다이어그램이 1초 이내에 렌더링됨
  And 페이지 로딩이 차단되지 않음

Scenario: 대규모 다이어그램 렌더링
  Given 100개 노드를 포함하는 복잡한 다이어그램이 있음
  When 다이어그램이 렌더링됨
  Then 렌더링 시간이 2초를 초과하지 않음
  And 로딩 인디케이터가 표시됨
  And 메모리 사용량이 50MB를 초과하지 않음
```

#### 시나리오 5.2: 지연 로딩
```gherkin
Feature: 지연 로딩 최적화

Scenario: 뷰포트 외 다이어그램
  Given 페이지에 10개의 다이어그램이 있음
  And 현재 뷰포트에 3개만 표시됨
  When 페이지가 로드됨
  Then 뷰포트 내 3개 다이어그램만 즉시 렌더링됨
  And 나머지 7개는 스크롤 시 렌더링됨
  And 플레이스홀더가 표시됨
```

### 6. 접근성 요구사항

#### 시나리오 6.1: 스크린 리더 지원
```gherkin
Feature: 스크린 리더 접근성

Scenario: 다이어그램 구조 읽기
  Given 스크린 리더가 활성화됨
  And 다이어그램이 페이지에 표시됨
  When 사용자가 다이어그램으로 포커스를 이동함
  Then 다이어그램 유형이 읽힘 ("Flowchart 다이어그램")
  And 노드 수와 관계가 요약됨 ("3개 노드, 2개 연결")
  And 각 노드에 순차적으로 접근 가능함

Scenario: 상세 정보 탐색
  Given 스크린 리더 사용자가 다이어그램 상호작용을 원함
  When 사용자가 상세 정보 탐색 모드를 활성화함
  Then 각 노드의 내용이 읽힘
  And 노드 간 연결 관계가 설명됨
  And 다이어그램 전체 구조가 텍스트로 설명됨
```

#### 시나리오 6.2: 키보드 네비게이션
```gherkin
Feature: 키보드 네비게이션 지원

Scenario: 다이어그램 내 키보드 이동
  Given 다이어그램이 표시됨
  And 사용자가 키보드만으로 조작함
  When Tab 키를 누름
  Then 포커스가 다이어그램 내 첫 번째 요소로 이동함
  And 포커스가 시각적으로 명확하게 표시됨
  And 화살표 키로 노드 간 이동 가능함

Scenario: 상호작용 키보드 단축키
  Given 다이어그램 요소에 포커스가 있음
  When Enter 키를 누름
  Then 요소의 기본 동작(클릭)이 실행됨
  And Space 키로도 동일한 동작이 실행됨
  And 단축키 도움말에 키 조합이 표시됨
```

#### 시나리오 6.3: 고대비 모드
```gherkin
Feature: 고대비 접근성

Scenario: 고대비 테마 적용
  Given 사용자가 고대비 모드를 활성화함
  When 다이어그램이 표시됨
  Then 색상 대비가 7:1 이상으로 유지됨
  And 윤곽선이 2px 두께로 표시됨
  And 텍스트가 선명하게 읽을 수 있음

Scenario: 색상 무정보 사용
  Given 색상을 인식하지 못하는 사용자가 있음
  When 다이어그램을 봄
  Then 모든 정보가 형태와 패턴으로 구분 가능함
  And 색상만으로 구분된 정보가 없음
  And 패턴이나 텍스처로 추가 구분이 제공됨
```

## 품질 게이트

### 기능적 품질 기준
- **다이어그램 렌더링 성공률**: 99% 이상
- **지원 다이어그램 유형**: 8개 이상
- **테마 전환 성공률**: 100%
- **아이콘 표시 정확도**: 98% 이상
- **상호작용 기능 동작률**: 95% 이상

### 성능 품질 기준
- **일반 다이어그램 로드 시간**: < 1초
- **대규모 다이어그램 로드 시간**: < 2초
- **테마 전환 시간**: < 200ms
- **메모리 사용량**: < 50MB (100개 노드 기준)
- **CPU 사용량**: < 30% (렌더링 시)

### 접근성 품질 기준
- **WCAG 2.1 AA 준수율**: 100%
- **색상 대비비**: 4.5:1 이상 (일반), 7:1 이상 (고대비)
- **키보드 네비게이션 완전성**: 100%
- **스크린 리더 호환성**: 주요 스크린 리더 3개 지원

### 호환성 품질 기준
- **브라우저 지원**: Chrome, Firefox, Safari, Edge 최신 2버전
- **모바일 반응성**: iOS Safari, Android Chrome 지원
- **프린트 품질**: 300dpi 이상 해상도
- **SVG 출력 표준**: SVG 1.1 규격 준수

## 검수 절차

### 1단계: 자동화 테스트
- 단위 테스트 실행 (커버리지 85% 이상)
- 통합 테스트 실행
- 성능 벤치마크 테스트
- 접근성 자동 검증 (axe-core)

### 2단계: 수동 품질 검증
- 다양한 브라우저에서 시각적 검증
- 모바일 기기에서 반응형 테스트
- 스크린 리더로 접근성 테스트
- 다양한 다이어그램으로 기능 테스트

### 3단계: 사용자 검수
- 내부 사용자 그룹 테스트
- 알파/베타 테스터 피드백 수집
- 실제 사용 시나리오 기반 테스트
- 사용성 및 만족도 조사

### 4단계: 최종 승인
- 모든 검수 기준 통과 확인
- 성능 및 접근성 지표 검증
- 보안 및 개인정보 보호 검토
- 운영 환경 배포 승인

## 완료 정의 (Definition of Done)

기능이 완료되었다고 선언하기 위해서는 다음 모든 조건이 충족되어야 함:

1. **기능 완성**: 모든 필수 기능이 SPEC 요구사항에 따라 구현됨
2. **품질 보증**: 모든 자동화 테스트 통과 및 코드 리뷰 완료
3. **성능 준수**: 정의된 성능 기준 모두 충족
4. **접근성 준수**: WCAG 2.1 AA 표준 완전 준수
5. **문서화**: 사용자 매뉴얼 및 개발자 문서 작성 완료
6. **사용자 검수**: 목표 사용자 그룹의 검수 통과
7. **배포 준비**: 운영 환경 배포에 필요한 모든 절차 완료

## 검수 체크리스트

### 기능 검수
- [ ] Mermaid 코드 블록 자동 감지 및 변환
- [ ] 8개 이상 다이어그램 유형 지원
- [ ] 무채색 라이트/다크 테마 적용
- [ ] Material 아이콘 통합
- [ ] 클릭 상호작용 기능
- [ ] 다양한 형식 내보내기 (SVG, PNG, PDF)
- [ ] 확대/축소 및 전체 화면 보기

### 성능 검수
- [ ] 일반 다이어그램 1초 내 렌더링
- [ ] 대규모 다이어그램 2초 내 렌더링
- [ ] 테마 전환 200ms 내 완료
- [ ] 지연 로딩 최적화
- [ ] 메모리 사용량 50MB 이하 유지

### 접근성 검수
- [ ] WCAG 2.1 AA 100% 준수
- [ ] 스크린 리더 완전 호환
- [ ] 키보드 네비게이션 완전 지원
- [ ] 고대비 모드 지원
- [ ] 색상 무정보 사용자 지원

### 호환성 검수
- [ ] 주요 브라우저 최신 2버전 지원
- [ ] 모바일 기반 완전 반응형
- [ ] 프린트 출력 품질 보장
- [ ] SVG 표준 규격 준수

이 모든 검수 기준이 충족될 때, DOC-VISUAL-001 SPEC의 구현이 완료된 것으로 간주합니다.