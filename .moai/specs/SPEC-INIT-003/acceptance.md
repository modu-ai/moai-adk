# SPEC-INIT-003 ì¸ìˆ˜ ê¸°ì¤€ (v0.2.1)

> **@SPEC:INIT-003 Acceptance Criteria - ë°±ì—… ì¡°ê±´ ì™„í™”**
>
> ì´ ë¬¸ì„œëŠ” SPEC-INIT-003 "Init ë°±ì—… ë° ë³‘í•© ì˜µì…˜" ê¸°ëŠ¥ì˜ ì™„ë£Œ ì¡°ê±´ì„ ì •ì˜í•©ë‹ˆë‹¤.

---

## ğŸ“‹ Definition of Done (ì™„ë£Œ ì¡°ê±´)

### í•„ìˆ˜ ì¡°ê±´

**Phase A (moai init)**:
- âœ… OR ì¡°ê±´ ë°±ì—… ìƒì„± í…ŒìŠ¤íŠ¸ í†µê³¼ (1ê°œë¼ë„ ì¡´ì¬ ì‹œ)
- âœ… ì„ íƒì  ë°±ì—… í…ŒìŠ¤íŠ¸ í†µê³¼ (Case 2~5)
- âœ… ë©”íƒ€ë°ì´í„° `backed_up_files` ë°°ì—´ ê²€ì¦ í†µê³¼
- âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ â‰¥85%

**Phase B (/alfred:8-project)**:
- âœ… ë°±ì—… ê°ì§€ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… ê¸´ê¸‰ ë°±ì—… ìƒì„± í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… ë¶€ë¶„ ë°±ì—… ë¶„ì„ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… ë³‘í•© ë¡œì§ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ â‰¥85%

**ê³µí†µ ì¡°ê±´**:
- âœ… íƒ€ì… ì²´í¬ í†µê³¼ (`tsc --noEmit`)
- âœ… ë¦°íŠ¸ í†µê³¼ (`biome check`)
- âœ… TRUST 5ì›ì¹™ ì¤€ìˆ˜
  - **T**est First: Phase A/B ëª¨ë“  ë¡œì§ì— í…ŒìŠ¤íŠ¸ ì¡´ì¬
  - **R**eadable: ë°±ì—… ë° ë³‘í•© ì•Œê³ ë¦¬ì¦˜ ëª…í™•í•œ ì£¼ì„
  - **U**nified: TypeScript íƒ€ì… ì•ˆì „ì„± 100%
  - **S**ecured: íŒŒì¼ ê²½ë¡œ ê²€ì¦, ë°±ì—… ë©”íƒ€ë°ì´í„° ë¬´ê²°ì„±
  - **T**rackable: `@CODE:INIT-003:BACKUP`, `@CODE:INIT-003:MERGE` TAG ë¶€ì—¬
- âœ… TAG ì²´ì¸ ë¬´ê²°ì„±: `@SPEC:INIT-003` â†’ `@TEST:INIT-003` â†’ `@CODE:INIT-003`

---

## ğŸ§ª ì‹œë‚˜ë¦¬ì˜¤ë³„ ì¸ìˆ˜ ê¸°ì¤€

### AC-INIT-003-01: Phase A ë°±ì—… ìƒì„± (v0.2.1 ì—…ë°ì´íŠ¸)

**Given**: `.claude/`, `.moai/`, `CLAUDE.md` ì¤‘ **1ê°œ ì´ìƒ** ì¡´ì¬í•˜ëŠ” í”„ë¡œì íŠ¸
**When**: `moai init .` ì‹¤í–‰
**Then**:

1. âœ… ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
   - **ê²€ì¦**: `.moai-backups/{timestamp}/` ì¡´ì¬
   - **ë‚´ìš©**: ì¡´ì¬í•˜ëŠ” íŒŒì¼/í´ë”ë§Œ ì„ íƒì  ë°±ì—…

2. âœ… ë°±ì—… ë©”íƒ€ë°ì´í„° ìƒì„±
   - **ê²½ë¡œ**: `.moai/backups/latest.json`
   - **ë‚´ìš©**:
     ```json
     {
       "timestamp": "2025-10-07T14:30:00.000Z",
       "backup_path": ".moai-backups/20251007-143000",
       "backed_up_files": [".claude/", ".moai/", "CLAUDE.md"],
       "status": "pending",
       "created_by": "moai init"
     }
     ```

3. âœ… ì‚¬ìš©ì ì•ˆë‚´ ë©”ì‹œì§€ ì¶œë ¥
   - **ë©”ì‹œì§€**:
     ```
     âœ… ë°±ì—… ì™„ë£Œ: .moai-backups/20251007-143000
     ğŸ“‹ ë°±ì—…ëœ íŒŒì¼: .claude/, .moai/, CLAUDE.md

     âœ… MoAI-ADK ì„¤ì¹˜ ì™„ë£Œ!

     ğŸ“¦ ê¸°ì¡´ ì„¤ì •ì´ ë°±ì—…ë˜ì—ˆìŠµë‹ˆë‹¤:
        ê²½ë¡œ: .moai-backups/20251007-143000
        íŒŒì¼: .claude/, .moai/, CLAUDE.md

     ğŸš€ ë‹¤ìŒ ë‹¨ê³„:
        1. Claude Codeë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
        2. /alfred:8-project ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”
        3. ë°±ì—… ë‚´ìš©ì„ ë³‘í•©í• ì§€ ì„ íƒí•˜ì„¸ìš”
     ```

4. âœ… í…œí”Œë¦¿ ë³µì‚¬ ì™„ë£Œ
   - **ê²€ì¦**: `.claude/`, `.moai/`, `CLAUDE.md` ì‹ ê·œ í…œí”Œë¦¿ìœ¼ë¡œ ë³µì‚¬ë¨

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/core/installer/phase-executor.test.ts`

---

### AC-INIT-003-02: Phase B ë°±ì—… ê°ì§€ (/alfred:8-project)

**Given**: ë°±ì—… ë©”íƒ€ë°ì´í„° ì¡´ì¬ (status: pending)
**When**: `/alfred:8-project` ì‹¤í–‰
**Then**:

1. âœ… ë°±ì—… ê°ì§€
   - **ê²€ì¦**: `.moai/backups/latest.json` ì½ê¸° ì„±ê³µ
   - **ì¡°ê±´**: `status === 'pending'`

2. âœ… ë°±ì—… ë‚´ìš© ë¶„ì„ ë° ìš”ì•½ í‘œì‹œ
   - **ì¶œë ¥**:
     ```
     ğŸ“¦ ê¸°ì¡´ ì„¤ì • ë°±ì—… ë°œê²¬

     **ë°±ì—… ì‹œê°**: 2025-10-07 14:30:00
     **ë°±ì—… ê²½ë¡œ**: .moai-backups/20251007-143000

     **ë°±ì—…ëœ íŒŒì¼**:
     - .claude/
     - .moai/
     - CLAUDE.md
     ```

3. âœ… ë³‘í•© í”„ë¡¬í”„íŠ¸ í‘œì‹œ
   - **ì„ íƒì§€**:
     - ë³‘í•© (Merge): ê¸°ì¡´ ì„¤ì • ë³´ì¡´ + ì‹ ê·œ ê¸°ëŠ¥ ì¶”ê°€
     - ìƒˆë¡œ ì„¤ì¹˜ (Reinstall): ë°±ì—… ë³´ì¡´, ì‹ ê·œ í…œí”Œë¦¿ ì‚¬ìš©

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/cli/commands/project/backup-merger.test.ts`

---

### AC-INIT-003-03: ë³‘í•© ì‹¤í–‰ (Phase B)

**Given**: ì‚¬ìš©ìê°€ "ë³‘í•©" ì„ íƒ
**When**: ë³‘í•© í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
**Then**:

1. âœ… JSON Deep Merge ì„±ê³µ
   - **ëŒ€ìƒ**: `.claude/settings.json`, `.moai/config.json`
   - **ê²€ì¦**:
     - ì‹ ê·œ í•„ë“œ ì¶”ê°€ë¨
     - ê¸°ì¡´ ì‚¬ìš©ì ê°’ ìœ ì§€ë¨ (ì˜ˆ: `mode: "personal"` ë³´ì¡´)

2. âœ… Markdown HISTORY ëˆ„ì 
   - **ëŒ€ìƒ**: `CLAUDE.md`, `.moai/project/*.md`
   - **ê²€ì¦**: HISTORY ì„¹ì…˜ì— ì‹ ê·œ ë²„ì „ ì¶”ê°€, ê¸°ì¡´ í•­ëª© ë³´ì¡´

3. âœ… Hooks ë²„ì „ ë¹„êµ
   - **ëŒ€ìƒ**: `.claude/hooks/**/*.cjs`
   - **ê²€ì¦**: ì‹ ê·œ ë²„ì „ì´ ë†’ìœ¼ë©´ ì—…ë°ì´íŠ¸

4. âœ… ë³‘í•© ë¦¬í¬íŠ¸ ìƒì„±
   - **ê²½ë¡œ**: `.moai/reports/init-merge-report-{timestamp}.md`
   - **ë‚´ìš©**: ë³‘í•©ëœ íŒŒì¼, ë³´ì¡´ëœ íŒŒì¼ ëª©ë¡

5. âœ… ë©”íƒ€ë°ì´í„° status ì—…ë°ì´íŠ¸
   - **ê²€ì¦**: `.moai/backups/latest.json`ì˜ `status: "merged"`

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/cli/commands/project/merge-strategies/merge-orchestrator.test.ts`

---

### AC-INIT-003-04: ìƒˆë¡œ ì„¤ì¹˜ ì„ íƒ (Phase B)

**Given**: ì‚¬ìš©ìê°€ "ìƒˆë¡œì„¤ì¹˜" ì„ íƒ
**When**: ìƒˆë¡œì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
**Then**:

1. âœ… ë°±ì—… ë³´ì¡´
   - **ê²€ì¦**: `.moai-backups/{timestamp}/` ë””ë ‰í† ë¦¬ ì‚­ì œë˜ì§€ ì•ŠìŒ

2. âœ… ë©”íƒ€ë°ì´í„° status ì—…ë°ì´íŠ¸
   - **ê²€ì¦**: `.moai/backups/latest.json`ì˜ `status: "ignored"`

3. âœ… ì‹ ê·œ í…œí”Œë¦¿ ìœ ì§€
   - **ê²€ì¦**: `.claude/`, `.moai/`, `CLAUDE.md`ê°€ ì‹ ê·œ í…œí”Œë¦¿ ê·¸ëŒ€ë¡œ ìœ ì§€

4. âœ… ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
   - **ë©”ì‹œì§€**: "ìƒˆë¡œ ì„¤ì¹˜ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë°±ì—…ì€ ë³´ì¡´ë˜ì—ˆìŠµë‹ˆë‹¤: .moai-backups/{timestamp}/"

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/cli/commands/project/backup-merger.test.ts`

---

### AC-INIT-003-05: ë¶€ë¶„ ë°±ì—… ì‹œë‚˜ë¦¬ì˜¤ (v0.2.1 ì‹ ê·œ)

**Given**: `.claude/`ë§Œ ì¡´ì¬ (`.moai/`, `CLAUDE.md` ì—†ìŒ)
**When**: `moai init .` ì‹¤í–‰
**Then**:

1. âœ… ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
   - **ê²€ì¦**: `.moai-backups/{timestamp}/` ë””ë ‰í† ë¦¬ ìƒì„±

2. âœ… ì„ íƒì  ë°±ì—…
   - **ê²€ì¦**: `.claude/`ë§Œ ë°±ì—…ë¨
   - **í™•ì¸**: `.moai/`, `CLAUDE.md` ë°±ì—… ì‹œë„ ì•ˆ í•¨

3. âœ… ë©”íƒ€ë°ì´í„° `backed_up_files` ë°°ì—´
   - **ê²€ì¦**: `backed_up_files: [".claude/"]`

4. âœ… ì•ˆë‚´ ë©”ì‹œì§€
   - **ë©”ì‹œì§€**: "ë°±ì—…ëœ íŒŒì¼: .claude/"

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/core/installer/phase-executor.test.ts`

---

### AC-INIT-003-06: /alfred:8-project ê¸´ê¸‰ ë°±ì—… (v0.2.1 ì‹ ê·œ)

**Given**: ë°±ì—… ë©”íƒ€ë°ì´í„° ì—†ìŒ AND `.moai/`ë§Œ ì¡´ì¬
**When**: `/alfred:8-project` ì‹¤í–‰
**Then**:

1. âœ… ê¸°ì¡´ íŒŒì¼ ê°ì§€
   - **ê²€ì¦**: `.moai/` ì¡´ì¬ í™•ì¸

2. âœ… ê¸´ê¸‰ ë°±ì—… ì•ˆë‚´ ë©”ì‹œì§€
   - **ë©”ì‹œì§€**: "âš ï¸ ê¸°ì¡´ MoAI-ADK ì„¤ì •ì´ ê°ì§€ë˜ì—ˆìœ¼ë‚˜ ë°±ì—…ì´ ì—†ìŠµë‹ˆë‹¤."

3. âœ… ê¸´ê¸‰ ë°±ì—… ìƒì„±
   - **ê²€ì¦**: `.moai-backups/{timestamp}/` ë””ë ‰í† ë¦¬ ìƒì„±
   - **ë‚´ìš©**: `.moai/`ë§Œ ë°±ì—…

4. âœ… ë°±ì—… ë©”íƒ€ë°ì´í„° ìƒì„±
   - **ê²€ì¦**: `.moai/backups/latest.json` ìƒì„±
   - **ë‚´ìš©**:
     ```json
     {
       "timestamp": "2025-10-07T14:30:00.000Z",
       "backup_path": ".moai-backups/20251007-143000",
       "backed_up_files": [".moai/"],
       "status": "pending",
       "created_by": "/alfred:8-project (emergency backup)"
     }
     ```

5. âœ… ë°±ì—… ì™„ë£Œ ë©”ì‹œì§€
   - **ë©”ì‹œì§€**: "âœ… ê¸´ê¸‰ ë°±ì—… ì™„ë£Œ: .moai-backups/{timestamp}"
   - **ë©”ì‹œì§€**: "ğŸ“‹ ë°±ì—…ëœ íŒŒì¼: .moai/"

6. âœ… ë³‘í•© í”„ë¡¬í”„íŠ¸ í‘œì‹œ
   - **ê²€ì¦**: ê¸´ê¸‰ ë°±ì—… ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ ë³‘í•© í”„ë¡¬í”„íŠ¸ ì§„í–‰

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/cli/commands/project/backup-merger.test.ts`

---

### AC-INIT-003-07: ì‹ ê·œ ì„¤ì¹˜ ì¼€ì´ìŠ¤ (v0.2.1 ì‹ ê·œ)

**Given**: `.claude/`, `.moai/`, `CLAUDE.md` ëª¨ë‘ ì—†ìŒ
**When**: `moai init .` ì‹¤í–‰
**Then**:

1. âœ… ë°±ì—… ìƒëµ
   - **ê²€ì¦**: `.moai-backups/{timestamp}/` ë””ë ‰í† ë¦¬ ìƒì„± ì•ˆ í•¨

2. âœ… ì‹ ê·œ ì„¤ì¹˜ ë©”ì‹œì§€
   - **ë©”ì‹œì§€**: "âœ¨ ì‹ ê·œ í”„ë¡œì íŠ¸ ì„¤ì¹˜"

3. âœ… í…œí”Œë¦¿ ì§ì ‘ ë³µì‚¬
   - **ê²€ì¦**: ë°±ì—… ê³¼ì • ì—†ì´ í…œí”Œë¦¿ ì¦‰ì‹œ ë³µì‚¬

4. âœ… ë°±ì—… ë©”íƒ€ë°ì´í„° ìƒì„± ì•ˆ í•¨
   - **ê²€ì¦**: `.moai/backups/latest.json` ìƒì„± ì•ˆ í•¨

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/core/installer/phase-executor.test.ts`

---

### AC-INIT-003-08: ë°±ì—… ìƒì„± ì‹¤íŒ¨ ì²˜ë¦¬ (Phase A)

**Given**: ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡± ë˜ëŠ” ê¶Œí•œ ë¬¸ì œ
**When**: `moai init .` ì‹¤í–‰ ì¤‘ ë°±ì—… ìƒì„± ì‹œë„
**Then**:

1. âœ… ì—ëŸ¬ ê°ì§€
   - **ê²€ì¦**: ë°±ì—… ìƒì„± ì¤‘ ì—ëŸ¬ ë°œìƒ ì‹œ catch

2. âœ… ì„¤ì¹˜ ì¤‘ë‹¨
   - **ê²€ì¦**: ì´í›„ í…œí”Œë¦¿ ë³µì‚¬ ë¡œì§ ì‹¤í–‰ ì•ˆ í•¨

3. âœ… ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   - **ë©”ì‹œì§€**: "ë°±ì—… ìƒì„± ì‹¤íŒ¨: {ì—ëŸ¬ ë©”ì‹œì§€}"
   - **ì•ˆë‚´**: "ë””ìŠ¤í¬ ê³µê°„ì„ í™•ì¸í•˜ê±°ë‚˜ ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”."

4. âœ… ë¶€ë¶„ ë°±ì—… ì •ë¦¬
   - **ê²€ì¦**: ë¶ˆì™„ì „í•œ ë°±ì—… ë””ë ‰í† ë¦¬ ì‚­ì œ

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/core/installer/phase-executor.test.ts`

---

### AC-INIT-003-09: ë³‘í•© ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡¤ë°± (Phase B)

**Given**: ë³‘í•© ì¤‘ íŒŒì¼ ì“°ê¸° ì˜¤ë¥˜ (ê¶Œí•œ ë¬¸ì œ ë“±)
**When**: ë³‘í•© ì—”ì§„ì—ì„œ ì¹˜ëª…ì  ì˜¤ë¥˜ ë°œìƒ
**Then**:

1. âœ… ì˜¤ë¥˜ ê°ì§€ ë° ë¡œê¹…
   - **ë©”ì‹œì§€**: "ë³‘í•© ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {ì—ëŸ¬ ë©”ì‹œì§€}"

2. âœ… ìë™ ë¡¤ë°± ì‹œì‘
   - **ë©”ì‹œì§€**: "ë°±ì—…ì—ì„œ ë³µì› ì¤‘..."
   - **ë™ì‘**: ë°±ì—… ë””ë ‰í† ë¦¬ ë‚´ìš©ì„ ì›ë˜ ìœ„ì¹˜ë¡œ ë³µì‚¬

3. âœ… ë¡¤ë°± ì™„ë£Œ í™•ì¸
   - **ê²€ì¦**: ëª¨ë“  íŒŒì¼ì´ ë³‘í•© ì‹œì‘ ì „ ìƒíƒœë¡œ ë³µì›ë¨

4. âœ… ë¡¤ë°± ì„±ê³µ ë©”ì‹œì§€
   - **ë©”ì‹œì§€**: "ë¡¤ë°± ì™„ë£Œ. ê¸°ì¡´ íŒŒì¼ì´ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤."
   - **ë¡œê·¸**: ì—ëŸ¬ ì›ì¸ ë° í•´ê²° ë°©ë²• ì•ˆë‚´

**í…ŒìŠ¤íŠ¸ íŒŒì¼**: `__tests__/cli/commands/project/merge-strategies/merge-orchestrator.test.ts`

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤ (v0.2.1)

### Unit Test ì»¤ë²„ë¦¬ì§€

**Phase A ëª¨ë“ˆ**:
| ëª¨ë“ˆ | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ | ì»¤ë²„ë¦¬ì§€ ëª©í‘œ | ìƒíƒœ |
|------|-----------------|--------------|------|
| `phase-executor.ts` (ë°±ì—…) | 7 (Case 2~5 ì¶”ê°€) | â‰¥90% | â³ |
| `backup-metadata.ts` | 5 (`backed_up_files` ì¶”ê°€) | â‰¥90% | â³ |

**Phase B ëª¨ë“ˆ**:
| ëª¨ë“ˆ | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ | ì»¤ë²„ë¦¬ì§€ ëª©í‘œ | ìƒíƒœ |
|------|-----------------|--------------|------|
| `backup-merger.ts` | 8 (ê¸´ê¸‰ ë°±ì—… ì¶”ê°€) | â‰¥85% | â³ |
| `json-merger.ts` | 8 | â‰¥90% | â³ |
| `markdown-merger.ts` | 6 | â‰¥90% | â³ |
| `hooks-merger.ts` | 5 | â‰¥85% | â³ |
| `merge-orchestrator.ts` | 10 | â‰¥85% | â³ |
| `merge-report.ts` | 4 | â‰¥85% | â³ |

### Integration Test

| í†µí•© ì‹œë‚˜ë¦¬ì˜¤ | ê²€ì¦ í•­ëª© | ìƒíƒœ |
|--------------|----------|------|
| Phase A ì „ì²´ | moai init â†’ ì„ íƒì  ë°±ì—… + ë©”íƒ€ë°ì´í„° | â³ |
| Phase B ì „ì²´ | ë°±ì—… ê°ì§€ â†’ ê¸´ê¸‰ ë°±ì—… â†’ ë³‘í•© â†’ ë¦¬í¬íŠ¸ | â³ |

### E2E Test

| E2E ì‹œë‚˜ë¦¬ì˜¤ | í…ŒìŠ¤íŠ¸ íŒŒì¼ | ìƒíƒœ |
|-------------|------------|------|
| AC-INIT-003-01 (Phase A) | `phase-executor.e2e.test.ts` | â³ |
| AC-INIT-003-02 (ë°±ì—… ê°ì§€) | `backup-merger.e2e.test.ts` | â³ |
| AC-INIT-003-03 (ë³‘í•©) | `merge-mode.e2e.test.ts` | â³ |
| AC-INIT-003-04 (ìƒˆë¡œì„¤ì¹˜) | `reinstall-mode.e2e.test.ts` | â³ |
| AC-INIT-003-05 (ë¶€ë¶„ ë°±ì—…) | `selective-backup.test.ts` | â³ |
| AC-INIT-003-06 (ê¸´ê¸‰ ë°±ì—…) | `emergency-backup.test.ts` | â³ |
| AC-INIT-003-07 (ì‹ ê·œ ì„¤ì¹˜) | `fresh-install.test.ts` | â³ |
| AC-INIT-003-08 (ë°±ì—… ì‹¤íŒ¨) | `backup-failure.test.ts` | â³ |
| AC-INIT-003-09 (ë¡¤ë°±) | `merge-rollback.test.ts` | â³ |

---

## ğŸ” í’ˆì§ˆ ê²Œì´íŠ¸ (v0.2.1)

### ìë™ ê²€ì¦ í•­ëª©

#### 1. ì½”ë“œ í’ˆì§ˆ
```bash
# íƒ€ì… ì²´í¬
bun run type-check

# ë¦°íŠ¸
bun run lint

# Phase A í…ŒìŠ¤íŠ¸ (Case 2~7 í¬í•¨)
bun test phase-executor backup-metadata

# Phase B í…ŒìŠ¤íŠ¸ (ê¸´ê¸‰ ë°±ì—… í¬í•¨)
bun test backup-merger merge-strategies

# ì „ì²´ ì»¤ë²„ë¦¬ì§€
bun run test:coverage
```

#### 2. TAG ë¬´ê²°ì„±
```bash
# Phase A TAG ì²´ì¸ ê²€ì¦
rg '@CODE:INIT-003:BACKUP' -n moai-adk-ts/src/core/installer/

# Phase B TAG ì²´ì¸ ê²€ì¦
rg '@CODE:INIT-003:MERGE' -n moai-adk-ts/src/cli/commands/project/

# ì˜ˆìƒ ê²°ê³¼:
# .moai/specs/SPEC-INIT-003/spec.md:@SPEC:INIT-003
# __tests__/core/installer/*.test.ts:@TEST:INIT-003:BACKUP
# __tests__/cli/commands/project/*.test.ts:@TEST:INIT-003:MERGE
# src/core/installer/*.ts:@CODE:INIT-003:BACKUP
# src/cli/commands/project/*.ts:@CODE:INIT-003:MERGE
```

#### 3. ë°±ì—… ë©”íƒ€ë°ì´í„° ë¬´ê²°ì„±
```bash
# ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ ê²€ì¦
bun test backup-metadata

# ì˜ˆìƒ ë©”íƒ€ë°ì´í„° í˜•ì‹:
# {
#   "timestamp": "2025-10-07T14:30:00.000Z",
#   "backup_path": ".moai-backups/20251007-143000",
#   "backed_up_files": [".claude/", ".moai/", "CLAUDE.md"],
#   "status": "pending" | "merged" | "ignored",
#   "created_by": "moai init" | "/alfred:8-project (emergency backup)"
# }
```

### ìˆ˜ë™ ê²€ì¦ í•­ëª©

#### 1. Phase A ì‚¬ìš©ì ê²½í—˜
- [ ] ë°±ì—… ì™„ë£Œ ë©”ì‹œì§€ê°€ ëª…í™•í•œê°€? (ë°±ì—…ëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ)
- [ ] ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´ê°€ ëª…í™•í•œê°€? (Claude Code â†’ /alfred:8-project)
- [ ] ë°±ì—… ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ê°€ í•´ê²° ë°©ë²•ì„ ì œì‹œí•˜ëŠ”ê°€?

#### 2. Phase B ì‚¬ìš©ì ê²½í—˜
- [ ] ë°±ì—… ë¶„ì„ ìš”ì•½ì´ ì´í•´í•˜ê¸° ì‰¬ìš´ê°€?
- [ ] ê¸´ê¸‰ ë°±ì—… ë©”ì‹œì§€ê°€ ëª…í™•í•œê°€?
- [ ] ë³‘í•© í”„ë¡¬í”„íŠ¸ê°€ ì„ íƒì§€ë¥¼ ëª…í™•íˆ ì„¤ëª…í•˜ëŠ”ê°€?
- [ ] ë³‘í•© ë¦¬í¬íŠ¸ê°€ ê°€ë…ì„±ì´ ì¢‹ì€ê°€?

#### 3. ì„±ëŠ¥
- [ ] Phase A ë°±ì—… ìƒì„±: < 2ì´ˆ (ì¼ë°˜ í”„ë¡œì íŠ¸)
- [ ] Phase B ë°±ì—… ê°ì§€: < 100ms
- [ ] Phase B ê¸´ê¸‰ ë°±ì—… ìƒì„±: < 3ì´ˆ
- [ ] Phase B ë³‘í•© ì‹¤í–‰: < 5ì´ˆ (10ê°œ íŒŒì¼ ê¸°ì¤€)

---

## ğŸ“Š ì„±ëŠ¥ ê¸°ì¤€ (v0.2.1)

### ì‹¤í–‰ ì‹œê°„ ëª©í‘œ

**Phase A (moai init)**:
| ì‘ì—… | ëª©í‘œ ì‹œê°„ | ì¸¡ì • ë°©ë²• |
|------|----------|----------|
| ë°±ì—… ì¡°ê±´ ê°ì§€ (OR) | < 50ms | `fs.existsSync()` 3íšŒ |
| ì„ íƒì  ë°±ì—… ìƒì„± | < 1ì´ˆ | ì‹¤ì œ íŒŒì¼ í¬ê¸° ê¸°ì¤€ |
| ë©”íƒ€ë°ì´í„° ì €ì¥ | < 100ms | `performance.now()` |
| ì „ì²´ Phase A | < 2ì´ˆ | ì¼ë°˜ í”„ë¡œì íŠ¸ ê¸°ì¤€ |

**Phase B (/alfred:8-project)**:
| ì‘ì—… | ëª©í‘œ ì‹œê°„ | ì¸¡ì • ë°©ë²• |
|------|----------|----------|
| ë°±ì—… ê°ì§€ | < 100ms | `performance.now()` |
| ê¸´ê¸‰ ë°±ì—… ìƒì„± | < 3ì´ˆ | ì‹¤ì œ íŒŒì¼ í¬ê¸° ê¸°ì¤€ |
| ë°±ì—… ë¶„ì„ | < 500ms | íŒŒì¼ ì½ê¸° ê¸°ì¤€ |
| JSON ë³‘í•© | < 500ms | íŒŒì¼ë‹¹ í‰ê·  |
| Markdown ë³‘í•© | < 500ms | íŒŒì¼ë‹¹ í‰ê·  |
| ì „ì²´ Phase B | < 5ì´ˆ | 10ê°œ íŒŒì¼ ê¸°ì¤€ |

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª©í‘œ

- **Phase A**: 50MB ì´í•˜ (ë°±ì—… ì¤‘)
- **Phase B**: 100MB ì´í•˜ (ë³‘í•© ì¤‘)
- **ë°±ì—… ë””ìŠ¤í¬ ì‚¬ìš©**: ì›ë³¸ í¬ê¸°ì˜ 1.1ë°° ì´í•˜

---

## ğŸ¯ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸ (v0.2.1)

### ê¸°ëŠ¥ ì™„ì„±ë„
- [ ] Phase A ëª¨ë“  AC (01, 05, 07, 08) í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] Phase B ëª¨ë“  AC (02, 03, 04, 06, 09) í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] E2E í…ŒìŠ¤íŠ¸ 100% í†µê³¼ (9ê°œ ì‹œë‚˜ë¦¬ì˜¤)

### ì½”ë“œ í’ˆì§ˆ
- [ ] Phase A í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ â‰¥85%
- [ ] Phase B í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ â‰¥85%
- [ ] íƒ€ì… ì²´í¬ í†µê³¼
- [ ] ë¦°íŠ¸ í†µê³¼
- [ ] TRUST 5ì›ì¹™ ì¤€ìˆ˜

### ë¬¸ì„œí™”
- [ ] `spec.md` v0.2.1 ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] `plan.md` v0.2.1 ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] `acceptance.md` (ë³¸ ë¬¸ì„œ) v0.2.1 ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] TAG ì²´ì¸ ë¬´ê²°ì„± í™•ì¸ (BACKUP, MERGE ë¶„ë¦¬)

### ì‚¬ìš©ì ê²½í—˜
- [ ] Phase A ì•ˆë‚´ ë©”ì‹œì§€ ëª…í™•ì„± (ë°±ì—…ëœ íŒŒì¼ ëª©ë¡)
- [ ] Phase B ê¸´ê¸‰ ë°±ì—… ë©”ì‹œì§€ ëª…í™•ì„±
- [ ] Phase B ë³‘í•© í”„ë¡¬í”„íŠ¸ ëª…í™•ì„±
- [ ] ë¦¬í¬íŠ¸ ê°€ë…ì„±
- [ ] ì„±ëŠ¥ ê¸°ì¤€ ì¶©ì¡±

### ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„
- [ ] `/alfred:3-sync` ì‹¤í–‰ ê°€ëŠ¥
- [ ] README ì—…ë°ì´íŠ¸ (ê¸´ê¸‰ ë°±ì—… ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…)
- [ ] CHANGELOG v0.2.1 ì‘ì„± (ë°±ì—… ì¡°ê±´ ì™„í™” ê°•ì¡°)

---

## ğŸš€ ë°°í¬ ì „ ìµœì¢… ê²€ì¦ (v0.2.1)

### ì‹¤ì œ í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ (Case 2~5)

**Case 2: .claudeë§Œ ì¡´ì¬**
1. **Phase A**: `moai init .` ì‹¤í–‰
   - ë°±ì—…: `.claude/`ë§Œ ë°±ì—… í™•ì¸
   - ë©”íƒ€ë°ì´í„°: `backed_up_files: [".claude/"]` í™•ì¸
2. **Phase B**: `/alfred:8-project` ì‹¤í–‰
   - ë°±ì—… ê°ì§€ ë° ë¶„ì„ í™•ì¸
   - ë³‘í•© ê²°ê³¼ í™•ì¸

**Case 3: .moai, CLAUDE.mdë§Œ ì¡´ì¬**
1. **Phase A**: `moai init .` ì‹¤í–‰
   - ë°±ì—…: `.moai/`, `CLAUDE.md`ë§Œ ë°±ì—… í™•ì¸
   - ë©”íƒ€ë°ì´í„°: `backed_up_files: [".moai/", "CLAUDE.md"]` í™•ì¸

**Case 4: CLAUDE.mdë§Œ ì¡´ì¬**
1. **Phase A**: `moai init .` ì‹¤í–‰
   - ë°±ì—…: `CLAUDE.md`ë§Œ ë°±ì—… í™•ì¸
   - ë©”íƒ€ë°ì´í„°: `backed_up_files: ["CLAUDE.md"]` í™•ì¸

**Case 5: ì‹ ê·œ ì„¤ì¹˜**
1. **Phase A**: `moai init .` ì‹¤í–‰
   - ë°±ì—… ìƒëµ í™•ì¸
   - ë©”íƒ€ë°ì´í„° ìƒì„± ì•ˆ í•¨ í™•ì¸

**ê¸´ê¸‰ ë°±ì—… ì‹œë‚˜ë¦¬ì˜¤**
1. **Phase B**: moai init ì—†ì´ `/alfred:8-project` ì§ì ‘ ì‹¤í–‰
   - ê¸´ê¸‰ ë°±ì—… ìë™ ìƒì„± í™•ì¸
   - ë©”íƒ€ë°ì´í„° `created_by: "/alfred:8-project (emergency backup)"` í™•ì¸

### íšŒê·€ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ì¡´ init ê¸°ëŠ¥ (ì‹ ê·œ í”„ë¡œì íŠ¸, ë°±ì—… ì—†ìŒ) ì •ìƒ ì‘ë™
- [ ] ë‹¤ë¥¸ CLI ëª…ë ¹ì–´(`doctor`, `status`) ì˜í–¥ ì—†ìŒ

---

**ìµœì¢… ìŠ¹ì¸ ì¡°ê±´**: ìœ„ì˜ ëª¨ë“  ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª©ì´ âœ… ìƒíƒœì¼ ë•Œ SPEC-INIT-003 v0.2.1 ì™„ë£Œë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.

---

_ì´ ì¸ìˆ˜ ê¸°ì¤€ì€ `/alfred:2-build INIT-003` êµ¬í˜„ ì¤‘ Phase A â†’ Phase B ìˆœì°¨ì ìœ¼ë¡œ ê²€ì¦ë˜ì–´ì•¼ í•©ë‹ˆë‹¤._
