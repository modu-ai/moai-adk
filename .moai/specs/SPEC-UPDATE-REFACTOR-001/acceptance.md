# Acceptance Criteria: SPEC-UPDATE-REFACTOR-001

## Overview

**SPEC ID**: UPDATE-REFACTOR-001
**Title**: /alfred:9-update Option C í•˜ì´ë¸Œë¦¬ë“œ ë¦¬íŒ©í† ë§
**Version**: 1.0.0
**Priority**: P0 (Critical)

ì´ ë¬¸ì„œëŠ” ë¦¬íŒ©í† ë§ ì™„ë£Œë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•œ ìƒì„¸í•œ ìˆ˜ë½ ê¸°ì¤€ì„ ì •ì˜í•©ë‹ˆë‹¤.

---

## Acceptance Criteria (ìˆ˜ë½ ê¸°ì¤€)

### AC001: Alfred ì¤‘ì•™ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë³µì›

**Given**:
- ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ Claude Codeë¥¼ ì‹¤í–‰
- CLAUDE.md íŒŒì¼ì´ ì¡´ì¬í•˜ê³  Alfred í˜ë¥´ì†Œë‚˜ê°€ ë¡œë“œë¨

**When**:
- ì‚¬ìš©ìê°€ `/alfred:9-update` ëª…ë ¹ì–´ë¥¼ ì…ë ¥

**Then**:
- AlfredëŠ” ë‹¤ìŒ ë¡œê·¸ë¥¼ ì¶œë ¥í•´ì•¼ í•¨:
  ```text
  ğŸ” MoAI-ADK ì—…ë°ì´íŠ¸ í™•ì¸ ì¤‘...
  [Phase 1-3] Orchestratorì— ìœ„ì„ ì¤‘...
  ğŸ“„ Phase 4: í…œí”Œë¦¿ íŒŒì¼ ë³µì‚¬ ì‹œì‘... (Alfred ì§ì ‘ ì‹¤í–‰)
  [Step 1] npm root í™•ì¸
  [Step 2-8] íŒŒì¼ ë³µì‚¬ ì§„í–‰...
  [Phase 5] ê²€ì¦ ì¤‘...
  âœ¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ!
  ```
- Phase 1-3, 5ëŠ” Orchestratorì— ìœ„ì„ë¨ (Bash ë„êµ¬ ì‚¬ìš©)
- Phase 4ëŠ” Alfredê°€ Claude Code ë„êµ¬ë¡œ ì§ì ‘ ì‹¤í–‰ ([Glob], [Read], [Write], [Grep], [Bash])

**ê²€ì¦ ë°©ë²•**:
- [ ] ë¡œê·¸ì— "Alfred ì§ì ‘ ì‹¤í–‰" ë©”ì‹œì§€ê°€ ì¶œë ¥ë¨
- [ ] Phase 4 ì‹¤í–‰ ì¤‘ Claude Code ë„êµ¬ í˜¸ì¶œ ë¡œê·¸ê°€ í‘œì‹œë¨
- [ ] Phase 4 ì™„ë£Œ í›„ íŒŒì¼ ë³µì‚¬ ê²°ê³¼ê°€ í‘œì‹œë¨

---

### AC002: í”„ë¡œì íŠ¸ ë¬¸ì„œ ì§€ëŠ¥ì  ë³´í˜¸

#### AC002-1: í…œí”Œë¦¿ ìƒíƒœ íŒŒì¼ (ë®ì–´ì“°ê¸°)

**Given**:
- `.moai/project/product.md` íŒŒì¼ì— `{{PROJECT_NAME}}` íŒ¨í„´ì´ ì¡´ì¬

**When**:
- `/alfred:9-update` ì‹¤í–‰

**Then**:
- Grep ê²€ì¦:
  ```bash
  [Grep] "{{PROJECT_NAME}}" -n .moai/project/product.md
  â†’ ê²€ìƒ‰ ê²°ê³¼ ìˆìŒ (í…œí”Œë¦¿ ìƒíƒœ)
  ```
- ë°±ì—… ìƒì„± ì—†ì´ ë®ì–´ì“°ê¸°:
  ```text
  [Read] {npm_root}/moai-adk/templates/.moai/project/product.md
  [Write] .moai/project/product.md
  âœ… .moai/project/product.md (ë°±ì—…: no)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Grep ë¡œê·¸ì— "ê²€ìƒ‰ ê²°ê³¼ ìˆìŒ" ë©”ì‹œì§€ ì¶œë ¥
- [ ] ë°±ì—… ë””ë ‰í† ë¦¬ì— product.mdê°€ ì—†ìŒ
- [ ] ìƒˆ í…œí”Œë¦¿ìœ¼ë¡œ ë®ì–´ì“°ê¸° ì™„ë£Œ

---

#### AC002-2: ì‚¬ìš©ì ìˆ˜ì • íŒŒì¼ (ë°±ì—… í›„ ë®ì–´ì“°ê¸°)

**Given**:
- `.moai/project/structure.md` íŒŒì¼ì— `{{PROJECT_NAME}}` íŒ¨í„´ì´ ì—†ìŒ (ì‚¬ìš©ì ìˆ˜ì • ìƒíƒœ)

**When**:
- `/alfred:9-update` ì‹¤í–‰

**Then**:
- Grep ê²€ì¦:
  ```bash
  [Grep] "{{PROJECT_NAME}}" -n .moai/project/structure.md
  â†’ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ (ì‚¬ìš©ì ìˆ˜ì •)
  ```
- ë°±ì—… ìƒì„±:
  ```text
  [Read] .moai/project/structure.md
  [Write] .moai-backup/{timestamp}/.moai/project/structure.md
  ğŸ’¾ ë°±ì—… ìƒì„±: .moai-backup/{timestamp}/.moai/project/structure.md
  ```
- ìƒˆ í…œí”Œë¦¿ ë³µì‚¬:
  ```text
  [Read] {npm_root}/moai-adk/templates/.moai/project/structure.md
  [Write] .moai/project/structure.md
  âœ… .moai/project/structure.md (ë°±ì—…: yes)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Grep ë¡œê·¸ì— "ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ" ë©”ì‹œì§€ ì¶œë ¥
- [ ] ë°±ì—… ë””ë ‰í† ë¦¬ì— structure.mdê°€ ì¡´ì¬í•¨
- [ ] ë°±ì—… íŒŒì¼ ë‚´ìš©ì´ ì´ì „ íŒŒì¼ê³¼ ë™ì¼í•¨
- [ ] ìƒˆ í…œí”Œë¦¿ìœ¼ë¡œ ë®ì–´ì“°ê¸° ì™„ë£Œ

---

#### AC002-3: CLAUDE.md íŒŒì¼ ë³´í˜¸

**Given**:
- `CLAUDE.md` íŒŒì¼ì— `{{PROJECT_NAME}}` íŒ¨í„´ì´ ì—†ìŒ (ì‚¬ìš©ì ìˆ˜ì • ìƒíƒœ)

**When**:
- `/alfred:9-update` ì‹¤í–‰

**Then**:
- AC002-2ì™€ ë™ì¼í•œ ë°±ì—… í›„ ë®ì–´ì“°ê¸° ì ˆì°¨
- ë°±ì—… ê²½ë¡œ: `.moai-backup/{timestamp}/CLAUDE.md`

**ê²€ì¦ ë°©ë²•**:
- [ ] ë°±ì—… ë””ë ‰í† ë¦¬ì— CLAUDE.mdê°€ ì¡´ì¬í•¨
- [ ] ìƒˆ í…œí”Œë¦¿ìœ¼ë¡œ ë®ì–´ì“°ê¸° ì™„ë£Œ

---

### AC003: í›… íŒŒì¼ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬

**Given**:
- Unix ê³„ì—´ ì‹œìŠ¤í…œ (Linux, macOS)
- .claude/hooks/alfred/ ë””ë ‰í† ë¦¬ì— .cjs íŒŒì¼ ì¡´ì¬

**When**:
- `/alfred:9-update` ì‹¤í–‰

**Then**:
- íŒŒì¼ ë³µì‚¬ í›„ chmod ì‹¤í–‰:
  ```bash
  [Bash] chmod +x .claude/hooks/alfred/*.cjs
  âœ… ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ ì™„ë£Œ
  ```
- íŒŒì¼ ê¶Œí•œ í™•ì¸:
  ```bash
  ls -l .claude/hooks/alfred/
  â†’ -rwxr-xr-x ... policy-block.cjs
  â†’ -rwxr-xr-x ... pre-write-guard.cjs
  â†’ -rwxr-xr-x ... session-notice.cjs
  â†’ -rwxr-xr-x ... tag-enforcer.cjs
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] chmod ë¡œê·¸ì— "ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ ì™„ë£Œ" ë©”ì‹œì§€ ì¶œë ¥
- [ ] `ls -l` ê²°ê³¼ì—ì„œ `-rwxr-xr-x` ê¶Œí•œ í™•ì¸
- [ ] í›… íŒŒì¼ì´ ì‹¤ì œë¡œ ì‹¤í–‰ ê°€ëŠ¥í•¨ (Claude Code ì¬ì‹œì‘ í›„ í…ŒìŠ¤íŠ¸)

**Windows ì˜ˆì™¸ ì²˜ë¦¬**:
- chmod ì‹¤íŒ¨ ì‹œ:
  ```text
  âš ï¸ chmod ì‹¤íŒ¨ (Windows í™˜ê²½ì—ì„œëŠ” ì •ìƒ)
  ```
- ê²½ê³ ë§Œ ì¶œë ¥í•˜ê³  ê³„ì† ì§„í–‰

---

### AC004: Output Styles ë³µì‚¬ í¬í•¨

**Given**:
- .claude/output-styles/alfred/ ë””ë ‰í† ë¦¬ê°€ ì—†ê±°ë‚˜ íŒŒì¼ì´ ëˆ„ë½ë¨

**When**:
- `/alfred:9-update` ì‹¤í–‰

**Then**:
- Output Styles ë³µì‚¬:
  ```text
  [Glob] {npm_root}/moai-adk/templates/.claude/output-styles/alfred/*.md â†’ 4ê°œ
  [Read/Write] beginner-learning.md âœ…
  [Read/Write] pair-collab.md âœ…
  [Read/Write] study-deep.md âœ…
  [Read/Write] moai-pro.md âœ…
  âœ… .claude/output-styles/alfred/ (4ê°œ íŒŒì¼ ë³µì‚¬ ì™„ë£Œ)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] .claude/output-styles/alfred/ ë””ë ‰í† ë¦¬ê°€ ìƒì„±ë¨
- [ ] 4ê°œ íŒŒì¼ì´ ëª¨ë‘ ì¡´ì¬í•¨:
  - beginner-learning.md
  - pair-collab.md
  - study-deep.md
  - moai-pro.md
- [ ] ê° íŒŒì¼ì˜ YAML frontmatterê°€ ìœ íš¨í•¨

---

### AC005: íŒŒì¼ ê°œìˆ˜ ê²€ì¦ í†µê³¼

**Given**:
- ëª¨ë“  í…œí”Œë¦¿ íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ë³µì‚¬ë¨

**When**:
- Phase 5 ê²€ì¦ ì‹¤í–‰

**Then**:
- íŒŒì¼ ê°œìˆ˜ ê²€ì¦:
  ```text
  [Check 1] ëª…ë ¹ì–´ íŒŒì¼
    â†’ [Glob] .claude/commands/alfred/*.md â†’ 10ê°œ âœ…

  [Check 2] ì—ì´ì „íŠ¸ íŒŒì¼
    â†’ [Glob] .claude/agents/alfred/*.md â†’ 9ê°œ âœ…

  [Check 3] í›… íŒŒì¼
    â†’ [Glob] .claude/hooks/alfred/*.cjs â†’ 4ê°œ âœ…

  [Check 4] Output Styles íŒŒì¼
    â†’ [Glob] .claude/output-styles/alfred/*.md â†’ 4ê°œ âœ…

  [Check 5] í”„ë¡œì íŠ¸ ë¬¸ì„œ
    â†’ [Glob] .moai/project/*.md â†’ 3ê°œ âœ…

  [Check 6] í•„ìˆ˜ íŒŒì¼ ì¡´ì¬
    â†’ [Read] .moai/memory/development-guide.md âœ…
    â†’ [Read] CLAUDE.md âœ…
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] ëª¨ë“  Check í•­ëª©ì— âœ… í‘œì‹œë¨
- [ ] íŒŒì¼ ëˆ„ë½ ê²½ê³ ê°€ ì—†ìŒ
- [ ] Phase 5 ì™„ë£Œ ë©”ì‹œì§€: "âœ… ê²€ì¦ í†µê³¼"

---

### AC006: YAML Frontmatter ê²€ì¦

**Given**:
- ëª…ë ¹ì–´ íŒŒì¼ (.claude/commands/alfred/*.md)ì´ ë³µì‚¬ë¨

**When**:
- Phase 5 ê²€ì¦ ì‹¤í–‰

**Then**:
- YAML íŒŒì‹± ì‹œë„:
  ```text
  [Sample Check] ëª…ë ¹ì–´ íŒŒì¼ ê²€ì¦
    â†’ [Read] .claude/commands/alfred/1-spec.md (ì²« 10ì¤„)
    â†’ YAML íŒŒì‹± ì‹œë„
    â†’ âœ… YAML ê²€ì¦ í†µê³¼
  ```
- í•„ìˆ˜ í•„ë“œ í™•ì¸:
  ```yaml
  ---
  name: alfred:1-spec
  description: SPEC ì‘ì„± ëª…ë ¹ì–´
  tools: [Read, Write, Glob, ...]
  ---
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] YAML íŒŒì‹± ì„±ê³µ
- [ ] `name`, `description`, `tools` í•„ë“œ ì¡´ì¬
- [ ] YAML ì†ìƒ ê°ì§€ ì‹œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥

---

### AC007: ë²„ì „ ì •ë³´ í™•ì¸

**Given**:
- npm íŒ¨í‚¤ì§€ê°€ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜ë¨

**When**:
- Phase 5 ê²€ì¦ ì‹¤í–‰

**Then**:
- ë²„ì „ ì •ë³´ ì¶”ì¶œ:
  ```text
  [Check 1] development-guide.md ë²„ì „
    â†’ [Grep] "version:" -n .moai/memory/development-guide.md
    â†’ ë²„ì „ ì¶”ì¶œ: v0.0.3

  [Check 2] package.json ë²„ì „
    â†’ [Bash] npm list moai-adk --depth=0
    â†’ ì¶œë ¥: moai-adk@0.0.3

  [Check 3] ë²„ì „ ì¼ì¹˜ í™•ì¸
    â†’ âœ… ë²„ì „ ì¼ì¹˜ (v0.0.3)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Grepìœ¼ë¡œ ë²„ì „ ì¶”ì¶œ ì„±ê³µ
- [ ] npm listë¡œ íŒ¨í‚¤ì§€ ë²„ì „ í™•ì¸
- [ ] ë‘ ë²„ì „ì´ ì¼ì¹˜í•¨
- [ ] ë²„ì „ ë¶ˆì¼ì¹˜ ì‹œ ê²½ê³  ë©”ì‹œì§€ ì¶œë ¥

---

### AC008: ì˜¤ë¥˜ ë³µêµ¬ - íŒŒì¼ ëˆ„ë½

**Given**:
- í…œí”Œë¦¿ ë””ë ‰í† ë¦¬ì—ì„œ ì¼ë¶€ íŒŒì¼ ëˆ„ë½ (ì‹œë®¬ë ˆì´ì…˜)

**When**:
- Phase 5 ê²€ì¦ ì‹¤í–‰

**Then**:
- ì˜¤ë¥˜ ê°ì§€:
  ```text
  [Glob] .claude/commands/alfred/*.md â†’ 8ê°œ (ì˜ˆìƒ: 10ê°œ)
  âŒ ê²€ì¦ ì‹¤íŒ¨: 2ê°œ íŒŒì¼ ëˆ„ë½
  ```
- ë³µêµ¬ ì˜µì…˜ ì œì•ˆ:
  ```text
  ì¡°ì¹˜ ì„ íƒ:
  1. "Phase 4 ì¬ì‹¤í–‰" â†’ ì „ì²´ ë³µì‚¬ ë‹¤ì‹œ ì‹œë„
  2. "ë°±ì—… ë³µì›" â†’ moai restore --from={timestamp}
  3. "ë¬´ì‹œí•˜ê³  ì§„í–‰" â†’ ë¶ˆì™„ì „í•œ ìƒíƒœë¡œ ì™„ë£Œ
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] íŒŒì¼ ëˆ„ë½ ê°ì§€ ë©”ì‹œì§€ ì¶œë ¥
- [ ] 3ê°€ì§€ ë³µêµ¬ ì˜µì…˜ì´ ì œì•ˆë¨
- [ ] "Phase 4 ì¬ì‹¤í–‰" ì„ íƒ ì‹œ ì¬ë³µì‚¬ ì§„í–‰
- [ ] "ë°±ì—… ë³µì›" ì„ íƒ ì‹œ rollback ì‹¤í–‰

---

### AC009: ì˜¤ë¥˜ ë³µêµ¬ - ë²„ì „ ë¶ˆì¼ì¹˜

**Given**:
- development-guide.md ë²„ì „ê³¼ npm íŒ¨í‚¤ì§€ ë²„ì „ì´ ë‹¤ë¦„

**When**:
- Phase 5 ê²€ì¦ ì‹¤í–‰

**Then**:
- ì˜¤ë¥˜ ê°ì§€:
  ```text
  [Grep] "version:" .moai/memory/development-guide.md â†’ v0.0.1
  [Bash] npm list moai-adk â†’ v0.0.3
  âŒ ë²„ì „ ë¶ˆì¼ì¹˜ ê°ì§€
  ```
- ë³µêµ¬ ì˜µì…˜ ì œì•ˆ:
  ```text
  ì¡°ì¹˜ ì„ íƒ:
  1. "Phase 3 ì¬ì‹¤í–‰" â†’ npm ì¬ì„¤ì¹˜
  2. "Phase 4 ì¬ì‹¤í–‰" â†’ í…œí”Œë¦¿ ì¬ë³µì‚¬
  3. "ë¬´ì‹œ" â†’ ë²„ì „ ë¶ˆì¼ì¹˜ ìƒíƒœë¡œ ì™„ë£Œ (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] ë²„ì „ ë¶ˆì¼ì¹˜ ê°ì§€ ë©”ì‹œì§€ ì¶œë ¥
- [ ] 3ê°€ì§€ ë³µêµ¬ ì˜µì…˜ì´ ì œì•ˆë¨
- [ ] "Phase 3 ì¬ì‹¤í–‰" ì„ íƒ ì‹œ npm ì¬ì„¤ì¹˜
- [ ] "Phase 4 ì¬ì‹¤í–‰" ì„ íƒ ì‹œ í…œí”Œë¦¿ ì¬ë³µì‚¬

---

### AC010: ì˜¤ë¥˜ ë³µêµ¬ - Write ë„êµ¬ ì‹¤íŒ¨

**Given**:
- .claude/commands/alfred/ ë””ë ‰í† ë¦¬ê°€ ì—†ìŒ

**When**:
- [Write] .claude/commands/alfred/1-spec.md ì‹œë„ â†’ ì‹¤íŒ¨

**Then**:
- ìë™ ë³µêµ¬:
  ```bash
  [Write] .claude/commands/alfred/1-spec.md â†’ âŒ (ë””ë ‰í† ë¦¬ ì—†ìŒ)
  [Bash] mkdir -p .claude/commands/alfred â†’ âœ…
  [Write] .claude/commands/alfred/1-spec.md â†’ âœ… (ì¬ì‹œë„ ì„±ê³µ)
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Write ì‹¤íŒ¨ ë¡œê·¸ ì¶œë ¥
- [ ] mkdir ì‹¤í–‰ ë¡œê·¸ ì¶œë ¥
- [ ] ì¬ì‹œë„ ì„±ê³µ ë¡œê·¸ ì¶œë ¥
- [ ] ìµœì¢…ì ìœ¼ë¡œ íŒŒì¼ì´ ìƒì„±ë¨

---

### AC011: --check-quality ì˜µì…˜ ë™ì‘

**Given**:
- ì—…ë°ì´íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë¨

**When**:
- `/alfred:9-update --check-quality` ì‹¤í–‰

**Then**:
- Phase 5.5 ì‹¤í–‰:
  ```text
  Phase 5.5: í’ˆì§ˆ ê²€ì¦
    â†’ [Alfred] ì—…ë°ì´íŠ¸ í›„ í’ˆì§ˆ ê²€ì¦ì„ ì‹œì‘í•©ë‹ˆë‹¤...
    â†’ [Alfred] @agent-trust-checker "Level 1 ë¹ ë¥¸ ìŠ¤ìº” (3-5ì´ˆ)"
    â†’ [trust-checker] ê²€ì¦ ì¤‘...
    â†’ [trust-checker] ê²°ê³¼: Pass
  ```
- Pass ê²°ê³¼ ì²˜ë¦¬:
  ```text
  âœ… í’ˆì§ˆ ê²€ì¦ í†µê³¼
  - ëª¨ë“  íŒŒì¼ ì •ìƒ
  - ì‹œìŠ¤í…œ ë¬´ê²°ì„± ìœ ì§€
  - ì—…ë°ì´íŠ¸ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Phase 5.5 ì‹¤í–‰ ë¡œê·¸ ì¶œë ¥
- [ ] trust-checker í˜¸ì¶œ í™•ì¸ (`@agent-trust-checker` ë¡œê·¸)
- [ ] Pass ê²°ê³¼ ë©”ì‹œì§€ ì¶œë ¥
- [ ] ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´ (Claude Code ì¬ì‹œì‘ ê¶Œì¥)

---

### AC012: --check-quality Warning ì²˜ë¦¬

**Given**:
- ì—…ë°ì´íŠ¸ ì™„ë£Œ, ì¼ë¶€ í¬ë§· ì´ìŠˆ ì¡´ì¬

**When**:
- `/alfred:9-update --check-quality` ì‹¤í–‰

**Then**:
- Warning ê²°ê³¼ ì²˜ë¦¬:
  ```text
  âš ï¸ í’ˆì§ˆ ê²€ì¦ ê²½ê³ 
  - ì¼ë¶€ ë¬¸ì„œ í¬ë§· ì´ìŠˆ ë°œê²¬
  - ê¶Œì¥ì‚¬í•­ ë¯¸ì ìš© í•­ëª© ì¡´ì¬
  - ì‚¬ìš©ì í™•ì¸ ê¶Œì¥

  ê²½ê³  ë‚´ìš©:
  1. .moai/project/product.md: í—¤ë” ë ˆë²¨ ë¶ˆì¼ì¹˜
  2. CLAUDE.md: TAG ì²´ì¸ ë¯¸ì™„ì„±

  ì¡°ì¹˜:
  - "í™•ì¸ í›„ ìˆ˜ì •" ë˜ëŠ” "ë¬´ì‹œí•˜ê³  ê³„ì†"
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Warning ë©”ì‹œì§€ ì¶œë ¥
- [ ] ê²½ê³  ë‚´ìš© ëª©ë¡ í‘œì‹œ
- [ ] 2ê°€ì§€ ì¡°ì¹˜ ì˜µì…˜ ì œì•ˆ
- [ ] "ë¬´ì‹œí•˜ê³  ê³„ì†" ì„ íƒ ì‹œ ì—…ë°ì´íŠ¸ ì™„ë£Œ

---

### AC013: --check-quality Critical ì²˜ë¦¬

**Given**:
- ì—…ë°ì´íŠ¸ ì™„ë£Œ, íŒŒì¼ ì†ìƒ ê°ì§€

**When**:
- `/alfred:9-update --check-quality` ì‹¤í–‰

**Then**:
- Critical ê²°ê³¼ ì²˜ë¦¬:
  ```text
  âŒ í’ˆì§ˆ ê²€ì¦ ì‹¤íŒ¨ (ì¹˜ëª…ì )
  - íŒŒì¼ ì†ìƒ ê°ì§€: .claude/agents/alfred/spec-builder.md
  - ì„¤ì • ë¶ˆì¼ì¹˜: config.json â†” development-guide.md

  ì¡°ì¹˜ ì„ íƒ:
  1. "ë¡¤ë°±" â†’ moai restore --from={timestamp}
  2. "ë¬´ì‹œí•˜ê³  ì§„í–‰" â†’ ì†ìƒëœ ìƒíƒœë¡œ ì™„ë£Œ (ìœ„í—˜)

  ê¶Œì¥: ë¡¤ë°± í›„ ì¬ì‹œë„
  ```

**ê²€ì¦ ë°©ë²•**:
- [ ] Critical ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
- [ ] ì†ìƒëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ
- [ ] 2ê°€ì§€ ì¡°ì¹˜ ì˜µì…˜ ì œì•ˆ (ë¡¤ë°± ê¶Œì¥)
- [ ] "ë¡¤ë°±" ì„ íƒ ì‹œ ë°±ì—… ë³µì› ì‹¤í–‰

---

### AC014: í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€

**Given**:
- ê¸°ì¡´ ì‚¬ìš©ìê°€ v0.0.2ë¥¼ ì‚¬ìš© ì¤‘

**When**:
- v0.0.3ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í›„ `/alfred:9-update` ì¬ì‹¤í–‰

**Then**:
- ì¸í„°í˜ì´ìŠ¤ ë™ì¼:
  ```bash
  /alfred:9-update              # ì •ìƒ ë™ì‘ âœ…
  /alfred:9-update --check      # ì •ìƒ ë™ì‘ âœ…
  /alfred:9-update --force      # ì •ìƒ ë™ì‘ âœ…
  ```
- Phase 1-3, 5 ë¡œì§ ë™ì¼:
  - VersionChecker: ë³€ê²½ ì—†ìŒ
  - BackupManager: ë³€ê²½ ì—†ìŒ
  - NpmUpdater: ë³€ê²½ ì—†ìŒ
  - UpdateVerifier: ê²€ì¦ í•­ëª© ì¶”ê°€ (í•˜ìœ„ í˜¸í™˜)
- ê¸°ì¡´ ì›Œí¬í”Œë¡œìš° ì¤‘ë‹¨ ì—†ìŒ

**ê²€ì¦ ë°©ë²•**:
- [ ] ëª¨ë“  ê¸°ì¡´ ì˜µì…˜ì´ ì •ìƒ ì‘ë™
- [ ] Phase 1-3, 5 ë¡œì§ ë³€ê²½ ì—†ìŒ
- [ ] ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì „ì²´ í†µê³¼
- [ ] ê¸°ì¡´ ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ (ì´ìŠˆ ì—†ìŒ)

---

## Performance Criteria (ì„±ëŠ¥ ê¸°ì¤€)

### PC001: Phase 4 ì‹¤í–‰ ì‹œê°„

**Given**:
- ì´ 40ê°œ íŒŒì¼ ë³µì‚¬ (ëª…ë ¹ì–´ 10 + ì—ì´ì „íŠ¸ 9 + í›… 4 + Output Styles 4 + í”„ë¡œì íŠ¸ ë¬¸ì„œ 3 + development-guide 1 + CLAUDE.md 1 + ë””ë ‰í† ë¦¬ ë³µì‚¬ ~8ê°œ)

**When**:
- Phase 4 ì‹¤í–‰

**Then**:
- ì‹¤í–‰ ì‹œê°„: 10-20ì´ˆ ì´ë‚´
- íŒŒì¼ë‹¹ í‰ê· : 0.25-0.5ì´ˆ

**ê²€ì¦ ë°©ë²•**:
- [ ] ì´ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • (startTime - endTime)
- [ ] 20ì´ˆ ì´ë‚´ ì™„ë£Œ
- [ ] íƒ€ì„ì•„ì›ƒ ë°œìƒí•˜ì§€ ì•ŠìŒ

---

### PC002: Phase 5 ê²€ì¦ ì‹œê°„

**Given**:
- Phase 4 ì™„ë£Œ í›„ ê²€ì¦ ì‹¤í–‰

**When**:
- Phase 5 ì‹¤í–‰

**Then**:
- ì‹¤í–‰ ì‹œê°„: 3-5ì´ˆ ì´ë‚´
- ê²€ì¦ í•­ëª©: íŒŒì¼ ê°œìˆ˜ (6íšŒ Glob) + YAML íŒŒì‹± (1íšŒ Read) + ë²„ì „ í™•ì¸ (1íšŒ Grep + 1íšŒ Bash)

**ê²€ì¦ ë°©ë²•**:
- [ ] ì´ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
- [ ] 5ì´ˆ ì´ë‚´ ì™„ë£Œ
- [ ] ê²€ì¦ ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥

---

### PC003: --check-quality ì¶”ê°€ ì‹œê°„

**Given**:
- Phase 5 ì™„ë£Œ í›„ í’ˆì§ˆ ê²€ì¦ ì‹¤í–‰

**When**:
- --check-quality ì˜µì…˜ ì œê³µ

**Then**:
- ì¶”ê°€ ì‹¤í–‰ ì‹œê°„: 3-5ì´ˆ ì´ë‚´ (Level 1 ë¹ ë¥¸ ìŠ¤ìº”)
- trust-checker ì‘ë‹µ ì‹œê°„: 3ì´ˆ ì´ë‚´

**ê²€ì¦ ë°©ë²•**:
- [ ] Phase 5.5 ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
- [ ] 5ì´ˆ ì´ë‚´ ì™„ë£Œ
- [ ] ì „ì²´ ì—…ë°ì´íŠ¸ ì‹œê°„: 25-30ì´ˆ ì´ë‚´ (Phase 1-5.5)

---

## Quality Gates (í’ˆì§ˆ ê²Œì´íŠ¸)

### QG001: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

**ê¸°ì¤€**: 85% ì´ìƒ

**ì¸¡ì • ëŒ€ìƒ**:
- `update-orchestrator.ts` (Phase 4 ì œê±° í›„)
- `update-verifier.ts` (ê²€ì¦ ë¡œì§ ê°•í™”)

**ê²€ì¦ ë°©ë²•**:
```bash
npm run test:coverage
â†’ Statements: 85.0% âœ…
â†’ Branches: 85.0% âœ…
â†’ Functions: 85.0% âœ…
â†’ Lines: 85.0% âœ…
```

**í†µê³¼ ì¡°ê±´**:
- [ ] ëª¨ë“  í•­ëª© 85% ì´ìƒ

---

### QG002: @TAG ì²´ì¸ ë¬´ê²°ì„±

**ê¸°ì¤€**: ëª¨ë“  TAGê°€ ì²´ì¸ìœ¼ë¡œ ì—°ê²°ë¨

**ê²€ì¦ ë°©ë²•**:
```bash
# SPEC TAG í™•ì¸
rg "@SPEC:UPDATE-REFACTOR-001" -n

# CODE TAG í™•ì¸
rg "@CODE:UPDATE-REFACTOR-001" -n

# TEST TAG í™•ì¸
rg "@TEST:UPDATE-REFACTOR-001" -n

# ì²´ì¸ ë¬´ê²°ì„± ê²€ì¦
rg "@(SPEC|CODE|TEST):UPDATE-REFACTOR-001" -n
```

**í†µê³¼ ì¡°ê±´**:
- [ ] @SPEC TAG ì¡´ì¬ (spec.md)
- [ ] @CODE TAG ì¡´ì¬ (êµ¬í˜„ ì½”ë“œ)
- [ ] @TEST TAG ì¡´ì¬ (í…ŒìŠ¤íŠ¸ ì½”ë“œ)
- [ ] ê³ ì•„ TAG ì—†ìŒ

---

### QG003: í•˜ìœ„ í˜¸í™˜ì„±

**ê¸°ì¤€**: ê¸°ì¡´ API 100% ìœ ì§€

**ê²€ì¦ ë°©ë²•**:
```bash
# ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì „ì²´ ì‹¤í–‰
npm run test -- update-orchestrator.test.ts
â†’ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ âœ…
```

**í†µê³¼ ì¡°ê±´**:
- [ ] ê¸°ì¡´ í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- [ ] API ë³€ê²½ ì—†ìŒ (ì¸í„°í˜ì´ìŠ¤ ë™ì¼)
- [ ] ê¸°ì¡´ ì›Œí¬í”Œë¡œìš° ì¤‘ë‹¨ ì—†ìŒ

---

### QG004: ë¬¸ì„œ í’ˆì§ˆ

**ê¸°ì¤€**: ëª¨ë“  P0, P1 ìš”êµ¬ì‚¬í•­ì´ ë¬¸ì„œì— ë°˜ì˜ë¨

**ê²€ì¦ ë°©ë²•**:
- 9-update.md ë¬¸ì„œ ë¦¬ë·°:
  - [ ] Phase 4 ìƒì„¸ ëª…ì„¸ (A-I ì¹´í…Œê³ ë¦¬)
  - [ ] Phase 5 ê²€ì¦ ë¡œì§ ê°•í™”
  - [ ] Phase 5.5 í’ˆì§ˆ ê²€ì¦ ì˜µì…˜
  - [ ] ì˜¤ë¥˜ ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤ (1-3)

**í†µê³¼ ì¡°ê±´**:
- [ ] ëª¨ë“  P0 ìš”êµ¬ì‚¬í•­ ë°˜ì˜ (7ê°œ)
- [ ] ëª¨ë“  P1 ìš”êµ¬ì‚¬í•­ ë°˜ì˜ (3ê°œ)
- [ ] ë¬¸ì„œì™€ êµ¬í˜„ ì¼ì¹˜ (ë¶ˆì¼ì¹˜ 0ê°œ)

---

## Definition of Done (ì™„ë£Œ ì¡°ê±´)

ë¦¬íŒ©í† ë§ì´ ë‹¤ìŒ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ë©´ ì™„ë£Œë¡œ ê°„ì£¼í•©ë‹ˆë‹¤:

### Code (ì½”ë“œ)

- [ ] `template-copier.ts` ì œê±° ì™„ë£Œ
- [ ] `update-orchestrator.ts` Phase 4 ë¡œì§ ì œê±°
- [ ] TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ ì—†ìŒ
- [ ] ESLint ê²½ê³  ì—†ìŒ
- [ ] ëª¨ë“  import ì •ë¦¬ë¨

### Tests (í…ŒìŠ¤íŠ¸)

- [ ] í†µí•© í…ŒìŠ¤íŠ¸ 6ê°œ ì‘ì„± (AC001-006)
- [ ] ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ 3ê°œ ì‘ì„± (AC008-010)
- [ ] --check-quality ì˜µì…˜ í…ŒìŠ¤íŠ¸ 3ê°œ ì‘ì„± (AC011-013)
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 85% ì´ìƒ
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (0 failures)

### Documentation (ë¬¸ì„œ)

- [ ] 9-update.md ì—…ë°ì´íŠ¸ ì™„ë£Œ (Phase 4, 5, 5.5)
- [ ] CHANGELOG.md ì—…ë°ì´íŠ¸ (v0.0.3 or v0.1.0)
- [ ] docs/cli/update.md ê°±ì‹  (--check-quality ì¶”ê°€)
- [ ] Living Document ìƒì„± (`/alfred:3-sync`)

### Quality Gates (í’ˆì§ˆ ê²Œì´íŠ¸)

- [ ] QG001: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 85% ì´ìƒ
- [ ] QG002: @TAG ì²´ì¸ ë¬´ê²°ì„± ê²€ì¦
- [ ] QG003: í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€
- [ ] QG004: ë¬¸ì„œ í’ˆì§ˆ (P0, P1 ìš”êµ¬ì‚¬í•­ ë°˜ì˜)

### Performance (ì„±ëŠ¥)

- [ ] PC001: Phase 4 ì‹¤í–‰ ì‹œê°„ 20ì´ˆ ì´ë‚´
- [ ] PC002: Phase 5 ê²€ì¦ ì‹œê°„ 5ì´ˆ ì´ë‚´
- [ ] PC003: --check-quality ì¶”ê°€ ì‹œê°„ 5ì´ˆ ì´ë‚´
- [ ] ì „ì²´ ì—…ë°ì´íŠ¸ ì‹œê°„: 30ì´ˆ ì´ë‚´

### Deployment (ë°°í¬)

- [ ] npm íŒ¨í‚¤ì§€ ë°°í¬ (v0.0.3 or v0.1.0)
- [ ] Git íƒœê·¸ ìƒì„± (v0.0.3)
- [ ] GitHub Release ë…¸íŠ¸ ì‘ì„±
- [ ] ì‚¬ìš©ì ê°€ì´ë“œ ì—…ë°ì´íŠ¸

---

## Acceptance Testing Checklist

### Pre-Testing (ì‚¬ì „ ì¤€ë¹„)

- [ ] í…ŒìŠ¤íŠ¸ìš© í”„ë¡œì íŠ¸ ìƒì„±
- [ ] moai-adk ë¡œì»¬ ë§í¬ ì„¤ì¹˜ (`npm link`)
- [ ] Claude Code ì‹¤í–‰ ë° CLAUDE.md ë¡œë“œ í™•ì¸
- [ ] ë°±ì—… ë””ë ‰í† ë¦¬ ì´ˆê¸°í™” (`.moai-backup/` ë¹„ìš°ê¸°)

### Testing (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)

**ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤**:
- [ ] AC001: Alfred ì¤‘ì•™ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë³µì›
- [ ] AC002-1: í…œí”Œë¦¿ ìƒíƒœ íŒŒì¼ (ë®ì–´ì“°ê¸°)
- [ ] AC002-2: ì‚¬ìš©ì ìˆ˜ì • íŒŒì¼ (ë°±ì—… í›„ ë®ì–´ì“°ê¸°)
- [ ] AC002-3: CLAUDE.md íŒŒì¼ ë³´í˜¸
- [ ] AC003: í›… íŒŒì¼ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- [ ] AC004: Output Styles ë³µì‚¬ í¬í•¨
- [ ] AC005: íŒŒì¼ ê°œìˆ˜ ê²€ì¦ í†µê³¼
- [ ] AC006: YAML Frontmatter ê²€ì¦
- [ ] AC007: ë²„ì „ ì •ë³´ í™•ì¸

**ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤**:
- [ ] AC008: ì˜¤ë¥˜ ë³µêµ¬ - íŒŒì¼ ëˆ„ë½
- [ ] AC009: ì˜¤ë¥˜ ë³µêµ¬ - ë²„ì „ ë¶ˆì¼ì¹˜
- [ ] AC010: ì˜¤ë¥˜ ë³µêµ¬ - Write ë„êµ¬ ì‹¤íŒ¨

**ì˜µì…˜ í…ŒìŠ¤íŠ¸**:
- [ ] AC011: --check-quality Pass
- [ ] AC012: --check-quality Warning
- [ ] AC013: --check-quality Critical
- [ ] AC014: í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€

**ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**:
- [ ] PC001: Phase 4 ì‹¤í–‰ ì‹œê°„
- [ ] PC002: Phase 5 ê²€ì¦ ì‹œê°„
- [ ] PC003: --check-quality ì¶”ê°€ ì‹œê°„

### Post-Testing (ì‚¬í›„ ê²€ì¦)

- [ ] ëª¨ë“  AC í•­ëª© í†µê³¼ (14ê°œ)
- [ ] ëª¨ë“  PC í•­ëª© í†µê³¼ (3ê°œ)
- [ ] ëª¨ë“  QG í•­ëª© í†µê³¼ (4ê°œ)
- [ ] Definition of Done ëª¨ë“  ì¡°ê±´ ë§Œì¡±
- [ ] ë¦¬íŒ©í† ë§ ì™„ë£Œ ë³´ê³ ì„œ ì‘ì„±

---

## Final Acceptance Sign-Off

**ë¦¬íŒ©í† ë§ ì™„ë£Œ ìŠ¹ì¸ ì¡°ê±´**:

1. âœ… ëª¨ë“  AC (Acceptance Criteria) í†µê³¼: 14/14
2. âœ… ëª¨ë“  PC (Performance Criteria) í†µê³¼: 3/3
3. âœ… ëª¨ë“  QG (Quality Gates) í†µê³¼: 4/4
4. âœ… Definition of Done ë§Œì¡±: 100%

**ìŠ¹ì¸ì**: Alfred (MoAI SuperAgent)

**ìŠ¹ì¸ ë‚ ì§œ**: 2025-10-02 (êµ¬í˜„ ì™„ë£Œ í›„)

**ë‹¤ìŒ ë‹¨ê³„**:
1. `/alfred:2-build UPDATE-REFACTOR-001` (TDD êµ¬í˜„)
2. `/alfred:3-sync` (Living Document ìƒì„±)
3. npm íŒ¨í‚¤ì§€ ë°°í¬ (v0.0.3 or v0.1.0)

---

**END OF ACCEPTANCE CRITERIA**
