# SPEC-002 Implementation Plan: Code TAG Management System

> **@DESIGN:CODE-TAG-002** "ì™„ì „ ìë™í™”ëœ 16-Core TAG ì‹œìŠ¤í…œ êµ¬í˜„ ê³„íš"

## ğŸ“‹ ê³„íš ê°œìš”

**SPEC ID**: SPEC-002
**ì œëª©**: ì½”ë“œ TAG ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•
**ê³„íš ìˆ˜ë¦½ì¼**: 2025-09-18
**ì˜ˆìƒ ì™„ë£Œ**: 7ì£¼ (49ì¼)
**Constitution ìƒíƒœ**: âœ… **ì¡°ê±´ë¶€ ìŠ¹ì¸**

### ğŸ¯ í•µì‹¬ ëª©í‘œ
- `src/moai_adk` ì „ì²´ Python ì½”ë“œë² ì´ìŠ¤ì— 16-Core TAG ì‹œìŠ¤í…œ ì ìš©
- 95% ì»¤ë²„ë¦¬ì§€ ë‹¬ì„± (ì¡°ì • ëª©í‘œ: 85%)
- 5ì´ˆ ì´ë‚´ 1000íŒŒì¼ ìŠ¤ìº” ì„±ëŠ¥
- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ìë™ ë³µêµ¬ ì‹œìŠ¤í…œ

### ğŸ“Š Constitution Check ê²°ê³¼

| ì›ì¹™ | ìƒíƒœ | ìœ„í—˜ë„ | ì„¸ë¶€ì‚¬í•­ |
|------|------|--------|----------|
| **Simplicity** | âš ï¸ ì¡°ê±´ë¶€ | 6/10 | 4ê°œâ†’3ê°œ ëª¨ë“ˆ í†µí•© í•„ìš” |
| **Architecture** | âœ… í†µê³¼ | 2/10 | ì™„ì „ ë¼ì´ë¸ŒëŸ¬ë¦¬í™” ê°€ëŠ¥ |
| **Testing** | âœ… í†µê³¼ | 5/10 | TDD ì ìš© ê°€ëŠ¥, 85% ì»¤ë²„ë¦¬ì§€ |
| **Observability** | âœ… í†µê³¼ | 2/10 | êµ¬ì¡°í™”ëœ ë¡œê¹… ì„¤ê³„ |
| **Versioning** | âœ… í†µê³¼ | 1/10 | MAJOR.MINOR.BUILD ì¤€ìˆ˜ |

**ì „ì²´ ë¦¬ìŠ¤í¬**: 3.2/10 (MEDIUM-LOW) - **ì§„í–‰ ìŠ¹ì¸**

## ğŸ”¬ Phase 0: Research ì™„ë£Œ

### ê¸°ìˆ  ìŠ¤íƒ ì„ ì •
- **LibCST + Tree-sitter**: í•˜ì´ë¸Œë¦¬ë“œ Python AST ë¶„ì„
- **orjson**: 10x ë¹ ë¥¸ JSON ì²˜ë¦¬ (5ms vs 45ms)
- **Watchdog**: í¬ë¡œìŠ¤í”Œë«í¼ íŒŒì¼ ëª¨ë‹ˆí„°ë§
- **Pre-commit**: Git í†µí•© ê²€ì¦ í”„ë ˆì„ì›Œí¬

### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
| ê¸°ìˆ  | 10k LOC | 1MB JSON | ë©”ëª¨ë¦¬ |
|------|---------|----------|--------|
| Tree-sitter | 50ms | - | 25MB |
| LibCST | 200ms | - | 75MB |
| orjson | - | 5ms | íš¨ìœ¨ì  |
| Watchdog | - | - | 5MB |

## ğŸ“‹ Phase 1: Contracts & Data Model

### API ê³„ì•½ ì •ì˜ (OpenAPI 3.0)
1. **tag-scanner-api.yaml**: íŒŒì¼ ìŠ¤ìº” ë° TAG ì¶”ì¶œ
2. **tag-validator-api.yaml**: ê²€ì¦ ë° ì¼ê´€ì„± ì²´í¬
3. **tag-indexer-api.yaml**: ì¸ë±ì‹± ë° ê²€ìƒ‰
4. **git-integration-api.yaml**: Git hooks ë° ë²„ì „ ì œì–´
5. **monitoring-api.yaml**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

### ë°ì´í„° ëª¨ë¸ ì„¤ê³„
```python
# í•µì‹¬ ì—”í‹°í‹°
@dataclass
class Tag:
    category: str          # @CORE, @API, @TEST, etc.
    identifier: str        # ê³ ìœ  ì‹ë³„ì
    description: str       # íƒœê·¸ ì„¤ëª…
    file_path: str        # íŒŒì¼ ê²½ë¡œ
    line_number: int      # ë¼ì¸ ë²ˆí˜¸
    timestamp: datetime   # ìƒì„±/ìˆ˜ì • ì‹œê°

@dataclass
class TagIndex:
    version: str                           # ì¸ë±ìŠ¤ ë²„ì „
    categories: Dict[str, List[str]]      # ì¹´í…Œê³ ë¦¬ë³„ íƒœê·¸
    file_mappings: Dict[str, List[Tag]]   # íŒŒì¼ë³„ íƒœê·¸ ë§¤í•‘
    cross_references: Dict[str, List[str]] # íƒœê·¸ ê°„ ì°¸ì¡°ê´€ê³„
```

## ğŸ”§ Phase 2: Task Decomposition

### 7ë‹¨ê³„ Implementation Plan (49ì¼)

#### Week 1: Infrastructure & Core Setup
- **T001-T007**: í”„ë¡œì íŠ¸ êµ¬ì¡°, ì˜ì¡´ì„±, í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **ë³‘ë ¬ ì‘ì—…**: T004[P], T005[P], T006[P]
- **ë§ˆì¼ìŠ¤í†¤**: TDD ê°œë°œ í™˜ê²½ ì™„ë£Œ

#### Week 2: Core Logic Implementation
- **T008-T014**: TAG ìŠ¤ìºë„ˆ, íŒŒì„œ, ê²€ì¦ê¸° êµ¬í˜„
- **ë³‘ë ¬ ì‘ì—…**: T010[P], T011[P], T012[P]
- **ë§ˆì¼ìŠ¤í†¤**: í•µì‹¬ TAG ì²˜ë¦¬ ì—”ì§„ ì™„ë£Œ

#### Week 3: Integration Layer
- **T015-T021**: Git hooks, íŒŒì¼ ëª¨ë‹ˆí„°ë§, ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **ë³‘ë ¬ ì‘ì—…**: T017[P], T018[P], T019[P]
- **ë§ˆì¼ìŠ¤í†¤**: Git í†µí•© ë° ìë™í™” ì™„ë£Œ

#### Week 4: Monitoring & Dashboard
- **T022-T028**: ëŒ€ì‹œë³´ë“œ, ë©”íŠ¸ë¦­, ìë™ ë³µêµ¬
- **ë³‘ë ¬ ì‘ì—…**: T024[P], T025[P], T026[P]
- **ë§ˆì¼ìŠ¤í†¤**: ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì™„ë£Œ

#### Week 5: VS Code Integration
- **T029-T035**: Language Server, í™•ì¥ ê¸°ëŠ¥, IDE í†µí•©
- **ë³‘ë ¬ ì‘ì—…**: T031[P], T032[P], T033[P]
- **ë§ˆì¼ìŠ¤í†¤**: ê°œë°œì ë„êµ¬ í†µí•© ì™„ë£Œ

#### Week 6: Migration & Performance
- **T036-T042**: ê¸°ì¡´ ì‹œìŠ¤í…œ ë§ˆì´ê·¸ë ˆì´ì…˜, ì„±ëŠ¥ ìµœì í™”
- **ë³‘ë ¬ ì‘ì—…**: T038[P], T039[P], T040[P]
- **ë§ˆì¼ìŠ¤í†¤**: í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ

#### Week 7: Integration Testing & Polish
- **T043-T048**: E2E í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™”, ë°°í¬ ì¤€ë¹„
- **ë§ˆì¼ìŠ¤í†¤**: ì‹œìŠ¤í…œ ì¶œì‹œ ì¤€ë¹„ ì™„ë£Œ

### ë³‘ë ¬ ì‹¤í–‰ ìµœì í™”
- **ì´ 48ê°œ ì‘ì—…** ì¤‘ **15ê°œ ë³‘ë ¬ ì²˜ë¦¬**
- **ì˜ˆìƒ ë‹¨ì¶•**: 160ì‹œê°„ â†’ 120ì‹œê°„ (25% íš¨ìœ¨ì„± í–¥ìƒ)
- **Critical Path**: Infrastructure â†’ Core Logic â†’ Integration â†’ Polish

## ğŸ›¡ï¸ í’ˆì§ˆ ë³´ì¥ ì „ëµ

### Constitution ì¤€ìˆ˜ ì²´ê³„
1. **Simplicity**: 3ê°œ í†µí•© ëª¨ë“ˆ ì•„í‚¤í…ì²˜
   - Core Engine (Scanner + Validator + Indexer)
   - Integration Layer (Git + Monitoring + FileWatcher)
   - Developer Tools (VS Code + LSP + Dashboard)

2. **TDD ê°•ì œ ì‹œìŠ¤í…œ**
   - ëª¨ë“  ì‘ì—…ì— Red-Green-Refactor ì‚¬ì´í´ ì ìš©
   - 85% í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ
   - Pytest + Coverage ìë™í™”

3. **ì„±ëŠ¥ ê²Œì´íŠ¸**
   - ìŠ¤ìº” ì†ë„: 5ì´ˆ/1000íŒŒì¼
   - ë©”ëª¨ë¦¬ ì‚¬ìš©: <500MB
   - ì‘ë‹µ ì‹œê°„: <100ms (ë‹¨ì¼ íŒŒì¼)

4. **ë³´ì•ˆ & ê°ì‚¬**
   - ì…ë ¥ ê²€ì¦ ë° sanitization
   - ì ‘ê·¼ ì œì–´ ë° ê¶Œí•œ ê´€ë¦¬
   - êµ¬ì¡°í™”ëœ ê°ì‚¬ ë¡œê¹…

## ğŸ“ˆ ì§„í–‰ ìƒí™© ì¶”ì 

### Key Performance Indicators (KPIs)
- **ê°œë°œ ì§„í–‰ë„**: ì‘ì—… ì™„ë£Œìœ¨ ê¸°ì¤€
- **í’ˆì§ˆ ì§€í‘œ**: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ì½”ë“œ í’ˆì§ˆ
- **ì„±ëŠ¥ ì§€í‘œ**: ìŠ¤ìº” ì†ë„, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- **ì‚¬ìš©ì„± ì§€í‘œ**: TAG ì •í™•ë„, ìë™í™” ì„±ê³µë¥ 

### ìœ„í—˜ ê´€ë¦¬
| ìœ„í—˜ ìš”ì†Œ | í™•ë¥  | ì˜í–¥ë„ | ì™„í™” ì „ëµ |
|----------|------|--------|----------|
| ì„±ëŠ¥ ëª©í‘œ ë¯¸ë‹¬ | ì¤‘ê°„ | ë†’ìŒ | ì ì§„ì  ìµœì í™”, ë²¤ì¹˜ë§ˆí¬ |
| Constitution ìœ„ë°˜ | ë‚®ìŒ | ë†’ìŒ | ì •ê¸° ì²´í¬, ìë™ ê²€ì¦ |
| Git í†µí•© ë³µì¡ì„± | ì¤‘ê°„ | ì¤‘ê°„ | ë‹¨ê³„ì  í†µí•©, ë¡¤ë°± ê³„íš |
| ê°œë°œì ë„êµ¬ í˜¸í™˜ì„± | ë‚®ìŒ | ì¤‘ê°„ | í‘œì¤€ í”„ë¡œí† ì½œ ì‚¬ìš© |

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥
```bash
# ì²« ë²ˆì§¸ ì‘ì—… ì‹œì‘
/moai:4-tasks SPEC-002

# ì²« ë²ˆì§¸ íƒœìŠ¤í¬ êµ¬í˜„ ì‹œì‘
/moai:5-dev T001
```

### ì¤€ë¹„ ì‚¬í•­
1. **ê°œë°œ í™˜ê²½**: Python 3.11+, Poetry, Pre-commit
2. **ì˜ì¡´ì„±**: LibCST, orjson, watchdog, pytest
3. **ë„êµ¬**: VS Code, Git, Docker (ì„ íƒ)

### ì„±ê³µ ê¸°ì¤€
- âœ… 95% Python íŒŒì¼ì— ì ì ˆí•œ TAG ì ìš©
- âœ… 5ì´ˆ ì´ë‚´ 1000íŒŒì¼ ìŠ¤ìº”
- âœ… 85% í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë‹¬ì„±
- âœ… Git ì›Œí¬í”Œë¡œìš° ì™„ì „ í†µí•©
- âœ… ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ìš´ì˜

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

### SPEC ë¬¸ì„œ
- **spec.md**: EARS í˜•ì‹ ìš”êµ¬ì‚¬í•­ ì •ì˜
- **research.md**: ê¸°ìˆ  ì¡°ì‚¬ ë° ì„ íƒ ê·¼ê±°
- **data-model.md**: ì•„í‚¤í…ì²˜ ë° ë°ì´í„° ì„¤ê³„

### API ê³„ì•½
- **contracts/**: 5ê°œ OpenAPI 3.0 ëª…ì„¸ì„œ
- **dependencies**: ì‘ì—… ê°„ ì˜ì¡´ì„± ê·¸ë˜í”„

### êµ¬í˜„ ê°€ì´ë“œ
- **tasks.md**: 48ê°œ ìƒì„¸ ì‘ì—… ë¶„í•´ (ìƒì„± ì˜ˆì •)
- **testing-strategy.md**: TDD ì „ëµ (ìƒì„± ì˜ˆì •)

---

> **@DESIGN:CODE-TAG-002** íƒœê·¸ë¥¼ í†µí•´ ì´ ê³„íšì´ ì „ì²´ ì‹œìŠ¤í…œê³¼ ì¶”ì ë©ë‹ˆë‹¤.
>
> **Constitution ì¡°ê±´ë¶€ ìŠ¹ì¸**: Simplicity ì›ì¹™ ì˜ˆì™¸ ìŠ¹ì¸ í•˜ì— ì§„í–‰
>
> **ë‹¤ìŒ ëª…ë ¹**: `/moai:4-tasks SPEC-002` - TDD ì‘ì—… ë¶„í•´ ì‹œì‘