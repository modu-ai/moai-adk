---
name: alfred:9-update
description: MoAI-ADK íŒ¨í‚¤ì§€ ë° í…œí”Œë¦¿ ì—…ë°ì´íŠ¸ (ë°±ì—… ìë™ ìƒì„±, ì„¤ì • íŒŒì¼ ë³´ì¡´)
argument-hint: [--check|--force]
tools: Read, Write, Bash, Grep, Glob
---

# ğŸ”„ MoAI-ADK í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸

## ì»¤ë§¨ë“œ ê°œìš”

MoAI-ADK npm íŒ¨í‚¤ì§€ë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , í…œí”Œë¦¿ íŒŒì¼(`.claude`, `.moai`, `CLAUDE.md`)ì„ ì•ˆì „í•˜ê²Œ ê°±ì‹ í•©ë‹ˆë‹¤. ìë™ ë°±ì—…, ì„¤ì • íŒŒì¼ ë³´ì¡´, ë¬´ê²°ì„± ê²€ì¦ì„ ì§€ì›í•©ë‹ˆë‹¤.

## ì‹¤í–‰ íë¦„

1. **ë²„ì „ í™•ì¸** - í˜„ì¬/ìµœì‹  ë²„ì „ ë¹„êµ
2. **ë°±ì—… ìƒì„±** - íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ìë™ ë°±ì—…
3. **íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸** - npm install moai-adk@latest
4. **í…œí”Œë¦¿ ë³µì‚¬** - Claude Code ë„êµ¬ ê¸°ë°˜ ì•ˆì „í•œ íŒŒì¼ ë³µì‚¬
5. **ê²€ì¦** - íŒŒì¼ ì¡´ì¬ ë° ë‚´ìš© ë¬´ê²°ì„± í™•ì¸

## Alfred ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

**ì‹¤í–‰ ë°©ì‹**: Alfredê°€ ì§ì ‘ ì‹¤í–‰ (ì „ë¬¸ ì—ì´ì „íŠ¸ ìœ„ì„ ì—†ìŒ)
**ì˜ˆì™¸ ì²˜ë¦¬**: ì˜¤ë¥˜ ë°œìƒ ì‹œ `debug-helper` ìë™ í˜¸ì¶œ
**í’ˆì§ˆ ê²€ì¦**: ì„ íƒì ìœ¼ë¡œ `trust-checker` ì—°ë™ ê°€ëŠ¥ (--check-quality ì˜µì…˜)

## ì‚¬ìš©ë²•

```bash
/alfred:9-update              # ì—…ë°ì´íŠ¸ í™•ì¸ ë° ì‹¤í–‰
/alfred:9-update --check      # ì—…ë°ì´íŠ¸ ê°€ëŠ¥ ì—¬ë¶€ë§Œ í™•ì¸
/alfred:9-update --force      # ê°•ì œ ì—…ë°ì´íŠ¸ (ë°±ì—… ì—†ì´)
```

## ì‹¤í–‰ ì ˆì°¨

### Phase 1: ë²„ì „ í™•ì¸ ë° ê²€ì¦

```bash
npm list moai-adk --depth=0   # í˜„ì¬ ë²„ì „
npm view moai-adk version     # ìµœì‹  ë²„ì „
```

**ì¡°ê±´ë¶€ ì‹¤í–‰**: `--check` ì˜µì…˜ì´ë©´ ì—¬ê¸°ì„œ ì¤‘ë‹¨í•˜ê³  ê²°ê³¼ë§Œ ë³´ê³ 

### Phase 2: ë°±ì—… ìƒì„±

```bash
BACKUP_DIR=".moai-backup/$(date +%Y-%m-%d-%H-%M-%S)"
mkdir -p "$BACKUP_DIR"
cp -r .claude .moai CLAUDE.md "$BACKUP_DIR/" 2>/dev/null || true
```

**ë°±ì—… êµ¬ì¡°**: `.moai-backup/YYYY-MM-DD-HH-mm-ss/{.claude, .moai, CLAUDE.md}`

**ì˜ˆì™¸**: `--force` ì˜µì…˜ì´ë©´ ê±´ë„ˆë›°ê¸°

### Phase 3: npm íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸

```bash
if [ -f "package.json" ]; then
    npm install moai-adk@latest
else
    npm install -g moai-adk@latest
fi
```

### Phase 4: í…œí”Œë¦¿ íŒŒì¼ ë³µì‚¬

**ë³µì‚¬ ëŒ€ìƒ**:
```
node_modules/moai-adk/templates/
  â”œâ”€â”€ .claude/{commands,agents,output-styles,hooks}/alfred/
  â”œâ”€â”€ .moai/memory/development-guide.md
  â”œâ”€â”€ .moai/project/{product,structure,tech}.md
  â””â”€â”€ CLAUDE.md
```

**ë³´ì¡´ ëŒ€ìƒ (ì ˆëŒ€ ë®ì–´ì“°ì§€ ì•ŠìŒ)**:
- `.moai/specs/` - ëª¨ë“  SPEC íŒŒì¼
- `.moai/reports/` - ë™ê¸°í™” ë¦¬í¬íŠ¸
- `.moai/config.json` - í”„ë¡œì íŠ¸ ì„¤ì •

**ë³µì‚¬ ì ˆì°¨**:

1. **íŒ¨í‚¤ì§€ ê²½ë¡œ í™•ì¸**: `[Bash] npm root` ë˜ëŠ” `npm root -g`
2. **í…œí”Œë¦¿ ê²€ì¦**: í…œí”Œë¦¿ ë””ë ‰í† ë¦¬ ì¡´ì¬ í™•ì¸
3. **íŒŒì¼ ë³µì‚¬**: ê° íŒŒì¼ íƒ€ì…ë³„ë¡œ `[Glob] â†’ [Read] â†’ [Write]` íŒ¨í„´ ì ìš©

**ê³µí†µ ë³µì‚¬ íŒ¨í„´**:
```text
[Glob] {í…œí”Œë¦¿ê²½ë¡œ}/*.{md|cjs} íŒŒì¼ ê²€ìƒ‰
â†’ ê° íŒŒì¼ë§ˆë‹¤:
  [Read] í…œí”Œë¦¿ íŒŒì¼ ë‚´ìš©
  [Write] í”„ë¡œì íŠ¸ ëŒ€ìƒ ê²½ë¡œ
â†’ ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥
```

**íŠ¹ìˆ˜ ì²˜ë¦¬**:
- **í›… íŒŒì¼**: ë³µì‚¬ í›„ `chmod +x` ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- **í”„ë¡œì íŠ¸ ë¬¸ì„œ**: `[Grep]`ìœ¼ë¡œ `{{PROJECT_NAME}}` íŒ¨í„´ ê²€ìƒ‰
  - í…œí”Œë¦¿ ìƒíƒœ â†’ ë®ì–´ì“°ê¸°
  - ì‚¬ìš©ì ìˆ˜ì • â†’ ë°±ì—… í›„ ë®ì–´ì“°ê¸°
  - íŒŒì¼ ì—†ìŒ â†’ ìƒˆë¡œ ìƒì„±
- **CLAUDE.md**: í”„ë¡œì íŠ¸ ë¬¸ì„œì™€ ë™ì¼í•œ ë°±ì—… ë¡œì§ ì ìš©

**ì˜¤ë¥˜ ì²˜ë¦¬**:
- Glob ê²°ê³¼ ì—†ìŒ â†’ í…œí”Œë¦¿ ê²½ë¡œ ì¬í™•ì¸
- Write ì‹¤íŒ¨ â†’ `mkdir -p` í›„ ì¬ì‹œë„
- Read ì‹¤íŒ¨ â†’ í•´ë‹¹ íŒŒì¼ ê±´ë„ˆë›°ê³  ë¡œê·¸ ê¸°ë¡

### Phase 5: ì—…ë°ì´íŠ¸ ê²€ì¦

**ê²€ì¦ í•­ëª©**:

1. **íŒŒì¼ ì¡´ì¬ í™•ì¸** ([Glob]):
   - `.claude/{commands,agents,hooks}/alfred/` íŒŒì¼ ê°œìˆ˜
   - `.moai/memory/development-guide.md`, `.moai/project/*.md`, `CLAUDE.md`

2. **ë‚´ìš© ê²€ì¦** ([Read]):
   - `development-guide.md` ë²„ì „ ì •ë³´
   - `CLAUDE.md` @TAG ì‹œìŠ¤í…œ ì„¹ì…˜
   - commands íŒŒì¼ë“¤ì˜ YAML frontmatter

3. **ë²„ì „ í™•ì¸** ([Bash]):
   ```bash
   npm list moai-adk --depth=0  # ìƒˆ ë²„ì „ í™•ì¸
   ```

**ì˜ˆìƒ íŒŒì¼ ê°œìˆ˜**:
- commands/alfred: ~10ê°œ
- agents/alfred: ~9ê°œ
- hooks/alfred: ~4ê°œ
- memory: 1ê°œ (development-guide.md)
- project: 3ê°œ (product, structure, tech)
- ë£¨íŠ¸: 1ê°œ (CLAUDE.md)

**ê²€ì¦ ì‹¤íŒ¨ ì‹œ**:
- íŒŒì¼ ëˆ„ë½ â†’ Phase 4 ì¬ì‹¤í–‰
- ë²„ì „ ë¶ˆì¼ì¹˜ â†’ Phase 3 ì¬ì‹¤í–‰
- ë‚´ìš© ì†ìƒ â†’ ë°±ì—… ë³µì› í›„ ì¬ì‹œì‘

**ì„ íƒì  í’ˆì§ˆ ê²€ì¦**:
`--check-quality` ì˜µì…˜ ì œê³µ ì‹œ `trust-checker` í˜¸ì¶œí•˜ì—¬ ì¶”ê°€ ê²€ì¦ (Level 1 ë¹ ë¥¸ ìŠ¤ìº”)

## ì¶œë ¥ ì˜ˆì‹œ

```text
ğŸ” MoAI-ADK ì—…ë°ì´íŠ¸ í™•ì¸ ì¤‘...
ğŸ“¦ í˜„ì¬: v0.0.1 â†’ ìµœì‹ : v0.0.2 âœ…

ğŸ’¾ ë°±ì—… ìƒì„±: .moai-backup/2025-09-30-23-45-00/
ğŸ“¦ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸: npm install moai-adk@0.0.2 âœ…

ğŸ“„ í…œí”Œë¦¿ ë³µì‚¬ ì¤‘...
   âœ… .claude/commands/alfred/ (10ê°œ)
   âœ… .claude/agents/alfred/ (9ê°œ)
   âœ… .claude/hooks/alfred/ (4ê°œ)
   âœ… .moai/memory/development-guide.md
   âœ… .moai/project/*.md (3ê°œ)
   âœ… CLAUDE.md

ğŸ” ê²€ì¦ ì™„ë£Œ:
   âœ… íŒŒì¼ ê°œìˆ˜ ì¼ì¹˜
   âœ… ë‚´ìš© ë¬´ê²°ì„± í™•ì¸
   âœ… ë²„ì „ í™•ì¸ (v0.0.2)

âœ¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ! ë°±ì—…: .moai-backup/2025-09-30-23-45-00/

âš ï¸ Claude Code ì¬ì‹œì‘ í•„ìš”
ë¡¤ë°±: moai restore --from=2025-09-30-23-45-00
```

## ì•ˆì „ ì¥ì¹˜

**ìë™ ë°±ì—…**:
- `--force` ì˜µì…˜ ì—†ìœ¼ë©´ í•­ìƒ ë°±ì—… ìƒì„±
- ë°±ì—… ìœ„ì¹˜: `.moai-backup/YYYY-MM-DD-HH-mm-ss/`
- ìˆ˜ë™ ì‚­ì œ ì „ê¹Œì§€ ì˜êµ¬ ë³´ì¡´

**ì¶©ëŒ ë°©ì§€**:
- `.moai/specs/` - ì‚¬ìš©ì SPEC íŒŒì¼ ì ˆëŒ€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
- `.moai/config.json` - í”„ë¡œì íŠ¸ ì„¤ì • ë³´ì¡´
- `.moai/reports/` - ë™ê¸°í™” ë¦¬í¬íŠ¸ ë³´ì¡´

**ë¡¤ë°± ì§€ì›**:
```bash
moai restore --list                       # ë°±ì—… ëª©ë¡
moai restore --from=2025-09-30-23-45-00  # íŠ¹ì • ë°±ì—… ë³µì›
moai restore --latest                     # ìµœê·¼ ë°±ì—… ë³µì›
```

## í•µì‹¬ ì˜¤ë¥˜ ì²˜ë¦¬

**npm install ì‹¤íŒ¨**:
- `npm cache clean --force` í›„ ì¬ì‹œë„
- ì¸í„°ë„· ì—°ê²° ë° ê¶Œí•œ í™•ì¸

**í…œí”Œë¦¿ ë””ë ‰í† ë¦¬ ì—†ìŒ**:
- `npm root` ê²½ë¡œ í™•ì¸
- íŒ¨í‚¤ì§€ ì¬ì„¤ì¹˜ (`npm install moai-adk@latest`)

**íŒŒì¼ ë³µì‚¬ ì‹¤íŒ¨**:
- `mkdir -p {ëŒ€ìƒê²½ë¡œ}` ë””ë ‰í† ë¦¬ ìƒì„±
- ë””ìŠ¤í¬ ìš©ëŸ‰ í™•ì¸ (`df -h`)

**ê²€ì¦ ì‹¤íŒ¨**:
- Phase 4 ì¬ì‹¤í–‰ (íŒŒì¼ ëˆ„ë½)
- Phase 3 ì¬ì‹¤í–‰ (ë²„ì „ ë¶ˆì¼ì¹˜)
- ë°±ì—… ë³µì› í›„ ì¬ì‹œì‘ (ë‚´ìš© ì†ìƒ)

## ê´€ë ¨ ëª…ë ¹ì–´

- `/alfred:8-project` - í”„ë¡œì íŠ¸ ì´ˆê¸°í™”/ì¬ì„¤ì •
- `moai restore` - ë°±ì—… ë³µì›
- `moai doctor` - ì‹œìŠ¤í…œ ì§„ë‹¨
- `moai status` - í˜„ì¬ ìƒíƒœ í™•ì¸

## ë²„ì „ í˜¸í™˜ì„±

- **v0.0.x â†’ v0.0.y**: íŒ¨ì¹˜ ì—…ë°ì´íŠ¸ (ì™„ì „ í˜¸í™˜)
- **v0.0.x â†’ v0.1.x**: ë§ˆì´ë„ˆ ì—…ë°ì´íŠ¸ (ì„¤ì • í™•ì¸ ê¶Œì¥)
- **v0.x.x â†’ v1.x.x**: ë©”ì´ì € ì—…ë°ì´íŠ¸ (ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ í•„ìˆ˜)
