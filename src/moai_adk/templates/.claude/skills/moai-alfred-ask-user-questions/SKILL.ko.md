---
name: moai-alfred-ask-user-questions-ko
version: 3.1.0
created: 2025-10-22
updated: 2025-11-04
status: active
description: Alfred 서브-에이전트가 모호한 결정에 대해 AskUserQuestion을 적극적으로 호출하도록 가이드
keywords: ['interactive', 'clarification', 'decision-making', 'AskUserQuestion']
allowed-tools:
  - AskUserQuestion
---

# Alfred 사용자 질문 스킬 - 가이드

## 스킬 메타데이터

| 항목 | 값 |
| ----- | ----- |
| **스킬 이름** | moai-alfred-ask-user-questions |
| **버전** | 3.1.0 (2025-10-27) |
| **핵심 도구** | `AskUserQuestion` (Claude Code 내장) |
| **자동 로드** | Alfred가 요청에서 모호성을 감지했을 때 |
| **티어** | Alfred (워크플로우 오케스트레이션) |

---

## 기능

**목적**: Alfred 서브-에이전트가 **명확한 질문을 적극적으로 사용자에게 요청**하여 사용자 의도가 모호할 때 추측하는 대신 사용자에게 직접 묻도록 합니다.

Claude Code의 네이티브 `AskUserQuestion` 도구를 활용하여 모호한 요청을 명확한 사양으로 변환하는 명시적이고 구조화된 사용자 입력을 수집합니다.

**주요 기능**:
- ✅ 단일 선택 & 다중 선택 옵션 유형
- ✅ 설문 당 1-4개 질문 (피로도 방지)
- ✅ 질문 당 2-4개 옵션 (선택 과부하 방지)
- ✅ 맞춤 입력을 위한 자동 "기타" 옵션
- ✅ 답변 기반 조건부 분기
- ✅ 모든 Alfred 명령어 통합 (Plan/Run/Sync)
- ✅ 모호성 감소 → 적은 반복 → 더 빠른 실행

---

## 언제 물어볼까요? (트리거 패턴)

### ✅ 사용자 의도가 모호할 때 물어보기:

1. **모호한 명사구**: "대시보드 추가", "인증 리팩토링", "성능 개선"
2. **범위 누락**: WHERE, WHO, WHAT, HOW, WHEN 지정 없음
3. **여러 유효한 경로**: 2개 이상의 합리적인 구현 접근법
4. **트레이드오프 결정**: 속도 vs 품질, 단순함 vs 포괄성 등
5. **위험한 작업**: 명시적 동의가 필요한 파괴적 작업

### ❌ 물어보지 말아야 할 때:
- 사용자가 정확한 요구사항을 명시적으로 지정한 경우
- 결정이 자동인 경우 (선택지 없음)
- 단 하나의 명백한 경로가 존재하는 경우
- 간단한 예/아니오 확인만 필요한 경우 (아니지만 간결하게 유지)

---

## 핵심 원칙: 그냥 물어보세요!

**골든 룰**: 의심스러울 때, **추측하는 대신 사용자에게 물어보세요.**

**이유**:
- ✅ 사용자가 정확히 무엇을 할 것인지 볼 수 있음 → 놀라움 없음
- ✅ 단일 상호작용 vs 3-5회의 왕복 소통
- ✅ 빠르게 → 확신과 함께 실행
- ✅ "분위기 코딩" 좌절감 감소

**패턴**:
```
모호한 요청 감지
         ↓
AskUserQuestion({questions: [...]}) 호출
         ↓
사용자가 명확한 옵션에서 선택
         ↓
확정된 사양으로 진행
```

---

## 빠른 시작: 최소 호출

```typescript
const answer = await AskUserQuestion({
  questions: [
    {
      question: "이것을 어떻게 구현할까요?",
      header: "접근법",          // 12자 이하
      multiSelect: false,
      options: [
        {
          label: "옵션 1",       // 1-5단어
          description: "무엇을 하고 왜 선택할지."
        },
        {
          label: "옵션 2",
          description: "다른 트레이드오프를 가진 대안."
        }
      ]
    }
  ]
});

// 반환: { "접근법": "옵션 1" }
```

---

## 주요 제약 조건

| 제약 조건 | 이유 |
|-----------|--------|
| **최대 1-4개 질문** | 사용자 피로도 방지 |
| **질문 당 2-4개 옵션** | 선택 과부하 방지 |
| **헤더 ≤12자** | TUI 레이아웃 적합 |
| **라벨 1-5단어** | 빠른 스캔 |
| **설명 필수** | 정보에 기반한 선택 가능 |
| **자동 "기타" 옵션** | 항상 맞춤 입력 가능 |

---

## 상위 5가지 사용 패턴

### 패턴 1: 구현 접근법
**트리거**: "기능 X 추가" 또는 "Y 빌드" 구체적 사항 없음

### 패턴 2: 확인 (위험한 작업)
**트리거**: 파괴적 작업 (삭제, 마이그레이션, 초기화)

### 패턴 3: 다중 옵션 기능 선택
**트리거**: "어떤 프레임워크/라이브러리/접근법?"

### 패턴 4: 다중 선택 (독립 기능)
**트리거**: "어떤 기능을 활성화/포함할까요?"

### 패턴 5: 순차 질문 (조건부 흐름)
**트리거**: 종속 결정 (Q2가 Q1 답변에 의존)

> **상세 예제와 코드**: [examples.md](examples.md) 참조

---

## Alfred 서브-에이전트와의 통합

| 서브-에이전트 | 언제 물어볼까요? | 예시 트리거 |
|-----------|-------------|-----------------|
| **spec-builder** (`/alfred:1-plan`) | SPEC 제목이 모호하거나 범위가 정의되지 않음 | "기능 추가" 구체적 사항 없음 |
| **code-builder** (`/alfred:2-run`) | 구현 접근법이 불명확함 | 여러 유효한 구현 경로 |
| **doc-syncer** (`/alfred:3-sync`) | 동기화 범위가 불명확함 | 전체 vs 부분 동기화 결정 |

> **상세 통합 패턴**: [reference.md](reference.md) 참조

---

## 모범 사례 요약

### ✅ DO (할 것)
- **구체적으로**: "어떤 데이터베이스 유형?" not "우리가 무엇을 사용해야 할까요?"
- **컨텍스트 제공**: 파일 이름, 범위, 영향 포함
- **논리적 순서**: 일반 → 구체; 가장 안전한 옵션 우선
- **위험 플래그**: "권장하지 않음" 또는 "주의:" 접두사 사용
- **트레이드오프 설명**: 시간, 자원, 복잡성 언급

### ❌ DON'T (하지 말 것)
- **질문 과용용**: 모호할 때만 물어보기
- **너무 많은 옵션**: 질문 당 2-4개 최대
- **모호한 라벨**: "옵션 A", "토큰 사용", "옵션 2"
- **설명 생략**: 사용자가 근거 필요
- **트레이드오프 숨기기**: 항상 영향 언급

> **완벽한 모범 사례 가이드**: [reference.md](reference.md) 참조

---

## 오류 처리

### 사용자 취소 (ESC 키)
```typescript
try {
  const answer = await AskUserQuestion({...});
} catch (error) {
  console.log("사용자가 설문을 취소했습니다");
  // 기본값으로 되돌리거나 중단
}
```

### 맞춤 입력 검증 ("기타" 옵션)
```typescript
const answer = await AskUserQuestion({...});

if (answer["헤더"] === "기타" || !VALID_OPTIONS.includes(answer["헤더"])) {
  validateCustomInput(answer["헤더"]);
}
```

---

## 관련 스킬

- `moai-alfred-spec-metadata-validation` (SPEC 명확성)
- `moai-alfred-ears-authoring` (요구사항 문구)
- `moai-foundation-specs` (SPEC 구조)

---

## 빠른 참조

**언제 사용**:
- 사용자 의도가 모호함
- 여러 유효한 접근법 존재
- 트레이드오프가 있는 아키텍처 결정
- 위험한 작업 전 승인 필요

**어떻게**:
1. 모호성 감지 (모호한 요청, 여러 경로 등)
2. `AskUserQuestion({ questions: [...] })` 호출
3. 사용자가 명확한 옵션에서 선택
4. 확정된 사양으로 진행

**이점**:
- ✅ 추측 대신 확실성
- ✅ 단일 상호작용 vs 3-5회 반복
- ✅ 더 빠르고 만족스러운 사용자
- ✅ 더 적은 "분위기 코딩" 좌절감

---

**상세 사양**: [reference.md](reference.md)
**실제 예제**: [examples.md](examples.md)

---

**스킬 종료** | 2025-10-27 리팩토링